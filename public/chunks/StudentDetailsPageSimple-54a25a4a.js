import{j as e}from"./charts-460f8f53.js";import{r as i,h as dr,R as ye,a as Ct,i as Gn,c as Kn,b as Yn,N as qn}from"./vendor-a78d685e.js";import{U as Ue,G as ms,c as Et,d as xe,M as X,B as Oe,o as pt,r as ur,O as mr,h as fr,X as ht,Z as Ir,a3 as Rr,f as je,A as xr,aq as Yt,e as ne,x as tt,k as Xn,ap as rt,T as pr,P as we,g as Ae,a as et,a4 as Zn,b as fs,C as Qn,u as Jn,ar as ea,as as ta,al as ra,p as sa,at as na,ah as aa,n as la,J as oa,au as Ar,av as ia,_ as ca,aa as Or}from"./ui-62862879.js";import{a as K}from"./cascade-deletion-cf3b4f10.js";import{T as da}from"./TeacherNameDisplay-c41a03ac.js";import{useStudent as ua,useTheoryLessons as ma,useStudentTheoryLessons as fa,useAvailableTheoryLessons as xa,useTheoryLessonEnrollment as pa}from"./apiCache-76565124.js";import{c as Y,C as Q}from"./card-8c079dd1.js";import{c as ha}from"./utils-a4d8ec6e.js";import"./query-84c35d59.js";import"./theoryEnrollmentService-bf9cdc6c.js";const kr={personal:{label:"×¤×¨×˜×™× ××™×©×™×™×",icon:Ue},academic:{label:"××™×“×¢ ××§×“××™",icon:ms},schedule:{label:"×œ×•×— ×–×× ×™×",icon:Et},attendance:{label:"× ×•×›×—×•×ª",icon:xe},orchestra:{label:"×ª×–××•×¨×•×ª",icon:X},theory:{label:"×ª××•×¨×™×”",icon:Oe},bagrut:{label:"×‘×’×¨×•×ª",icon:pt},documents:{label:"××¡××›×™×",icon:ur}},ga=({activeTab:t,onTabChange:r,tabs:s=[]})=>!s||s.length===0?null:e.jsxs("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm w-full overflow-hidden student-tab-navigation",children:[e.jsx("div",{className:"hidden md:flex w-full overflow-x-auto desktop-tab-nav",children:e.jsx("nav",{className:"flex gap-8 px-6 relative min-w-full","aria-label":"Tabs",children:s.map((n,a)=>{const l=kr[n.id],c=l?.icon||Ue,o=t===n.id;return e.jsxs("button",{onClick:()=>r(n.id),className:`
                  group inline-flex items-center gap-3 py-4 px-2 border-b-2 font-medium text-sm transition-all duration-300 relative tab-button
                  ${o?"border-primary-500 text-primary-600 bg-primary-50/50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 hover:bg-gray-50/50"}
                `,"aria-current":o?"page":void 0,style:{minHeight:"44px"},children:[e.jsx(c,{className:`w-5 h-5 transition-all duration-300 ${o?"text-primary-500 scale-110":"text-gray-400 group-hover:text-gray-500 group-hover:scale-105"}`}),e.jsx("span",{className:"whitespace-nowrap",children:l?.label||n.label}),o&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-primary-400 to-primary-600 rounded-full animate-scale-in"})]},n.id)})})}),e.jsxs("div",{className:"md:hidden w-full overflow-hidden mobile-tab-nav",children:[e.jsx("div",{className:"overflow-x-auto scrollbar-hide w-full",children:e.jsx("nav",{className:"flex gap-3 px-4 py-3 min-w-max","aria-label":"Tabs",style:{width:"max-content"},children:s.map((n,a)=>{const l=kr[n.id],c=l?.icon||Ue,o=t===n.id;return e.jsxs("button",{onClick:()=>r(n.id),className:`
                    flex flex-col items-center gap-1 px-4 py-3 rounded-xl font-medium text-xs transition-all duration-300 whitespace-nowrap transform tab-button
                    ${o?"bg-primary-100 text-primary-700 border-2 border-primary-200 scale-105 shadow-md":"text-gray-600 hover:text-gray-900 hover:bg-gray-50 hover:scale-102 border-2 border-transparent"}
                  `,"aria-current":o?"page":void 0,style:{minWidth:"80px",minHeight:"44px"},children:[e.jsx(c,{className:`w-5 h-5 transition-all duration-300 ${o?"text-primary-600":"text-gray-500"}`}),e.jsx("span",{className:"leading-tight",children:l?.label||n.label})]},n.id)})})}),e.jsx("div",{className:"flex justify-center py-1",children:e.jsx("div",{className:"w-8 h-1 bg-gray-200 rounded-full",children:e.jsx("div",{className:"h-full bg-primary-400 rounded-full transition-all duration-300",style:{width:`${s?.length>0?(s.findIndex(n=>n.id===t)+1)/s.length*100:0}%`}})})})]})]});function xs({isLoading:t,children:r,skeleton:s,minHeight:n="200px"}){const[a,l]=i.useState(!1);return i.useEffect(()=>{let c;return t?c=setTimeout(()=>l(!0),150):l(!1),()=>clearTimeout(c)},[t]),t&&a?e.jsx("div",{style:{minHeight:n},children:s||e.jsx(ba,{})}):t?e.jsx("div",{style:{minHeight:n},className:"flex items-center justify-center",children:e.jsx("div",{className:"animate-pulse text-gray-400",children:"×˜×•×¢×Ÿ..."})}):e.jsx(e.Fragment,{children:r})}function ba(){return e.jsx("div",{className:"space-y-4 p-4",children:[1,2,3].map(t=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},t))})}const ut={StudentHeader:()=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start gap-6 animate-pulse",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsx("div",{className:"h-7 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"})]})]})]})}),TabContent:()=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 space-y-6 animate-pulse",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/4"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-24"})]})]},t))}),TheoryLessons:()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between animate-pulse",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-48 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-64"})]}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-40"})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[1,2,3,4].map(t=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"})]}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-16"}),e.jsx("div",{className:"h-5 bg-gray-200 rounded w-20"})]})]}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-20"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-40"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"})]})]})]},t))})]}),OrchestraList:()=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(t=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsx("div",{className:"h-3 bg-gray-200 rounded w-full"})})]},t))}),DocumentsList:()=>e.jsx("div",{className:"space-y-4 p-4 animate-pulse",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white border rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded"}),e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded"})]})]},t))}),Schedule:()=>e.jsxs("div",{className:"p-4 space-y-4 animate-pulse",children:[e.jsxs("div",{className:"grid grid-cols-8 gap-2 mb-4",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded"}),Array.from({length:7}).map((t,r)=>e.jsx("div",{className:"h-6 bg-gray-200 rounded"},r))]}),Array.from({length:10}).map((t,r)=>e.jsxs("div",{className:"grid grid-cols-8 gap-2",children:[e.jsx("div",{className:"h-12 bg-gray-200 rounded"}),Array.from({length:7}).map((s,n)=>e.jsx("div",{className:"h-12 bg-gray-200 rounded opacity-50"},n))]},r))]}),AttendanceChart:()=>e.jsxs("div",{className:"bg-white p-6 rounded-lg border space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-64 bg-gray-200 rounded"}),e.jsx("div",{className:"flex justify-center gap-6",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-200 rounded-full"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-16"})]},t))})]}),PersonalInfo:()=>e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:6}).map((t,r)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]},r))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg border",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-28 mb-4"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:Array.from({length:4}).map((t,r)=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]},r))})]})]})},va=({student:t,studentId:r,isLoading:s,onStudentUpdate:n})=>{const a=t?.personalInfo||{},[l,c]=i.useState(!1),[o,u]=i.useState(!1),[d,f]=i.useState({fullName:a.fullName||"",phone:a.phone||"",age:a.age||"",address:a.address||"",parentName:a.parentName||"",parentPhone:a.parentPhone||"",parentEmail:a.parentEmail||"",studentEmail:a.studentEmail||""});i.useEffect(()=>{f({fullName:a.fullName||"",phone:a.phone||"",age:a.age||"",address:a.address||"",parentName:a.parentName||"",parentPhone:a.parentPhone||"",parentEmail:a.parentEmail||"",studentEmail:a.studentEmail||""})},[a]);const p=async()=>{try{u(!0);const m=await K.students.updateStudent(r,{personalInfo:d});n&&n(m),c(!1)}catch(m){console.error("Error saving student personal info:",m);let N="×©×’×™××” ×‘×©××™×¨×ª ×”× ×ª×•× ×™×";m.message.includes("Authentication failed")?N="×¤×’ ×ª×•×§×£ ×”×¤× ×™×™×”. ×× × ×”×ª×—×‘×¨ ××—×“×©.":m.message.includes("validation")?N="×©×’×™××” ×‘× ×ª×•× ×™× ×©×”×•×–× ×•. ×× × ×‘×“×•×§ ××ª ×”×¤×¨×˜×™× ×”××™×©×™×™×.":m.message.includes("not found")?N="×”×ª×œ××™×“ ×œ× × ××¦× ×‘××¢×¨×›×ª.":m.message.includes("Network")&&(N="×©×’×™××ª ×¨×©×ª. ×× × ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜."),alert(N)}finally{u(!1)}},h=()=>{f({fullName:a.fullName||"",phone:a.phone||"",age:a.age||"",address:a.address||"",parentName:a.parentName||"",parentPhone:a.parentPhone||"",parentEmail:a.parentEmail||"",studentEmail:a.studentEmail||""}),c(!1)};return s?e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:[1,2,3,4,5,6,7,8].map(m=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-32"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-full"})]},m))})}):e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsx("div",{className:"flex justify-end",children:l?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:p,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:[e.jsx(fr,{className:"w-4 h-4"}),o?"×©×•××¨...":"×©××•×¨"]}),e.jsxs("button",{onClick:h,disabled:o,className:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors disabled:opacity-50",children:[e.jsx(ht,{className:"w-4 h-4"}),"×‘×˜×œ"]})]}):e.jsxs("button",{onClick:()=>c(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[e.jsx(mr,{className:"w-4 h-4"}),"×¢×¨×•×š"]})}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"×¤×¨×˜×™ ×ª×œ××™×“"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×©× ××œ×"}),l?e.jsx("input",{type:"text",value:d.fullName,onChange:m=>f({...d,fullName:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×©× ××œ×"}):e.jsx("div",{className:"text-gray-900 text-lg font-medium",children:a.fullName||"×œ× ×¦×•×™×Ÿ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×˜×œ×¤×•×Ÿ"}),l?e.jsx("input",{type:"tel",value:d.phone,onChange:m=>f({...d,phone:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ"}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Ir,{className:"w-4 h-4 text-gray-500"}),a.phone||"×œ× ×¦×•×™×Ÿ"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×’×™×œ"}),l?e.jsx("input",{type:"number",value:d.age,onChange:m=>f({...d,age:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×’×™×œ",min:"1",max:"99"}):e.jsx("div",{className:"text-gray-900",children:a.age||"×œ× ×¦×•×™×Ÿ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"××™××™×™×œ ×ª×œ××™×“"}),l?e.jsx("input",{type:"email",value:d.studentEmail,onChange:m=>f({...d,studentEmail:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×›×ª×•×‘×ª ×“×•××´×œ ×ª×œ××™×“"}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-4 h-4 text-gray-500"}),a.studentEmail||"×œ× ×¦×•×™×Ÿ"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×›×ª×•×‘×ª"}),l?e.jsx("textarea",{value:d.address,onChange:m=>f({...d,address:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×›×ª×•×‘×ª ××’×•×¨×™×",rows:2}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(je,{className:"w-4 h-4 text-gray-500"}),a.address||"×œ× ×¦×•×™×Ÿ"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-700 mb-4",children:"×¤×¨×˜×™ ×”×•×¨×”"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×©× ×”×•×¨×”"}),l?e.jsx("input",{type:"text",value:d.parentName,onChange:m=>f({...d,parentName:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×©× ×”×•×¨×”"}):e.jsx("div",{className:"text-gray-900",children:a.parentName||"×œ× ×¦×•×™×Ÿ"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"×˜×œ×¤×•×Ÿ ×”×•×¨×”"}),l?e.jsx("input",{type:"tel",value:d.parentPhone,onChange:m=>f({...d,parentPhone:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ ×”×•×¨×”"}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Ir,{className:"w-4 h-4 text-gray-500"}),a.parentPhone||"×œ× ×¦×•×™×Ÿ"]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"××™××™×™×œ ×”×•×¨×”"}),l?e.jsx("input",{type:"email",value:d.parentEmail,onChange:m=>f({...d,parentEmail:m.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×”×›× ×¡ ×›×ª×•×‘×ª ×“×•××´×œ ×”×•×¨×”"}):e.jsxs("div",{className:"text-gray-900 flex items-center gap-2",children:[e.jsx(Rr,{className:"w-4 h-4 text-gray-500"}),a.parentEmail||"×œ× ×¦×•×™×Ÿ"]})]})]})]})]})},Dr=["×œ× × ×‘×—×Ÿ","×¢×‘×¨/×”","×œ× ×¢×‘×¨/×”","×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª","×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª ×™×ª×¨×”"],$r=["×¢×‘×¨/×”","×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª","×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª ×™×ª×¨×”"],ya=({student:t,studentId:r,isLoading:s,onStudentUpdate:n})=>{console.log("ğŸ“ AcademicInfoTabSimple - Full student object:",t),console.log("ğŸ“š Student enrollments:",t?.enrollments),console.log("ğŸ‘¨â€ğŸ« Student teacherAssignments:",t?.teacherAssignments);const a=t?.academicInfo||{},l=t?.teacherAssignments||[];t?.enrollments;const c=t?.teacherIds||t?.enrollments?.teacherIds||[];console.log("ğŸ“š AcademicInfoTabSimple data:",{teacherAssignments:l,teacherIds:c,"student.teacherIds":t?.teacherIds,"enrollments.teacherIds":t?.enrollments?.teacherIds});const[o,u]=i.useState(!1),[d,f]=i.useState(!1),[p,h]=i.useState([]),[m,N]=i.useState(!1),x=i.useMemo(()=>{if(console.log("ğŸ” Finding primary teacher:",{teacherAssignments:l,teachersData:p}),l&&l.length>0){const y=l.find(S=>S.isActive)||l[0];if(y?.teacherName)return console.log("âœ… Found teacherName in assignment:",y.teacherName),y.teacherName;if(y?.teacherId&&p.length>0){const S=p.find(R=>R._id===y.teacherId);if(S?.personalInfo?.fullName)return console.log("âœ… Found teacher name from teachersData:",S.personalInfo.fullName),S.personalInfo.fullName}}return p.length>0&&p[0]?.personalInfo?.fullName?(console.log("âœ… Using first teacher from teachersData:",p[0].personalInfo.fullName),p[0].personalInfo.fullName):(console.log("âš ï¸ No teacher name found"),null)},[l,p]),v=i.useMemo(()=>a.instrumentProgress&&a.instrumentProgress.length>0?a.instrumentProgress.find(S=>S.isPrimary)||a.instrumentProgress[0]:null,[a.instrumentProgress]),w=()=>{const y={};return a.instrumentProgress&&a.instrumentProgress.forEach(S=>{y[S.instrumentName]={stageTestStatus:S.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ",technicalTestStatus:S.tests?.technicalTest?.status||"×œ× × ×‘×—×Ÿ"}}),{class:a.class||"",stage:a.stage||a.level||"",startDate:a.startDate||"",instrumentTests:y}},[j,C]=i.useState(w());i.useEffect(()=>{C(w())},[a]),i.useEffect(()=>{(async()=>{const S=l.map(A=>A.teacherId).filter(Boolean),R=[...new Set([...S,...c])];if(console.log("ğŸ” Teacher IDs to load:",{fromAssignments:S,fromTeacherIds:c,combined:R}),R.length===0){console.log("âš ï¸ No teachers to load");return}N(!0);try{console.log("ğŸ”„ Loading teacher data for IDs:",R);const A=R.map(L=>K.teachers.getTeacher(L).catch(k=>(console.error(`Failed to load teacher ${L}:`,k),null))),O=(await Promise.all(A)).filter(Boolean);console.log("âœ… Loaded teachers:",O),h(O)}catch(A){console.error("âŒ Failed to load teachers:",A)}finally{N(!1)}})()},[c,l]);const P=i.useMemo(()=>{const y=l?.map(R=>R.teacherId)||[];console.log("ğŸ” Finding teachers without lessons:"),console.log("  - Enrolled teacher IDs:",c),console.log("  - Assigned teacher IDs:",y),console.log("  - Teachers data:",p);const S=p.filter(R=>c.includes(R._id)&&!y.includes(R._id));return console.log("ğŸ“Š Teachers without lessons:",S),S},[p,c,l]),T=async()=>{try{f(!0);const y=a.instrumentProgress?.map(R=>{const A=j.instrumentTests?.[R.instrumentName];if(A){const O=R.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ",L=A.stageTestStatus,k=$r.includes(L)&&!$r.includes(O)&&R.currentStage<8;return{...R,currentStage:k?R.currentStage+1:R.currentStage,tests:{...R.tests,stageTest:{...R.tests?.stageTest,status:A.stageTestStatus},technicalTest:{...R.tests?.technicalTest,status:A.technicalTestStatus}}}}return R});await K.students.updateStudent(r,{academicInfo:{...a,class:j.class,instrumentProgress:y}});const S=await K.students.getStudentById(r);n&&n(S),u(!1)}catch(y){console.error("Error saving student academic info:",y);let S="×©×’×™××” ×‘×©××™×¨×ª ×”× ×ª×•× ×™× ×”××§×“××™×™×";y.message?.includes("Authentication failed")?S="×¤×’ ×ª×•×§×£ ×”×¤× ×™×™×”. ×× × ×”×ª×—×‘×¨ ××—×“×©.":y.message?.includes("validation")?S="×©×’×™××” ×‘× ×ª×•× ×™× ×©×”×•×–× ×•. ×× × ×‘×“×•×§ ××ª ×”×¤×¨×˜×™× ×”××§×“××™×™×.":y.message?.includes("not found")?S="×”×ª×œ××™×“ ×œ× × ××¦× ×‘××¢×¨×›×ª.":y.message?.includes("Network")&&(S="×©×’×™××ª ×¨×©×ª. ×× × ×‘×“×•×§ ××ª ×”×—×™×‘×•×¨ ×œ××™× ×˜×¨× ×˜."),alert(S)}finally{f(!1)}},g=()=>{C(w()),u(!1)},b=(y,S,R)=>{C(A=>({...A,instrumentTests:{...A.instrumentTests,[y]:{...A.instrumentTests?.[y],[`${S}Status`]:R}}}))};if(s)return e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-6",children:[1,2,3,4].map(y=>e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse w-32"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded animate-pulse w-full"})]},y))})});const E=y=>{switch(y){case"×¢×‘×¨/×”":return e.jsx(xe,{className:"w-4 h-4 text-green-500"});case"×œ× ×¢×‘×¨/×”":return e.jsx(Xn,{className:"w-4 h-4 text-red-500"});case"×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª":return e.jsx(tt,{className:"w-4 h-4 text-blue-500"});case"×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª ×™×ª×¨×”":return e.jsx(tt,{className:"w-4 h-4 text-purple-500"});default:return e.jsx(ne,{className:"w-4 h-4 text-gray-500"})}},I=y=>{switch(y){case"×¢×‘×¨/×”":return"bg-green-100 text-green-800";case"×œ× ×¢×‘×¨/×”":return"bg-red-100 text-red-800";case"×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª":return"bg-blue-100 text-blue-800";case"×¢×‘×¨/×” ×‘×”×¦×˜×™×™× ×•×ª ×™×ª×¨×”":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"p-6 space-y-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"××™×“×¢ ××§×“××™"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"×”×ª×§×“××•×ª, ×›×™×©×•×¨×™× ×•×”×™×©×’×™× ××§×“××™×™×"})]}),e.jsx("div",{className:"flex items-center gap-3",children:o?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:T,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(fr,{className:"w-4 h-4"}),d?"×©×•××¨...":"×©××•×¨"]}),e.jsxs("button",{onClick:g,disabled:d,className:"flex items-center gap-2 px-4 py-2 bg-gray-500 text-white rounded-xl hover:bg-gray-600 transition-colors shadow-md hover:shadow-lg disabled:opacity-50",children:[e.jsx(ht,{className:"w-4 h-4"}),"×‘×˜×œ"]})]}):e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-xl hover:bg-primary-600 transition-colors shadow-md hover:shadow-lg",children:[e.jsx(mr,{className:"w-4 h-4"}),"×¢×¨×•×š"]})})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-5 pb-4 border-b border-gray-100",children:[e.jsx("div",{className:"p-2 bg-primary-50 rounded-lg",children:e.jsx(Oe,{className:"w-5 h-5 text-primary-600"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"×¤×¨×˜×™× ××§×“××™×™×"})]}),P.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm text-orange-700",children:[e.jsx(xr,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"××•×¨×™× ×œ×œ× ×©×™×¢×•×¨:"}),P.map((y,S)=>e.jsxs("span",{children:[y.personalInfo?.fullName||"××•×¨×”",S<P.length-1?", ":""]},y._id||S))]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-primary-50 rounded-lg p-4 border border-primary-200",children:[e.jsxs("div",{className:"text-sm text-primary-600 mb-1 flex items-center gap-1",children:[e.jsx(Ue,{className:"w-4 h-4"}),"××•×¨×”"]}),e.jsx("div",{className:"text-base font-semibold text-primary-800",children:m?e.jsx("span",{className:"text-gray-400 animate-pulse",children:"×˜×•×¢×Ÿ..."}):x||(l.length>0||c.length>0?e.jsx("span",{className:"text-orange-500",children:"×˜×•×¢×Ÿ ×©× ××•×¨×”..."}):e.jsx("span",{className:"text-gray-400",children:"×œ× ××©×•×™×š"}))})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"×›×™×ª×”"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:o?e.jsx("input",{type:"text",value:j.class,onChange:y=>C({...j,class:y.target.value}),className:"w-full px-3 py-2 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×›×™×ª×”"}):a.class||e.jsx("span",{className:"text-gray-400",children:"×œ× ×¦×•×™×Ÿ"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"×›×œ×™ × ×’×™× ×”"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:v?.instrumentName||e.jsx("span",{className:"text-gray-400",children:"×œ× ×¦×•×™×Ÿ"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"×©×œ×‘"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:v?.currentStage||v?.stage||a.stage||a.level||e.jsx("span",{className:"text-gray-400",children:"×œ× ×¦×•×™×Ÿ"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"×ª××¨×™×š ×”×ª×—×œ×”"}),e.jsx("div",{className:"text-base font-semibold text-gray-900",children:o?e.jsx("input",{type:"date",value:j.startDate?new Date(j.startDate).toISOString().split("T")[0]:"",onChange:y=>C({...j,startDate:y.target.value}),className:"w-full px-3 py-2 text-base border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500"}):a.startDate?new Date(a.startDate).toLocaleDateString("he-IL"):e.jsx("span",{className:"text-gray-400",children:"×œ× ×¦×•×™×Ÿ"})})]})]}),a.instrumentProgress&&a.instrumentProgress.length>0&&e.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Yt,{className:"w-5 h-5 text-primary-600"}),e.jsx("h4",{className:"text-base font-semibold text-gray-900",children:"××‘×—× ×™×"})]}),e.jsx("div",{className:"space-y-4",children:a.instrumentProgress.map((y,S)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[a.instrumentProgress.length>1&&e.jsxs("div",{className:"flex items-center gap-2 mb-3 pb-2 border-b border-gray-200",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:y.instrumentName}),y.isPrimary&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-primary-100 text-primary-800 rounded-full",children:"×¨××©×™"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"××‘×—×Ÿ ×˜×›× ×™"}),o?e.jsx("select",{value:j.instrumentTests?.[y.instrumentName]?.technicalTestStatus||"×œ× × ×‘×—×Ÿ",onChange:R=>b(y.instrumentName,"technicalTest",R.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:Dr.map(R=>e.jsx("option",{value:R,children:R},R))}):e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${I(y.tests?.technicalTest?.status||"×œ× × ×‘×—×Ÿ")}`,children:[E(y.tests?.technicalTest?.status||"×œ× × ×‘×—×Ÿ"),y.tests?.technicalTest?.status||"×œ× × ×‘×—×Ÿ"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"××‘×—×Ÿ ×©×œ×‘"}),o?e.jsx("select",{value:j.instrumentTests?.[y.instrumentName]?.stageTestStatus||"×œ× × ×‘×—×Ÿ",onChange:R=>b(y.instrumentName,"stageTest",R.target.value),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:Dr.map(R=>e.jsx("option",{value:R,children:R},R))}):e.jsxs("div",{className:`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-sm font-medium ${I(y.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ")}`,children:[E(y.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ"),y.tests?.stageTest?.status||"×œ× × ×‘×—×Ÿ"]})]})]})]},S))})]}),a.notes&&e.jsxs("div",{className:"border-t border-gray-100 pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ur,{className:"w-4 h-4 text-primary-600"}),e.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:"×”×¢×¨×•×ª"})]}),e.jsx("p",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg",children:a.notes})]})]})]})},qt=i.memo(({lesson:t,isEnrolled:r=!1,onEnroll:s,onUnenroll:n,isEnrolling:a=!1,isUnenrolling:l=!1,studentGrade:c,canEnroll:o=!0})=>{const u=i.useMemo(()=>{switch(t.level?.toLowerCase()){case"beginner":case"××ª×—×™×œ×™×":return"bg-green-100 text-green-800";case"intermediate":case"×‘×™× ×•× ×™":return"bg-yellow-100 text-yellow-800";case"advanced":case"××ª×§×“××™×":return"bg-red-100 text-red-800";default:return"bg-blue-100 text-blue-800"}},[t.level]),d=i.useMemo(()=>{switch(t.category?.toLowerCase()){case"harmony":case"×”×¨××•× ×™×”":return e.jsx(X,{className:"w-4 h-4"});case"theory":case"×ª×™××•×¨×™×”":return e.jsx(Oe,{className:"w-4 h-4"});case"composition":case"×§×•××¤×•×–×™×¦×™×”":return e.jsx(ms,{className:"w-4 h-4"});default:return e.jsx(Oe,{className:"w-4 h-4"})}},[t.category]),f=h=>{if(!h)return"";const[m,N]=h.split(":");return`${m}:${N}`},p=i.useMemo(()=>{if(!t.maxStudents)return null;const h=t.studentIds?.length||0,m=h/t.maxStudents*100;return{current:h,total:t.maxStudents,percentage:m}},[t.maxStudents,t.studentIds]);return e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d,e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:t.title||t.name||"×©×™×¢×•×¨ ×ª×™××•×¨×™×”"})]}),t.category&&e.jsxs("span",{className:"text-sm text-gray-600",children:["×§×˜×’×•×¨×™×”: ",t.category]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2 flex-wrap",children:[t.level&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u}`,children:t.level}),!r&&t.gradeCompatible&&c&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:["××ª××™× ×œ×›×™×ª×” ",c]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"×¨×©×•×"]}),e.jsx("button",{onClick:n,disabled:l,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",title:"×‘×˜×œ ×”×¨×©××”",children:l?e.jsx(rt,{className:"w-4 h-4 animate-spin"}):e.jsx(pr,{className:"w-4 h-4"})})]}):e.jsx("button",{onClick:s,disabled:!o||a,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${o?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:a?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-4 h-4 animate-spin"}),"× ×¨×©×..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-4 h-4"}),"×”×¨×©×"]})})})]}),e.jsx(da,{lesson:t,className:"mb-3",showIcon:!0}),(t.date||t.startTime)&&e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(ne,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[t.date&&new Date(t.date).toLocaleDateString("he-IL"),t.startTime&&t.endTime&&e.jsxs(e.Fragment,{children:[t.date?" â€¢ ":"",f(t.startTime)," - ",f(t.endTime)]})]})]})}),t.location&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-3",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:t.location})]}),p&&e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600 mb-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm",children:[p.current," / ",p.total," ×ª×œ××™×“×™×"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${p.percentage}%`}})})]}),!r&&e.jsxs(e.Fragment,{children:[t.isFull&&e.jsx("div",{className:"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×”×©×™×¢×•×¨ ××œ×"})]})}),!t.gradeCompatible&&e.jsx("div",{className:"mb-3 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×œ× ××ª××™× ×œ×›×™×ª×”"})]})}),!t.levelCompatible&&e.jsx("div",{className:"mb-3 p-3 bg-orange-50 border border-orange-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-orange-800",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×¨××” ×œ× ××ª××™××”"})]})})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 mt-3 pt-3 border-t",children:t.description}),t.targetGrades&&t.targetGrades.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Zn,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["××™×•×¢×“ ×œ×›×™×ª×•×ª: ",t.targetGrades.join(", ")]})]})})]})});qt.displayName="LessonCard";const Xt=i.memo(({icon:t,title:r,description:s,actionLabel:n,onAction:a})=>e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:r}),e.jsx("p",{className:"text-gray-500 mb-6",children:s}),n&&a&&e.jsx("button",{onClick:a,className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:n})]}));Xt.displayName="EmptyState";const Na=({student:t,studentId:r})=>{const[s,n]=i.useState("current"),[a,l]=i.useState(null),{data:c,isLoading:o,error:u}=ua(r),{data:d,isLoading:f}=ma(),p=i.useMemo(()=>t?.academicInfo?.class||c?.academicInfo?.class||"×–",[t,c]),h=i.useMemo(()=>t?.theoryLevel||c?.theoryLevel||"beginner",[t,c]),m=fa(r),N=xa(r,p,h),{enroll:x,unenroll:v,isEnrolling:w,isUnenrolling:j,error:C}=pa(r),P=i.useMemo(()=>y=>{x({lessonId:y})},[x]),T=i.useMemo(()=>y=>{v({lessonId:y}),l(null)},[v]),g=o||f,b=u||C;if(g)return e.jsx(xs,{isLoading:!0,skeleton:e.jsx(ut.TabContent,{}),minHeight:"400px",children:e.jsx("div",{})});if(b)return e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"text-red-600 text-lg mb-2",children:"âš ï¸ ×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×"}),e.jsx("div",{className:"text-gray-600 mb-4 text-sm",children:u?.message||C?.message||"××™×¨×¢×” ×©×’×™××” ×œ× ×¦×¤×•×™×”"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors text-sm",children:"× ×¡×” ×©×•×‘"})]});const E=()=>m.length===0?e.jsx(Xt,{icon:e.jsx(Oe,{className:"w-8 h-8 text-gray-300"}),title:"××™×Ÿ ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×¨×©×•××™×",description:"×”×ª×œ××™×“ ××™× ×• ×¨×©×•× ×›×¨×’×¢ ×œ×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”",actionLabel:"×¦×¤×” ×‘×©×™×¢×•×¨×™× ×–××™× ×™×",onAction:()=>n("manage")}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5 text-purple-600"}),"×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×¨×©×•××™× (",m.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:m.map(y=>e.jsx(qt,{lesson:y,isEnrolled:!0,onUnenroll:()=>l(y._id),isUnenrolling:j,studentGrade:p},y._id))})]}),I=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-green-600"}),"×©×™×¢×•×¨×™ ×ª×™××•×¨×™×” ×–××™× ×™× ×œ×”×¨×©××”"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["×›×™×ª×”: ",p," â€¢ ×¨××”: ",h]})]}),N.length===0?e.jsx(Xt,{icon:e.jsx(Oe,{className:"w-8 h-8 text-gray-300"}),title:"××™×Ÿ ×©×™×¢×•×¨×™× ×–××™× ×™×",description:"×›×œ ×”×©×™×¢×•×¨×™× ×”××ª××™××™× ××œ××™× ××• ×©×›×‘×¨ × ×¨×©××ª ××œ×™×”×"}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:N.map(y=>e.jsx(qt,{lesson:y,isEnrolled:!1,onEnroll:()=>P(y._id),isEnrolling:w,studentGrade:p,canEnroll:y.isCompatible},y._id))})]});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"×©×™×¢×•×¨×™ ×ª×™××•×¨×™×”"})}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>n("current"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${s==="current"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),"×©×™×¢×•×¨×™× ×¨×©×•××™× (",m.length,")"]})}),e.jsx("button",{onClick:()=>n("manage"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${s==="manage"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),"×”×¨×©××” ×—×“×©×” (",N.length,")"]})})]})]}),s==="current"?E():I(),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"×‘×˜×œ ×”×¨×©××” ×œ×©×™×¢×•×¨ ×ª×™××•×¨×™×”"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×˜×œ ××ª ×”×”×¨×©××” ×œ×©×™×¢×•×¨ ×–×”? ×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>l(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"×‘×™×˜×•×œ"}),e.jsx("button",{onClick:()=>T(a),disabled:j,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx(rt,{className:"w-4 h-4 animate-spin"}),"××‘×˜×œ..."]}):"×‘×˜×œ ×”×¨×©××”"})]})]})})]})},ja=i.memo(Na),wa=({lessons:t,className:r=""})=>{const s=["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—××™×©×™","×©×™×©×™"],n=t.reduce((o,u)=>(u.dayOfWeek>=0&&u.dayOfWeek<=5&&(o[u.dayOfWeek]||(o[u.dayOfWeek]=[]),o[u.dayOfWeek].push(u)),o),{});Object.keys(n).forEach(o=>{n[parseInt(o)].sort((u,d)=>{const f=u.startTime.split(":").map(Number),p=d.startTime.split(":").map(Number),h=f[0]*60+f[1],m=p[0]*60+p[1];return h-m})});const a=o=>{switch(o){case"individual":return"bg-gradient-to-r from-blue-500 to-blue-600 text-white border-blue-600";case"group":return"bg-gradient-to-r from-green-500 to-green-600 text-white border-green-600";case"orchestra":return"bg-gradient-to-r from-purple-500 to-purple-600 text-white border-purple-600";case"theory":return"bg-gradient-to-r from-orange-500 to-orange-600 text-white border-orange-600";default:return"bg-gradient-to-r from-gray-500 to-gray-600 text-white border-gray-600"}},l=o=>{switch(o){case"individual":return"×©×™×¢×•×¨ ××™×©×™";case"group":return"×©×™×¢×•×¨ ×§×‘×•×¦×ª×™";case"orchestra":return"×ª×–××•×¨×ª";case"theory":return"×ª×™××•×¨×™×”";default:return"×©×™×¢×•×¨"}},c=(o,u)=>{const[d,f]=o.split(":").map(Number),[p,h]=u.split(":").map(Number),m=d*60+f;return p*60+h-m};return e.jsxs("div",{className:`simple-weekly-grid ${r}`,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:"×œ×•×— ×–×× ×™× ×©×‘×•×¢×™"}),e.jsx("p",{className:"text-xs text-gray-600",children:t.length===0?"××™×Ÿ ×©×™×¢×•×¨×™× ×”×©×‘×•×¢":t.length===1?"×©×™×¢×•×¨ ××—×“ ×”×©×‘×•×¢":`${t.length} ×©×™×¢×•×¨×™× ×”×©×‘×•×¢`})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 mb-4",children:s.map((o,u)=>{const d=n[u]||[];return e.jsxs("div",{className:"day-column",children:[e.jsxs("div",{className:"day-header bg-gray-50 rounded-t-lg px-3 py-2 border-b",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-center text-sm",children:o}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:d.length===0?"×¨×™×§":d.length===1?"1":`${d.length}`})]}),e.jsx("div",{className:"day-content bg-white rounded-b-lg border border-t-0 border-gray-200 min-h-24",children:d.length===0?e.jsxs("div",{className:"p-3 text-center",children:[e.jsx("div",{className:"text-gray-300 mb-1",children:e.jsx(X,{className:"w-5 h-5 mx-auto"})}),e.jsx("p",{className:"text-gray-400 text-xs",children:"××™×Ÿ"})]}):e.jsx("div",{className:"p-2 space-y-2",children:d.map(f=>e.jsxs("div",{className:`lesson-card rounded-md p-2 border shadow-sm hover:shadow-md transition-all duration-200 ${a(f.lessonType)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h5",{className:"font-semibold text-sm truncate",children:f.instrumentName}),e.jsx("span",{className:"text-xs bg-white bg-opacity-20 px-1 py-0.5 rounded",children:l(f.lessonType)})]}),e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsxs("span",{className:"text-xs font-medium",children:[f.startTime,"-",f.endTime]}),e.jsxs("span",{className:"text-xs bg-white bg-opacity-20 px-1 rounded",children:[c(f.startTime,f.endTime),"×“'"]})]}),e.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[e.jsx(Ue,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs truncate",children:f.teacherName})]}),(f.roomNumber||f.location)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs truncate",children:f.roomNumber?`×—×“×¨ ${f.roomNumber}`:f.location})]})]},f.id))})})]},u)})}),e.jsxs("div",{className:"legend bg-gray-50 rounded-lg p-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2 text-sm",children:"××§×¨×"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-blue-500 to-blue-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"××™×©×™"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-green-500 to-green-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"×§×‘×•×¦×ª×™"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-purple-500 to-purple-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"×ª×–××•×¨×ª"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-gradient-to-r from-orange-500 to-orange-600 rounded"}),e.jsx("span",{className:"text-xs text-gray-700",children:"×ª×™××•×¨×™×”"})]})]})]})]})},Sa=({student:t,studentId:r,isLoading:s})=>{const[n,a]=i.useState({}),[l,c]=i.useState([]),[o,u]=i.useState(!1);i.useEffect(()=>{(async()=>{if(t?.teacherAssignments&&t.teacherAssignments.length>0){const m=[...new Set(t.teacherAssignments.map(x=>x.teacherId).filter(Boolean))],N={};for(const x of m)try{const v=await K.teachers.getTeacherById(x);N[x]=v,console.log(`Fetched teacher ${x}:`,v.personalInfo?.fullName)}catch(v){console.error(`Failed to fetch teacher ${x}:`,v)}a(N)}})()},[t?.teacherAssignments]),i.useEffect(()=>{(async()=>{if(t)try{u(!0);const N=(await K.orchestras.getOrchestras()).filter(x=>x.memberIds?.includes(r)||t?.enrollments?.orchestraIds?.includes(x._id));c(N)}catch(m){console.error("Error fetching orchestras:",m),c([])}finally{u(!1)}})()},[t?.enrollments?.orchestraIds,r,t]);const d=i.useMemo(()=>{const h=[];return console.log("Processing student data:",t),t?.teacherAssignments&&t.teacherAssignments.length>0&&t.teacherAssignments.forEach((m,N)=>{console.log(`Processing assignment ${N}:`,m);const v={×¨××©×•×Ÿ:0,×©× ×™:1,×©×œ×™×©×™:2,×¨×‘×™×¢×™:3,×—××™×©×™:4,×©×™×©×™:5,×©×‘×ª:6}[m.day]??0,w=m.time||m.startTime||"14:30",j=(b,E)=>{const[I,y]=b.split(":").map(Number),S=I*60+y+E,R=Math.floor(S/60),A=S%60;return`${R.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}`},C=m.scheduleInfo?.endTime||j(w,m.duration||45),P=n[m.teacherId],T=P?.personalInfo?.fullName||m.scheduleInfo?.teacherName||m.teacherName||"××•×¨×”",g=P?.professionalInfo?.instrument||m.instrument||t?.academicInfo?.instrumentProgress?.[0]?.instrumentName||"×›×œ×™ × ×’×™× ×”";h.push({id:m._id||m.teacherId||`lesson-${N}`,instrumentName:g,teacherName:T,teacherId:m.teacherId,startTime:w,endTime:C,dayOfWeek:v,location:m.location||m.scheduleInfo?.location,roomNumber:m.roomNumber||m.room,lessonType:m.lessonType||"individual"})}),t?.lessons&&t.lessons.length>0&&t.lessons.forEach((m,N)=>{console.log(`Processing lesson ${N}:`,m);const v=(m.teacherId?n[m.teacherId]:null)?.personalInfo?.fullName||m.teacherName||m.teacher?.personalInfo?.fullName||"××•×¨×”";h.push({id:m._id||`lesson-direct-${N}`,instrumentName:m.instrument||m.instrumentName||"×›×œ×™ × ×’×™× ×”",teacherName:v,startTime:m.startTime||"14:30",endTime:m.endTime||"15:15",dayOfWeek:m.dayOfWeek??2,location:m.location,roomNumber:m.roomNumber||m.room,lessonType:m.lessonType||"individual"})}),l&&l.length>0&&l.forEach((m,N)=>{const x=(()=>{const T=m.conductor||m.conductorInfo;return T?typeof T=="string"?T:T.personalInfo?.fullName?T.personalInfo.fullName:T.personalInfo?.firstName&&T.personalInfo?.lastName?`${T.personalInfo.firstName} ${T.personalInfo.lastName}`:T.personalInfo?.name?T.personalInfo.name:T.personalInfo?.hebrewName?T.personalInfo.hebrewName:T.fullName?T.fullName:T.name?T.name:T.displayName?T.displayName:"×× ×¦×— ×œ× ××•×’×“":"×× ×¦×— ×œ× ××•×’×“"})();let v=null,w=null,j="17:00",C="18:30",P="××•×œ× ×’×Ÿ";m.rehearsalSchedule&&(m.rehearsalSchedule.dayOfWeek!==void 0||m.rehearsalSchedule.dayName)?v=m.rehearsalSchedule:m.schedule&&(m.schedule.dayOfWeek!==void 0||m.schedule.dayName)?v=m.schedule:m.rehearsals&&m.rehearsals.length>0&&(v=m.rehearsals[0]),v?(w=v.dayOfWeek,w===void 0&&v.dayName&&(w={×¨××©×•×Ÿ:0,×©× ×™:1,×©×œ×™×©×™:2,×¨×‘×™×¢×™:3,×—××™×©×™:4,×©×™×©×™:5,×©×‘×ª:6}[v.dayName]??1),j=v.startTime||j,C=v.endTime||C,P=v.location||m.location||P):w=3,w!==null&&h.push({id:`orchestra-${m._id}`,instrumentName:m.name||"×ª×–××•×¨×ª",teacherName:x,startTime:j,endTime:C,dayOfWeek:w,location:P,roomNumber:null,lessonType:"orchestra"})}),h},[t?.teacherAssignments,t?.lessons,n,l]),f=i.useMemo(()=>l.map(h=>({id:h._id,name:h.name||"×ª×–××•×¨×ª",status:"×¨×©×•×",conductor:h.conductor,rehearsalSchedule:h.rehearsalSchedule,location:h.location})),[l]),p=i.useMemo(()=>d.filter(h=>h.lessonType!=="orchestra"),[d]);return s||o?e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-48"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"})]})}):e.jsxs("div",{className:"p-4 space-y-4 bg-white min-h-screen w-full max-w-full overflow-hidden student-content-area",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"×œ×•×— ×–×× ×™× ×©×‘×•×¢×™"}),e.jsx("p",{className:"text-gray-600 mt-1 text-sm",children:d.length===0?"××™×Ÿ ×©×™×¢×•×¨×™× ××ª×•×›× × ×™×":d.length===1?"×©×™×¢×•×¨ ××—×“ ×‘×©×‘×•×¢":`${d.length} ×©×™×¢×•×¨×™× ×‘×©×‘×•×¢`})]}),d.length>0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 w-full max-w-full overflow-hidden",children:e.jsx(wa,{lessons:d})}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx(Et,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"××™×Ÿ ×©×™×¢×•×¨×™× ××ª×•×›× × ×™×"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"×”×ª×œ××™×“ ×¢×“×™×™×Ÿ ×œ× ×©×•×™×™×š ×œ××•×¨×™× ××• ×©×œ× ×”×•×’×“×¨×• ×œ×• ×©×™×¢×•×¨×™× ×§×‘×•×¢×™×"}),e.jsx("div",{className:"text-sm text-gray-500",children:"× ×™×ª×Ÿ ×œ×©×™×™×š ××•×¨×™× ×•×œ×”×’×“×™×¨ ×©×™×¢×•×¨×™× ×“×¨×š ×”××¢×¨×›×ª"})]}),(p.length>0||f.length>0)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[p.length>0?e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h4",{className:"text-base font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4 text-primary-600"}),"×©×™×¢×•×¨×™× ×”×©×‘×•×¢"]}),e.jsx("div",{className:"space-y-3",children:p.map(h=>{const m=["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—××™×©×™","×©×™×©×™","×©×‘×ª"];return e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{className:"w-4 h-4 text-primary-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:h.instrumentName})]}),e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:m[h.dayOfWeek]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"}),e.jsxs("span",{children:[h.startTime," - ",h.endTime]})]}),(h.roomNumber||h.location)&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(je,{className:"w-3 h-3"}),e.jsx("span",{children:h.roomNumber?`×—×“×¨ ${h.roomNumber}`:h.location})]})]}),e.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:["××•×¨×”: ",h.teacherName]})]},h.id)})})]}):e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-4",children:[e.jsx(X,{className:"w-10 h-10 mx-auto mb-2 text-gray-300"}),e.jsx("h4",{className:"text-base font-medium text-gray-900 mb-1",children:"××™×Ÿ ×©×™×¢×•×¨×™× ××™×©×™×™×"}),e.jsx("p",{className:"text-sm text-gray-600",children:"×”×ª×œ××™×“ ×˜×¨× ×©×•×™×™×š ×œ×©×™×¢×•×¨×™× ××™×©×™×™×"})]})}),f.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("h4",{className:"text-base font-medium text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-purple-600"}),"×ª×–××•×¨×•×ª ×•×¤×¢×™×œ×•×™×•×ª"]}),e.jsx("div",{className:"space-y-4",children:f.map(h=>e.jsxs("div",{className:"p-5 bg-purple-50 rounded-lg border border-purple-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:h.name})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:h.status})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"×× ×¦×—:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(()=>{const m=h.conductor;return m?typeof m=="string"?m:m.personalInfo?.fullName?m.personalInfo.fullName:m.personalInfo?.firstName&&m.personalInfo?.lastName?`${m.personalInfo.firstName} ${m.personalInfo.lastName}`:m.personalInfo?.name?m.personalInfo.name:m.personalInfo?.hebrewName?m.personalInfo.hebrewName:m.fullName?m.fullName:m.name?m.name:m.displayName?m.displayName:"×œ× ××•×’×“":"×œ× ××•×’×“"})()})]})}),h.rehearsalSchedule?e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-blue-600"}),"×—×–×¨×•×ª ×©×‘×•×¢×™×•×ª"]}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-blue-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-900",children:h.rehearsalSchedule.dayName||"×œ× ××•×’×“×¨"}),e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{className:"font-medium text-blue-800",children:h.rehearsalSchedule.startTime&&h.rehearsalSchedule.endTime?`${h.rehearsalSchedule.startTime} - ${h.rehearsalSchedule.endTime}`:"×©×¢×•×ª ×œ× ××•×’×“×¨×•×ª"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-700",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:h.rehearsalSchedule.location||h.location||"××•×œ× ×’×Ÿ"})]})]})})]}):e.jsx("div",{className:"mt-2 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:"×œ×•×— ×–×× ×™× ×™×¤×•×¨×¡× ×‘×”××©×š"})]},h.id))})]}),f.length===0&&e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ae,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"××™×Ÿ ×ª×–××•×¨×•×ª"}),e.jsx("p",{className:"text-gray-600",children:"×œ× × ×¨×©××ª ×¢×“×™×™×Ÿ ×œ×ª×–××•×¨×•×ª ××• ×¤×¢×™×œ×•×™×•×ª ×§×‘×•×¦×ª×™×•×ª"})]})})]}),p.length===0&&f.length>0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5 text-purple-600"}),"×ª×–××•×¨×•×ª ×•×¤×¢×™×œ×•×™×•×ª"]}),e.jsx("div",{className:"space-y-4",children:f.map(h=>e.jsxs("div",{className:"p-5 bg-purple-50 rounded-lg border border-purple-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ae,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-900 text-lg",children:h.name})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800",children:h.status})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"×× ×¦×—:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(()=>{const m=h.conductor;return m?typeof m=="string"?m:m.personalInfo?.fullName?m.personalInfo.fullName:m.personalInfo?.firstName&&m.personalInfo?.lastName?`${m.personalInfo.firstName} ${m.personalInfo.lastName}`:m.personalInfo?.name?m.personalInfo.name:m.personalInfo?.hebrewName?m.personalInfo.hebrewName:m.fullName?m.fullName:m.name?m.name:m.displayName?m.displayName:"×œ× ××•×’×“":"×œ× ××•×’×“"})()})]})}),h.rehearsalSchedule?e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-blue-600"}),"×—×–×¨×•×ª ×©×‘×•×¢×™×•×ª"]}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-blue-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-900",children:h.rehearsalSchedule.dayName||"×œ× ××•×’×“×¨"}),e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{className:"font-medium text-blue-800",children:h.rehearsalSchedule.startTime&&h.rehearsalSchedule.endTime?`${h.rehearsalSchedule.startTime} - ${h.rehearsalSchedule.endTime}`:"×©×¢×•×ª ×œ× ××•×’×“×¨×•×ª"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-700",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:h.rehearsalSchedule.location||h.location||"××•×œ× ×’×Ÿ"})]})]})})]}):e.jsx("div",{className:"mt-2 text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:"×œ×•×— ×–×× ×™× ×™×¤×•×¨×¡× ×‘×”××©×š"})]},h.id))})]})]})},Ca=({student:t,studentId:r,isLoading:s})=>{const[n,a]=i.useState("current"),[l,c]=i.useState([]),[o,u]=i.useState([]),[d,f]=i.useState(!1),[p,h]=i.useState(null),[m,N]=i.useState(null),x=t?.teacherAssignments?.[0]?.instrument||"×—×¦×•×¦×¨×”",v=t?.academicInfo?.class||"×–";i.useEffect(()=>{(async()=>{try{f(!0);const E=(await K.orchestras.getOrchestras()).filter(A=>A.memberIds?.includes(r)),I=t?.enrollments?.orchestraIds||[],y=new Set([...I,...E.map(A=>A._id)]);if(y.size===0){c([]);return}const S=Array.from(y).map(async A=>{try{const O=await K.orchestras.getOrchestra(A);let L=null;if(O.conductorId||O.teacherId)try{const _=O.conductorId||O.teacherId;L=await K.teachers.getTeacher(_)}catch(_){console.warn(`Failed to fetch conductor ${O.conductorId||O.teacherId}:`,_)}const k={hasRehearsals:O.rehearsalIds&&O.rehearsalIds.length>0,rehearsalCount:O.rehearsalIds?.length||0,location:O.location||"××•×œ× ×”××•×–×™×§×” ×”×¨××©×™"};return{...O,conductor:L||O.conductor,enrollmentStatus:"enrolled",rehearsalSummary:k}}catch(O){console.warn(`Failed to fetch orchestra ${A}:`,O);const L=E.find(k=>k._id===A);return L?{...L,enrollmentStatus:"enrolled",rehearsalSummary:{hasRehearsals:!1,rehearsalCount:0,location:"×œ× ××•×’×“"}}:{_id:A,name:"×ª×–××•×¨×ª ×œ× ×–××™× ×”",error:!0,enrollmentStatus:"enrolled",rehearsalSummary:{hasRehearsals:!1,rehearsalCount:0,location:"×œ× ××•×’×“"}}}}),R=await Promise.all(S);c(R),console.log(`Found ${R.length} enrolled orchestras for student ${r}`),R.length>0&&(console.log("ğŸ“Š Enrolled orchestra sample:",R[0]),console.log("ğŸ“Š Enrolled orchestra keys:",Object.keys(R[0])),console.log("ğŸ“Š Enrolled rehearsal schedule:",R[0].rehearsalSchedule))}catch(b){console.error("Error fetching enrolled orchestras:",b)}finally{f(!1)}})()},[t?.enrollments?.orchestraIds,r]),i.useEffect(()=>{(async()=>{if(n==="manage")try{f(!0);const b=await K.orchestras.getOrchestras(),I=(await Promise.all(b.map(async y=>{const S=t?.enrollments?.orchestraIds?.includes(y._id)||y.memberIds?.includes(r);let R=!0;y.requiredInstruments&&y.requiredInstruments.length>0&&(R=y.requiredInstruments.includes(x));let A=!0;y.gradeRequirements&&y.gradeRequirements.length>0&&(A=y.gradeRequirements.includes(v));let O=null;if(y.conductorId||y.teacherId)try{const k=y.conductorId||y.teacherId;O=await K.teachers.getTeacher(k)}catch(k){console.warn(`Failed to fetch conductor ${y.conductorId||y.teacherId}:`,k)}const L={hasRehearsals:y.rehearsalIds&&y.rehearsalIds.length>0,rehearsalCount:y.rehearsalIds?.length||0,location:y.location||"××•×œ× ×”××•×–×™×§×” ×”×¨××©×™"};return{...y,conductor:O||y.conductor,isEnrolled:S,instrumentCompatible:R,gradeCompatible:A,isCompatible:R&&A,rehearsalSummary:L}}))).filter(y=>!y.isEnrolled);console.log("All orchestras:",b.length,"Available:",I.length),console.log("ğŸ“Š Orchestra data sample:",b[0]),console.log("ğŸ“Š Orchestra keys:",b[0]?Object.keys(b[0]):"No orchestras"),b[0]&&(console.log("ğŸ“Š Rehearsal schedule field:",b[0].rehearsalSchedule),console.log("ğŸ“Š Schedule field:",b[0].schedule),console.log("ğŸ“Š Rehearsals field:",b[0].rehearsals)),u(I)}catch(b){console.error("Error fetching available orchestras:",b),u([])}finally{f(!1)}})()},[n,t?.enrollments?.orchestraIds,x,v,r]);const w=g=>{const b=g?.rehearsalSchedule;if(!b||!t?.teacherAssignments)return!1;const E=2,I="14:30",y="15:15";if(b.dayOfWeek!==E)return!1;const S=b.startTime,R=b.endTime;return S<y&&R>I},j=async g=>{try{h(g);const b=[...t.enrollments?.orchestraIds||[],g];await K.students.updateStudent(r,{enrollments:{...t.enrollments,orchestraIds:b}});try{await K.orchestras.addMember(g,r),console.log(`Added student ${r} to orchestra ${g} memberIds`)}catch(I){console.error(`Failed to update orchestra ${g} memberIds:`,I)}const E=o.find(I=>I._id===g);E&&(c(I=>[...I,{...E,enrollmentStatus:"enrolled"}]),u(I=>I.filter(y=>y._id!==g))),console.log(`Successfully enrolled in orchestra ${g}`)}catch(b){console.error("Error enrolling in orchestra:",b)}finally{h(null)}},C=async g=>{try{h(g);const b=(t.enrollments?.orchestraIds||[]).filter(I=>I!==g);await K.students.updateStudent(r,{enrollments:{...t.enrollments,orchestraIds:b}});try{await K.orchestras.removeMember(g,r),console.log(`Removed student ${r} from orchestra ${g} memberIds`)}catch(I){console.error(`Failed to update orchestra ${g} memberIds:`,I)}const E=l.find(I=>I._id===g);E&&!E.error&&u(I=>[...I,E]),c(I=>I.filter(y=>y._id!==g)),console.log(`Successfully unenrolled from orchestra ${g}`)}catch(b){console.error("Error unenrolling from orchestra:",b)}finally{h(null),N(null)}};if(s)return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded animate-pulse w-48"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-24 bg-gray-200 rounded animate-pulse"})]})});const P=()=>d?e.jsx("div",{className:"space-y-4",children:[1,2].map(g=>e.jsx("div",{className:"bg-gray-200 rounded-lg h-48 animate-pulse"},g))}):l.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"w-8 h-8 text-gray-300"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"××™×Ÿ ×”×¨×©××•×ª ×§×™×™××•×ª"}),e.jsx("p",{className:"text-gray-500 mb-6",children:"×”×ª×œ××™×“ ××™× ×• ×¨×©×•× ×›×¨×’×¢ ×œ×ª×–××•×¨×•×ª"}),e.jsx("button",{onClick:()=>a("manage"),className:"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors",children:"×¦×¤×” ×‘×ª×–××•×¨×•×ª ×–××™× ×•×ª"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-purple-600"}),"×ª×–××•×¨×•×ª ×¨×©×•××•×ª (",l.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:l.map(g=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:g.name}),e.jsx("div",{className:"mt-2 space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"×× ×¦×—:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(()=>{if(console.log("ğŸ­ Debugging conductor for orchestra:",g.name),console.log("ğŸ­ Orchestra object keys:",Object.keys(g)),console.log("ğŸ­ Orchestra.conductor:",g.conductor),console.log("ğŸ­ Orchestra.conductorId:",g.conductorId),console.log("ğŸ­ Orchestra.teacherId:",g.teacherId),g.conductor){if(console.log("ğŸ­ Conductor object:",g.conductor),console.log("ğŸ­ Conductor type:",typeof g.conductor),console.log("ğŸ­ Conductor keys:",typeof g.conductor=="object"?Object.keys(g.conductor):"N/A"),console.log("ğŸ­ Conductor.personalInfo:",g.conductor.personalInfo),console.log("ğŸ­ Conductor.personalInfo keys:",g.conductor.personalInfo?Object.keys(g.conductor.personalInfo):"No personalInfo"),typeof g.conductor=="string")return console.log("ğŸ­ Using string conductor name:",g.conductor),g.conductor;if(g.conductor.fullName)return console.log("ğŸ­ Using fullName:",g.conductor.fullName),g.conductor.fullName;if(g.conductor.personalInfo?.fullName)return console.log("ğŸ­ Using personalInfo.fullName:",g.conductor.personalInfo.fullName),g.conductor.personalInfo.fullName;if(g.conductor.personalInfo?.firstName&&g.conductor.personalInfo?.lastName){const b=`${g.conductor.personalInfo.firstName} ${g.conductor.personalInfo.lastName}`;return console.log("ğŸ­ Using personalInfo firstName + lastName:",b),b}if(g.conductor.personalInfo?.name)return console.log("ğŸ­ Using personalInfo.name:",g.conductor.personalInfo.name),g.conductor.personalInfo.name;if(g.conductor.name)return console.log("ğŸ­ Using name:",g.conductor.name),g.conductor.name;if(g.conductor.personalInfo?.hebrewName)return console.log("ğŸ­ Using personalInfo.hebrewName:",g.conductor.personalInfo.hebrewName),g.conductor.personalInfo.hebrewName;if(g.conductor.displayName)return console.log("ğŸ­ Using displayName:",g.conductor.displayName),g.conductor.displayName}return console.log("ğŸ­ No conductor data found, returning default"),"×œ× ××•×’×“"})()})]})}),g.error&&e.jsx("p",{className:"text-red-600 text-sm mt-1",children:"×©×’×™××” ×‘×˜×¢×™× ×ª ×¤×¨×˜×™ ×”×ª×–××•×¨×ª"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"×¨×©×•×"]}),e.jsx("button",{onClick:()=>N(g._id),disabled:p===g._id,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"×‘×˜×œ ×”×¨×©××”",children:e.jsx(pr,{className:"w-4 h-4"})})]})]}),g.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:g.description}),e.jsxs("div",{className:"mb-4 bg-blue-50 rounded-lg p-4 border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-900 mb-3 flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-600"}),"×—×–×¨×•×ª ×©×‘×•×¢×™×•×ª"]}),e.jsx("div",{className:"bg-white p-3 rounded-lg border border-blue-100 shadow-sm",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"font-medium text-blue-900",children:g.rehearsalSchedule?.dayName||"×œ× ××•×’×“×¨"}),e.jsx("span",{className:"text-blue-600",children:"â€¢"}),e.jsx("span",{className:"font-medium text-blue-800",children:g.rehearsalSchedule?`${g.rehearsalSchedule.startTime} - ${g.rehearsalSchedule.endTime}`:"×©×¢×•×ª ×œ× ××•×’×“×¨×•×ª"})]}),e.jsxs("div",{className:"flex items-center gap-1 text-blue-700",children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:g.rehearsalSchedule?.location||g.location||"××•×œ× ×’×Ÿ"})]})]})})]}),g.capacity&&e.jsxs("div",{className:"text-sm text-gray-600",children:["×§×™×‘×•×œ×ª: ",g.currentMembers||0," / ",g.capacity," ×—×‘×¨×™×"]})]},g._id))})]}),T=()=>d?e.jsx("div",{className:"space-y-4",children:[1,2,3].map(g=>e.jsx("div",{className:"bg-gray-200 rounded-lg h-32 animate-pulse"},g))}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5 text-green-600"}),"×ª×–××•×¨×•×ª ×–××™× ×•×ª ×œ×”×¨×©××”"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["××¦×™×’ ×ª×–××•×¨×•×ª ×”×ª×•×××•×ª ×œ×›×œ×™: ",x]})]}),o.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(X,{className:"w-8 h-8 text-gray-300"})}),e.jsx("h4",{className:"text-lg font-medium text-gray-600 mb-2",children:"××™×Ÿ ×ª×–××•×¨×•×ª ×–××™× ×•×ª"}),e.jsx("p",{className:"text-gray-500",children:"×›×œ ×”×ª×–××•×¨×•×ª ×”×ª×•×××•×ª ×œ×›×œ×™ ×©×œ×š ××œ××•×ª ××• ×©×›×‘×¨ × ×¨×©××ª ××œ×™×”×Ÿ"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:o.map(g=>{const b=w(g),E=g.capacity&&g.currentMembers>=g.capacity,I=!b&&!E&&g.isCompatible;return e.jsxs("div",{className:`bg-white rounded-xl border p-6 hover:shadow-md transition-shadow ${I?"border-gray-200":"border-gray-200 opacity-75"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:g.name}),e.jsx("div",{className:"mt-2 space-y-1",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"×× ×¦×—:"}),e.jsx("span",{className:"text-sm text-gray-900",children:(()=>{if(console.log("ğŸª Debugging conductor for available orchestra:",g.name),console.log("ğŸª Available orchestra.conductor:",g.conductor),console.log("ğŸª Available orchestra.conductorId:",g.conductorId),g.conductor){if(console.log("ğŸª Available conductor object:",g.conductor),console.log("ğŸª Available conductor type:",typeof g.conductor),console.log("ğŸª Available conductor keys:",Object.keys(g.conductor)),console.log("ğŸª Available conductor.personalInfo:",g.conductor.personalInfo),console.log("ğŸª Available conductor.personalInfo keys:",g.conductor.personalInfo?Object.keys(g.conductor.personalInfo):"No personalInfo"),typeof g.conductor=="string")return console.log("ğŸª Using string conductor name:",g.conductor),g.conductor;if(g.conductor.fullName)return console.log("ğŸª Using fullName:",g.conductor.fullName),g.conductor.fullName;if(g.conductor.personalInfo?.fullName)return console.log("ğŸª Using personalInfo.fullName:",g.conductor.personalInfo.fullName),g.conductor.personalInfo.fullName;if(g.conductor.personalInfo?.firstName&&g.conductor.personalInfo?.lastName){const y=`${g.conductor.personalInfo.firstName} ${g.conductor.personalInfo.lastName}`;return console.log("ğŸª Using personalInfo firstName + lastName:",y),y}if(g.conductor.personalInfo?.name)return console.log("ğŸª Using personalInfo.name:",g.conductor.personalInfo.name),g.conductor.personalInfo.name;if(g.conductor.name)return console.log("ğŸª Using name:",g.conductor.name),g.conductor.name;if(g.conductor.personalInfo?.hebrewName)return console.log("ğŸª Using personalInfo.hebrewName:",g.conductor.personalInfo.hebrewName),g.conductor.personalInfo.hebrewName;if(g.conductor.displayName)return console.log("ğŸª Using displayName:",g.conductor.displayName),g.conductor.displayName}return console.log("ğŸª No conductor data found for available orchestra, returning default"),"×œ× ××•×’×“"})()})]})}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[g.level&&e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${g.level==="beginner"?"bg-green-100 text-green-800":g.level==="intermediate"?"bg-yellow-100 text-yellow-800":g.level==="advanced"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:g.level==="beginner"?"××ª×—×™×œ×™×":g.level==="intermediate"?"×‘×™× ×•× ×™":g.level==="advanced"?"××ª×§×“××™×":"××¢×•×¨×‘"}),g.gradeRequirements&&g.gradeRequirements.includes(v)&&e.jsxs("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:["××ª××™× ×œ×›×™×ª×” ",v]})]})]}),e.jsx("button",{onClick:()=>j(g._id),disabled:!I||p===g._id,className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 ${I?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:p===g._id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"× ×¨×©×..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-4 h-4"}),"×”×¨×©×"]})})]}),g.description&&e.jsx("p",{className:"text-gray-600 mb-4",children:g.description}),b&&e.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-800",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×”×ª× ×’×©×•×ª ×‘×œ×•×— ×–×× ×™×"})]}),e.jsx("p",{className:"text-red-700 text-sm mt-1",children:"×–×× ×™ ×”×—×–×¨×•×ª ××ª× ×’×©×™× ×¢× ×”×©×™×¢×•×¨ ×©×œ×š ×‘×™××™ ×©×œ×™×©×™ 14:30-15:15"})]}),E&&e.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800",children:[e.jsx(et,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"×”×ª×–××•×¨×ª ××œ××”"})]}),e.jsx("p",{className:"text-yellow-700 text-sm mt-1",children:"×›×œ ×”××§×•××•×ª ×‘×ª×–××•×¨×ª ×ª×¤×•×¡×™×"})]}),e.jsxs("div",{className:`mb-4 rounded-lg p-4 border ${b?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"}`,children:[e.jsxs("h5",{className:`font-semibold mb-3 flex items-center gap-2 ${b?"text-red-900":"text-blue-900"}`,children:[e.jsx(ne,{className:`w-5 h-5 ${b?"text-red-600":"text-blue-600"}`}),"×—×–×¨×•×ª ×©×‘×•×¢×™×•×ª",b&&e.jsx("span",{className:"text-xs bg-red-200 text-red-800 px-2 py-1 rounded-full",children:"×”×ª× ×’×©×•×ª!"})]}),e.jsx("div",{className:`p-3 rounded-lg border shadow-sm ${b?"bg-red-100 border-red-200":"bg-white border-blue-100"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`font-medium ${b?"text-red-900":"text-blue-900"}`,children:g.rehearsalSchedule?.dayName||"×œ× ××•×’×“×¨"}),e.jsx("span",{className:b?"text-red-600":"text-blue-600",children:"â€¢"}),e.jsx("span",{className:`font-medium ${b?"text-red-800":"text-blue-800"}`,children:g.rehearsalSchedule?`${g.rehearsalSchedule.startTime} - ${g.rehearsalSchedule.endTime}`:"×©×¢×•×ª ×œ× ××•×’×“×¨×•×ª"})]}),e.jsxs("div",{className:`flex items-center gap-1 ${b?"text-red-700":"text-blue-700"}`,children:[e.jsx(je,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:g.rehearsalSchedule?.location||g.location||"××•×œ× ×’×Ÿ"})]})]})})]}),g.requiredInstruments&&g.requiredInstruments.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h5",{className:"font-medium text-gray-700 mb-2",children:"×›×œ×™× × ×“×¨×©×™×"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:g.requiredInstruments.map((y,S)=>e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${y===x?"bg-green-100 text-green-800 ring-1 ring-green-300":"bg-gray-100 text-gray-700"}`,children:y},S))})]}),g.capacity&&e.jsxs("div",{className:"text-sm text-gray-600",children:["×§×™×‘×•×œ×ª: ",g.currentMembers||0," / ",g.capacity," ×—×‘×¨×™×"]})]},g._id)})})]});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"×ª×–××•×¨×•×ª ×•×”×¨×›×‘×™×"})}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>a("current"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="current"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),"×”×¨×©××•×ª ×§×™×™××•×ª"]})}),e.jsx("button",{onClick:()=>a("manage"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${n==="manage"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"w-4 h-4"}),"×”×¨×©××” ×—×“×©×”"]})})]})]}),n==="current"?P():T(),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"×‘×˜×œ ×”×¨×©××” ×œ×ª×–××•×¨×ª"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×‘×˜×œ ××ª ×”×”×¨×©××” ×œ×ª×–××•×¨×ª ×–×•? ×¤×¢×•×œ×” ×–×• ×œ× × ×™×ª× ×ª ×œ×‘×™×˜×•×œ."}),e.jsxs("div",{className:"flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>N(null),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"×‘×™×˜×•×œ"}),e.jsx("button",{onClick:()=>C(m),disabled:p===m,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 transition-colors flex items-center gap-2",children:p===m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"××‘×˜×œ..."]}):"×‘×˜×œ ×”×¨×©××”"})]})]})})]})};function Lr(t,r){if(typeof t=="function")return t(r);t!=null&&(t.current=r)}function ue(...t){return r=>{let s=!1;const n=t.map(a=>{const l=Lr(a,r);return!s&&typeof l=="function"&&(s=!0),l});if(s)return()=>{for(let a=0;a<n.length;a++){const l=n[a];typeof l=="function"?l():Lr(t[a],null)}}}}function G(...t){return i.useCallback(ue(...t),t)}var Ea=Symbol.for("react.lazy"),gt=dr[" use ".trim().toString()];function Pa(t){return typeof t=="object"&&t!==null&&"then"in t}function ps(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===Ea&&"_payload"in t&&Pa(t._payload)}function hs(t){const r=Ia(t),s=i.forwardRef((n,a)=>{let{children:l,...c}=n;ps(l)&&typeof gt=="function"&&(l=gt(l._payload));const o=i.Children.toArray(l),u=o.find(Aa);if(u){const d=u.props.children,f=o.map(p=>p===u?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(d)?i.cloneElement(d,void 0,f):null})}return e.jsx(r,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}var Ta=hs("Slot");function Ia(t){const r=i.forwardRef((s,n)=>{let{children:a,...l}=s;if(ps(a)&&typeof gt=="function"&&(a=gt(a._payload)),i.isValidElement(a)){const c=ka(a),o=Oa(l,a.props);return a.type!==i.Fragment&&(o.ref=n?ue(n,c):c),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Ra=Symbol("radix.slottable");function Aa(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ra}function Oa(t,r){const s={...r};for(const n in r){const a=t[n],l=r[n];/^on[A-Z]/.test(n)?a&&l?s[n]=(...o)=>{const u=l(...o);return a(...o),u}:a&&(s[n]=a):n==="style"?s[n]={...a,...l}:n==="className"&&(s[n]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function ka(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}const _r=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Mr=ha,Pt=(t,r)=>s=>{var n;if(r?.variants==null)return Mr(t,s?.class,s?.className);const{variants:a,defaultVariants:l}=r,c=Object.keys(a).map(d=>{const f=s?.[d],p=l?.[d];if(f===null)return null;const h=_r(f)||_r(p);return a[d][h]}),o=s&&Object.entries(s).reduce((d,f)=>{let[p,h]=f;return h===void 0||(d[p]=h),d},{}),u=r==null||(n=r.compoundVariants)===null||n===void 0?void 0:n.reduce((d,f)=>{let{class:p,className:h,...m}=f;return Object.entries(m).every(N=>{let[x,v]=N;return Array.isArray(v)?v.includes({...l,...o}[x]):{...l,...o}[x]===v})?[...d,p,h]:d},[]);return Mr(t,c,u,s?.class,s?.className)},Da=Pt("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),hr=i.forwardRef(({className:t,variant:r,size:s,asChild:n=!1,...a},l)=>{const c=n?Ta:"button";return e.jsx(c,{className:Y(Da({variant:r,size:s,className:t})),ref:l,...a})});hr.displayName="Button";const V=i.forwardRef(({className:t,type:r,...s},n)=>e.jsx("input",{type:r,className:Y("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));V.displayName="Input";var $a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],La=$a.reduce((t,r)=>{const s=hs(`Primitive.${r}`),n=i.forwardRef((a,l)=>{const{asChild:c,...o}=a,u=c?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...o,ref:l})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),_a="Label",gs=i.forwardRef((t,r)=>e.jsx(La.label,{...t,ref:r,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(t.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));gs.displayName=_a;var bs=gs;const Ma=Pt("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),z=i.forwardRef(({className:t,...r},s)=>e.jsx(bs,{ref:s,className:Y(Ma(),t),...r}));z.displayName=bs.displayName;function Fr(t,[r,s]){return Math.min(s,Math.max(r,t))}function U(t,r,{checkForDefaultPrevented:s=!0}={}){return function(a){if(t?.(a),s===!1||!a.defaultPrevented)return r?.(a)}}function gr(t,r=[]){let s=[];function n(l,c){const o=i.createContext(c),u=s.length;s=[...s,c];const d=p=>{const{scope:h,children:m,...N}=p,x=h?.[t]?.[u]||o,v=i.useMemo(()=>N,Object.values(N));return e.jsx(x.Provider,{value:v,children:m})};d.displayName=l+"Provider";function f(p,h){const m=h?.[t]?.[u]||o,N=i.useContext(m);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${p}\` must be used within \`${l}\``)}return[d,f]}const a=()=>{const l=s.map(c=>i.createContext(c));return function(o){const u=o?.[t]||l;return i.useMemo(()=>({[`__scope${t}`]:{...o,[t]:u}}),[o,u])}};return a.scopeName=t,[n,Fa(a,...r)]}function Fa(...t){const r=t[0];if(t.length===1)return r;const s=()=>{const n=t.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(l){const c=n.reduce((o,{useScope:u,scopeName:d})=>{const p=u(l)[`__scope${d}`];return{...o,...p}},{});return i.useMemo(()=>({[`__scope${r.scopeName}`]:c}),[c])}};return s.scopeName=r.scopeName,s}function Wr(t){const r=Wa(t),s=i.forwardRef((n,a)=>{const{children:l,...c}=n,o=i.Children.toArray(l),u=o.find(Va);if(u){const d=u.props.children,f=o.map(p=>p===u?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(d)?i.cloneElement(d,void 0,f):null})}return e.jsx(r,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}function Wa(t){const r=i.forwardRef((s,n)=>{const{children:a,...l}=s;if(i.isValidElement(a)){const c=Ua(a),o=Ha(l,a.props);return a.type!==i.Fragment&&(o.ref=n?ue(n,c):c),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Ba=Symbol("radix.slottable");function Va(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Ba}function Ha(t,r){const s={...r};for(const n in r){const a=t[n],l=r[n];/^on[A-Z]/.test(n)?a&&l?s[n]=(...o)=>{const u=l(...o);return a(...o),u}:a&&(s[n]=a):n==="style"?s[n]={...a,...l}:n==="className"&&(s[n]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function Ua(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}function za(t){const r=t+"CollectionProvider",[s,n]=gr(r),[a,l]=s(r,{collectionRef:{current:null},itemMap:new Map}),c=x=>{const{scope:v,children:w}=x,j=ye.useRef(null),C=ye.useRef(new Map).current;return e.jsx(a,{scope:v,itemMap:C,collectionRef:j,children:w})};c.displayName=r;const o=t+"CollectionSlot",u=Wr(o),d=ye.forwardRef((x,v)=>{const{scope:w,children:j}=x,C=l(o,w),P=G(v,C.collectionRef);return e.jsx(u,{ref:P,children:j})});d.displayName=o;const f=t+"CollectionItemSlot",p="data-radix-collection-item",h=Wr(f),m=ye.forwardRef((x,v)=>{const{scope:w,children:j,...C}=x,P=ye.useRef(null),T=G(v,P),g=l(f,w);return ye.useEffect(()=>(g.itemMap.set(P,{ref:P,...C}),()=>void g.itemMap.delete(P))),e.jsx(h,{[p]:"",ref:T,children:j})});m.displayName=f;function N(x){const v=l(t+"CollectionConsumer",x);return ye.useCallback(()=>{const j=v.collectionRef.current;if(!j)return[];const C=Array.from(j.querySelectorAll(`[${p}]`));return Array.from(v.itemMap.values()).sort((g,b)=>C.indexOf(g.ref.current)-C.indexOf(b.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:c,Slot:d,ItemSlot:m},N,n]}var Ga=i.createContext(void 0);function Ka(t){const r=i.useContext(Ga);return t||r||"ltr"}function Ya(t){const r=qa(t),s=i.forwardRef((n,a)=>{const{children:l,...c}=n,o=i.Children.toArray(l),u=o.find(Za);if(u){const d=u.props.children,f=o.map(p=>p===u?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(d)?i.cloneElement(d,void 0,f):null})}return e.jsx(r,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}function qa(t){const r=i.forwardRef((s,n)=>{const{children:a,...l}=s;if(i.isValidElement(a)){const c=Ja(a),o=Qa(l,a.props);return a.type!==i.Fragment&&(o.ref=n?ue(n,c):c),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Xa=Symbol("radix.slottable");function Za(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Xa}function Qa(t,r){const s={...r};for(const n in r){const a=t[n],l=r[n];/^on[A-Z]/.test(n)?a&&l?s[n]=(...o)=>{const u=l(...o);return a(...o),u}:a&&(s[n]=a):n==="style"?s[n]={...a,...l}:n==="className"&&(s[n]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function Ja(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var el=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vs=el.reduce((t,r)=>{const s=Ya(`Primitive.${r}`),n=i.forwardRef((a,l)=>{const{asChild:c,...o}=a,u=c?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...o,ref:l})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{});function tl(t,r){t&&Ct.flushSync(()=>t.dispatchEvent(r))}function ke(t){const r=i.useRef(t);return i.useEffect(()=>{r.current=t}),i.useMemo(()=>(...s)=>r.current?.(...s),[])}function rl(t,r=globalThis?.document){const s=ke(t);i.useEffect(()=>{const n=a=>{a.key==="Escape"&&s(a)};return r.addEventListener("keydown",n,{capture:!0}),()=>r.removeEventListener("keydown",n,{capture:!0})},[s,r])}var sl="DismissableLayer",Zt="dismissableLayer.update",nl="dismissableLayer.pointerDownOutside",al="dismissableLayer.focusOutside",Br,ys=i.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ns=i.forwardRef((t,r)=>{const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:c,onDismiss:o,...u}=t,d=i.useContext(ys),[f,p]=i.useState(null),h=f?.ownerDocument??globalThis?.document,[,m]=i.useState({}),N=G(r,b=>p(b)),x=Array.from(d.layers),[v]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=x.indexOf(v),j=f?x.indexOf(f):-1,C=d.layersWithOutsidePointerEventsDisabled.size>0,P=j>=w,T=il(b=>{const E=b.target,I=[...d.branches].some(y=>y.contains(E));!P||I||(a?.(b),c?.(b),b.defaultPrevented||o?.())},h),g=cl(b=>{const E=b.target;[...d.branches].some(y=>y.contains(E))||(l?.(b),c?.(b),b.defaultPrevented||o?.())},h);return rl(b=>{j===d.layers.size-1&&(n?.(b),!b.defaultPrevented&&o&&(b.preventDefault(),o()))},h),i.useEffect(()=>{if(f)return s&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Br=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Vr(),()=>{s&&d.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Br)}},[f,h,s,d]),i.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Vr())},[f,d]),i.useEffect(()=>{const b=()=>m({});return document.addEventListener(Zt,b),()=>document.removeEventListener(Zt,b)},[]),e.jsx(vs.div,{...u,ref:N,style:{pointerEvents:C?P?"auto":"none":void 0,...t.style},onFocusCapture:U(t.onFocusCapture,g.onFocusCapture),onBlurCapture:U(t.onBlurCapture,g.onBlurCapture),onPointerDownCapture:U(t.onPointerDownCapture,T.onPointerDownCapture)})});Ns.displayName=sl;var ll="DismissableLayerBranch",ol=i.forwardRef((t,r)=>{const s=i.useContext(ys),n=i.useRef(null),a=G(r,n);return i.useEffect(()=>{const l=n.current;if(l)return s.branches.add(l),()=>{s.branches.delete(l)}},[s.branches]),e.jsx(vs.div,{...t,ref:a})});ol.displayName=ll;function il(t,r=globalThis?.document){const s=ke(t),n=i.useRef(!1),a=i.useRef(()=>{});return i.useEffect(()=>{const l=o=>{if(o.target&&!n.current){let u=function(){js(nl,s,d,{discrete:!0})};const d={originalEvent:o};o.pointerType==="touch"?(r.removeEventListener("click",a.current),a.current=u,r.addEventListener("click",a.current,{once:!0})):u()}else r.removeEventListener("click",a.current);n.current=!1},c=window.setTimeout(()=>{r.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),r.removeEventListener("pointerdown",l),r.removeEventListener("click",a.current)}},[r,s]),{onPointerDownCapture:()=>n.current=!0}}function cl(t,r=globalThis?.document){const s=ke(t),n=i.useRef(!1);return i.useEffect(()=>{const a=l=>{l.target&&!n.current&&js(al,s,{originalEvent:l},{discrete:!1})};return r.addEventListener("focusin",a),()=>r.removeEventListener("focusin",a)},[r,s]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Vr(){const t=new CustomEvent(Zt);document.dispatchEvent(t)}function js(t,r,s,{discrete:n}){const a=s.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:s});r&&a.addEventListener(t,r,{once:!0}),n?tl(a,l):a.dispatchEvent(l)}var Ft=0;function dl(){i.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Hr()),document.body.insertAdjacentElement("beforeend",t[1]??Hr()),Ft++,()=>{Ft===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Ft--}},[])}function Hr(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}function ul(t){const r=ml(t),s=i.forwardRef((n,a)=>{const{children:l,...c}=n,o=i.Children.toArray(l),u=o.find(xl);if(u){const d=u.props.children,f=o.map(p=>p===u?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(d)?i.cloneElement(d,void 0,f):null})}return e.jsx(r,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}function ml(t){const r=i.forwardRef((s,n)=>{const{children:a,...l}=s;if(i.isValidElement(a)){const c=hl(a),o=pl(l,a.props);return a.type!==i.Fragment&&(o.ref=n?ue(n,c):c),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var fl=Symbol("radix.slottable");function xl(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===fl}function pl(t,r){const s={...r};for(const n in r){const a=t[n],l=r[n];/^on[A-Z]/.test(n)?a&&l?s[n]=(...o)=>{const u=l(...o);return a(...o),u}:a&&(s[n]=a):n==="style"?s[n]={...a,...l}:n==="className"&&(s[n]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function hl(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var gl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],bl=gl.reduce((t,r)=>{const s=ul(`Primitive.${r}`),n=i.forwardRef((a,l)=>{const{asChild:c,...o}=a,u=c?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...o,ref:l})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),Wt="focusScope.autoFocusOnMount",Bt="focusScope.autoFocusOnUnmount",Ur={bubbles:!1,cancelable:!0},vl="FocusScope",ws=i.forwardRef((t,r)=>{const{loop:s=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:l,...c}=t,[o,u]=i.useState(null),d=ke(a),f=ke(l),p=i.useRef(null),h=G(r,x=>u(x)),m=i.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;i.useEffect(()=>{if(n){let x=function(C){if(m.paused||!o)return;const P=C.target;o.contains(P)?p.current=P:Ne(p.current,{select:!0})},v=function(C){if(m.paused||!o)return;const P=C.relatedTarget;P!==null&&(o.contains(P)||Ne(p.current,{select:!0}))},w=function(C){if(document.activeElement===document.body)for(const T of C)T.removedNodes.length>0&&Ne(o)};document.addEventListener("focusin",x),document.addEventListener("focusout",v);const j=new MutationObserver(w);return o&&j.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",x),document.removeEventListener("focusout",v),j.disconnect()}}},[n,o,m.paused]),i.useEffect(()=>{if(o){Gr.add(m);const x=document.activeElement;if(!o.contains(x)){const w=new CustomEvent(Wt,Ur);o.addEventListener(Wt,d),o.dispatchEvent(w),w.defaultPrevented||(yl(Cl(Ss(o)),{select:!0}),document.activeElement===x&&Ne(o))}return()=>{o.removeEventListener(Wt,d),setTimeout(()=>{const w=new CustomEvent(Bt,Ur);o.addEventListener(Bt,f),o.dispatchEvent(w),w.defaultPrevented||Ne(x??document.body,{select:!0}),o.removeEventListener(Bt,f),Gr.remove(m)},0)}}},[o,d,f,m]);const N=i.useCallback(x=>{if(!s&&!n||m.paused)return;const v=x.key==="Tab"&&!x.altKey&&!x.ctrlKey&&!x.metaKey,w=document.activeElement;if(v&&w){const j=x.currentTarget,[C,P]=Nl(j);C&&P?!x.shiftKey&&w===P?(x.preventDefault(),s&&Ne(C,{select:!0})):x.shiftKey&&w===C&&(x.preventDefault(),s&&Ne(P,{select:!0})):w===j&&x.preventDefault()}},[s,n,m.paused]);return e.jsx(bl.div,{tabIndex:-1,...c,ref:h,onKeyDown:N})});ws.displayName=vl;function yl(t,{select:r=!1}={}){const s=document.activeElement;for(const n of t)if(Ne(n,{select:r}),document.activeElement!==s)return}function Nl(t){const r=Ss(t),s=zr(r,t),n=zr(r.reverse(),t);return[s,n]}function Ss(t){const r=[],s=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;s.nextNode();)r.push(s.currentNode);return r}function zr(t,r){for(const s of t)if(!jl(s,{upTo:r}))return s}function jl(t,{upTo:r}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(r!==void 0&&t===r)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function wl(t){return t instanceof HTMLInputElement&&"select"in t}function Ne(t,{select:r=!1}={}){if(t&&t.focus){const s=document.activeElement;t.focus({preventScroll:!0}),t!==s&&wl(t)&&r&&t.select()}}var Gr=Sl();function Sl(){let t=[];return{add(r){const s=t[0];r!==s&&s?.pause(),t=Kr(t,r),t.unshift(r)},remove(r){t=Kr(t,r),t[0]?.resume()}}}function Kr(t,r){const s=[...t],n=s.indexOf(r);return n!==-1&&s.splice(n,1),s}function Cl(t){return t.filter(r=>r.tagName!=="A")}var J=globalThis?.document?i.useLayoutEffect:()=>{},El=dr[" useId ".trim().toString()]||(()=>{}),Pl=0;function br(t){const[r,s]=i.useState(El());return J(()=>{t||s(n=>n??String(Pl++))},[t]),t||(r?`radix-${r}`:"")}const Tl=["top","right","bottom","left"],st=Math.min,Re=Math.max,Il={left:"right",right:"left",bottom:"top",top:"bottom"},Rl={start:"end",end:"start"};function Qt(t,r,s){return Re(t,st(r,s))}function pe(t,r){return typeof t=="function"?t(r):t}function he(t){return t.split("-")[0]}function Ge(t){return t.split("-")[1]}function vr(t){return t==="x"?"y":"x"}function yr(t){return t==="y"?"height":"width"}const Al=new Set(["top","bottom"]);function ie(t){return Al.has(he(t))?"y":"x"}function Nr(t){return vr(ie(t))}function Ol(t,r,s){s===void 0&&(s=!1);const n=Ge(t),a=Nr(t),l=yr(a);let c=a==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return r.reference[l]>r.floating[l]&&(c=bt(c)),[c,bt(c)]}function kl(t){const r=bt(t);return[Jt(t),r,Jt(r)]}function Jt(t){return t.replace(/start|end/g,r=>Rl[r])}const Yr=["left","right"],qr=["right","left"],Dl=["top","bottom"],$l=["bottom","top"];function Ll(t,r,s){switch(t){case"top":case"bottom":return s?r?qr:Yr:r?Yr:qr;case"left":case"right":return r?Dl:$l;default:return[]}}function _l(t,r,s,n){const a=Ge(t);let l=Ll(he(t),s==="start",n);return a&&(l=l.map(c=>c+"-"+a),r&&(l=l.concat(l.map(Jt)))),l}function bt(t){return t.replace(/left|right|bottom|top/g,r=>Il[r])}function Ml(t){return{top:0,right:0,bottom:0,left:0,...t}}function Cs(t){return typeof t!="number"?Ml(t):{top:t,right:t,bottom:t,left:t}}function vt(t){const{x:r,y:s,width:n,height:a}=t;return{width:n,height:a,top:s,left:r,right:r+n,bottom:s+a,x:r,y:s}}function Xr(t,r,s){let{reference:n,floating:a}=t;const l=ie(r),c=Nr(r),o=yr(c),u=he(r),d=l==="y",f=n.x+n.width/2-a.width/2,p=n.y+n.height/2-a.height/2,h=n[o]/2-a[o]/2;let m;switch(u){case"top":m={x:f,y:n.y-a.height};break;case"bottom":m={x:f,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:p};break;case"left":m={x:n.x-a.width,y:p};break;default:m={x:n.x,y:n.y}}switch(Ge(r)){case"start":m[c]-=h*(s&&d?-1:1);break;case"end":m[c]+=h*(s&&d?-1:1);break}return m}async function Fl(t,r){var s;r===void 0&&(r={});const{x:n,y:a,platform:l,rects:c,elements:o,strategy:u}=t,{boundary:d="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:h=!1,padding:m=0}=pe(r,t),N=Cs(m),v=o[h?p==="floating"?"reference":"floating":p],w=vt(await l.getClippingRect({element:(s=await(l.isElement==null?void 0:l.isElement(v)))==null||s?v:v.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(o.floating)),boundary:d,rootBoundary:f,strategy:u})),j=p==="floating"?{x:n,y:a,width:c.floating.width,height:c.floating.height}:c.reference,C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(o.floating)),P=await(l.isElement==null?void 0:l.isElement(C))?await(l.getScale==null?void 0:l.getScale(C))||{x:1,y:1}:{x:1,y:1},T=vt(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:j,offsetParent:C,strategy:u}):j);return{top:(w.top-T.top+N.top)/P.y,bottom:(T.bottom-w.bottom+N.bottom)/P.y,left:(w.left-T.left+N.left)/P.x,right:(T.right-w.right+N.right)/P.x}}const Wl=async(t,r,s)=>{const{placement:n="bottom",strategy:a="absolute",middleware:l=[],platform:c}=s,o=l.filter(Boolean),u=await(c.isRTL==null?void 0:c.isRTL(r));let d=await c.getElementRects({reference:t,floating:r,strategy:a}),{x:f,y:p}=Xr(d,n,u),h=n,m={},N=0;for(let v=0;v<o.length;v++){var x;const{name:w,fn:j}=o[v],{x:C,y:P,data:T,reset:g}=await j({x:f,y:p,initialPlacement:n,placement:h,strategy:a,middlewareData:m,rects:d,platform:{...c,detectOverflow:(x=c.detectOverflow)!=null?x:Fl},elements:{reference:t,floating:r}});f=C??f,p=P??p,m={...m,[w]:{...m[w],...T}},g&&N<=50&&(N++,typeof g=="object"&&(g.placement&&(h=g.placement),g.rects&&(d=g.rects===!0?await c.getElementRects({reference:t,floating:r,strategy:a}):g.rects),{x:f,y:p}=Xr(d,h,u)),v=-1)}return{x:f,y:p,placement:h,strategy:a,middlewareData:m}},Bl=t=>({name:"arrow",options:t,async fn(r){const{x:s,y:n,placement:a,rects:l,platform:c,elements:o,middlewareData:u}=r,{element:d,padding:f=0}=pe(t,r)||{};if(d==null)return{};const p=Cs(f),h={x:s,y:n},m=Nr(a),N=yr(m),x=await c.getDimensions(d),v=m==="y",w=v?"top":"left",j=v?"bottom":"right",C=v?"clientHeight":"clientWidth",P=l.reference[N]+l.reference[m]-h[m]-l.floating[N],T=h[m]-l.reference[m],g=await(c.getOffsetParent==null?void 0:c.getOffsetParent(d));let b=g?g[C]:0;(!b||!await(c.isElement==null?void 0:c.isElement(g)))&&(b=o.floating[C]||l.floating[N]);const E=P/2-T/2,I=b/2-x[N]/2-1,y=st(p[w],I),S=st(p[j],I),R=y,A=b-x[N]-S,O=b/2-x[N]/2+E,L=Qt(R,O,A),k=!u.arrow&&Ge(a)!=null&&O!==L&&l.reference[N]/2-(O<R?y:S)-x[N]/2<0,_=k?O<R?O-R:O-A:0;return{[m]:h[m]+_,data:{[m]:L,centerOffset:O-L-_,...k&&{alignmentOffset:_}},reset:k}}}),Vl=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(r){var s,n;const{placement:a,middlewareData:l,rects:c,initialPlacement:o,platform:u,elements:d}=r,{mainAxis:f=!0,crossAxis:p=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:x=!0,...v}=pe(t,r);if((s=l.arrow)!=null&&s.alignmentOffset)return{};const w=he(a),j=ie(o),C=he(o)===o,P=await(u.isRTL==null?void 0:u.isRTL(d.floating)),T=h||(C||!x?[bt(o)]:kl(o)),g=N!=="none";!h&&g&&T.push(..._l(o,x,N,P));const b=[o,...T],E=await u.detectOverflow(r,v),I=[];let y=((n=l.flip)==null?void 0:n.overflows)||[];if(f&&I.push(E[w]),p){const O=Ol(a,c,P);I.push(E[O[0]],E[O[1]])}if(y=[...y,{placement:a,overflows:I}],!I.every(O=>O<=0)){var S,R;const O=(((S=l.flip)==null?void 0:S.index)||0)+1,L=b[O];if(L&&(!(p==="alignment"?j!==ie(L):!1)||y.every($=>ie($.placement)===j?$.overflows[0]>0:!0)))return{data:{index:O,overflows:y},reset:{placement:L}};let k=(R=y.filter(_=>_.overflows[0]<=0).sort((_,$)=>_.overflows[1]-$.overflows[1])[0])==null?void 0:R.placement;if(!k)switch(m){case"bestFit":{var A;const _=(A=y.filter($=>{if(g){const M=ie($.placement);return M===j||M==="y"}return!0}).map($=>[$.placement,$.overflows.filter(M=>M>0).reduce((M,Z)=>M+Z,0)]).sort(($,M)=>$[1]-M[1])[0])==null?void 0:A[0];_&&(k=_);break}case"initialPlacement":k=o;break}if(a!==k)return{reset:{placement:k}}}return{}}}};function Zr(t,r){return{top:t.top-r.height,right:t.right-r.width,bottom:t.bottom-r.height,left:t.left-r.width}}function Qr(t){return Tl.some(r=>t[r]>=0)}const Hl=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(r){const{rects:s,platform:n}=r,{strategy:a="referenceHidden",...l}=pe(t,r);switch(a){case"referenceHidden":{const c=await n.detectOverflow(r,{...l,elementContext:"reference"}),o=Zr(c,s.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:Qr(o)}}}case"escaped":{const c=await n.detectOverflow(r,{...l,altBoundary:!0}),o=Zr(c,s.floating);return{data:{escapedOffsets:o,escaped:Qr(o)}}}default:return{}}}}},Es=new Set(["left","top"]);async function Ul(t,r){const{placement:s,platform:n,elements:a}=t,l=await(n.isRTL==null?void 0:n.isRTL(a.floating)),c=he(s),o=Ge(s),u=ie(s)==="y",d=Es.has(c)?-1:1,f=l&&u?-1:1,p=pe(r,t);let{mainAxis:h,crossAxis:m,alignmentAxis:N}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return o&&typeof N=="number"&&(m=o==="end"?N*-1:N),u?{x:m*f,y:h*d}:{x:h*d,y:m*f}}const zl=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(r){var s,n;const{x:a,y:l,placement:c,middlewareData:o}=r,u=await Ul(r,t);return c===((s=o.offset)==null?void 0:s.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:a+u.x,y:l+u.y,data:{...u,placement:c}}}}},Gl=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(r){const{x:s,y:n,placement:a,platform:l}=r,{mainAxis:c=!0,crossAxis:o=!1,limiter:u={fn:w=>{let{x:j,y:C}=w;return{x:j,y:C}}},...d}=pe(t,r),f={x:s,y:n},p=await l.detectOverflow(r,d),h=ie(he(a)),m=vr(h);let N=f[m],x=f[h];if(c){const w=m==="y"?"top":"left",j=m==="y"?"bottom":"right",C=N+p[w],P=N-p[j];N=Qt(C,N,P)}if(o){const w=h==="y"?"top":"left",j=h==="y"?"bottom":"right",C=x+p[w],P=x-p[j];x=Qt(C,x,P)}const v=u.fn({...r,[m]:N,[h]:x});return{...v,data:{x:v.x-s,y:v.y-n,enabled:{[m]:c,[h]:o}}}}}},Kl=function(t){return t===void 0&&(t={}),{options:t,fn(r){const{x:s,y:n,placement:a,rects:l,middlewareData:c}=r,{offset:o=0,mainAxis:u=!0,crossAxis:d=!0}=pe(t,r),f={x:s,y:n},p=ie(a),h=vr(p);let m=f[h],N=f[p];const x=pe(o,r),v=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(u){const C=h==="y"?"height":"width",P=l.reference[h]-l.floating[C]+v.mainAxis,T=l.reference[h]+l.reference[C]-v.mainAxis;m<P?m=P:m>T&&(m=T)}if(d){var w,j;const C=h==="y"?"width":"height",P=Es.has(he(a)),T=l.reference[p]-l.floating[C]+(P&&((w=c.offset)==null?void 0:w[p])||0)+(P?0:v.crossAxis),g=l.reference[p]+l.reference[C]+(P?0:((j=c.offset)==null?void 0:j[p])||0)-(P?v.crossAxis:0);N<T?N=T:N>g&&(N=g)}return{[h]:m,[p]:N}}}},Yl=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(r){var s,n;const{placement:a,rects:l,platform:c,elements:o}=r,{apply:u=()=>{},...d}=pe(t,r),f=await c.detectOverflow(r,d),p=he(a),h=Ge(a),m=ie(a)==="y",{width:N,height:x}=l.floating;let v,w;p==="top"||p==="bottom"?(v=p,w=h===(await(c.isRTL==null?void 0:c.isRTL(o.floating))?"start":"end")?"left":"right"):(w=p,v=h==="end"?"top":"bottom");const j=x-f.top-f.bottom,C=N-f.left-f.right,P=st(x-f[v],j),T=st(N-f[w],C),g=!r.middlewareData.shift;let b=P,E=T;if((s=r.middlewareData.shift)!=null&&s.enabled.x&&(E=C),(n=r.middlewareData.shift)!=null&&n.enabled.y&&(b=j),g&&!h){const y=Re(f.left,0),S=Re(f.right,0),R=Re(f.top,0),A=Re(f.bottom,0);m?E=N-2*(y!==0||S!==0?y+S:Re(f.left,f.right)):b=x-2*(R!==0||A!==0?R+A:Re(f.top,f.bottom))}await u({...r,availableWidth:E,availableHeight:b});const I=await c.getDimensions(o.floating);return N!==I.width||x!==I.height?{reset:{rects:!0}}:{}}}},er=Math.min,Be=Math.max,yt=Math.round,lt=Math.floor,ce=t=>({x:t,y:t});function Tt(){return typeof window<"u"}function Ke(t){return Ps(t)?(t.nodeName||"").toLowerCase():"#document"}function ee(t){var r;return(t==null||(r=t.ownerDocument)==null?void 0:r.defaultView)||window}function me(t){var r;return(r=(Ps(t)?t.ownerDocument:t.document)||window.document)==null?void 0:r.documentElement}function Ps(t){return Tt()?t instanceof Node||t instanceof ee(t).Node:!1}function ae(t){return Tt()?t instanceof Element||t instanceof ee(t).Element:!1}function de(t){return Tt()?t instanceof HTMLElement||t instanceof ee(t).HTMLElement:!1}function Jr(t){return!Tt()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ee(t).ShadowRoot}const ql=new Set(["inline","contents"]);function at(t){const{overflow:r,overflowX:s,overflowY:n,display:a}=le(t);return/auto|scroll|overlay|hidden|clip/.test(r+n+s)&&!ql.has(a)}const Xl=new Set(["table","td","th"]);function Zl(t){return Xl.has(Ke(t))}const Ql=[":popover-open",":modal"];function It(t){return Ql.some(r=>{try{return t.matches(r)}catch{return!1}})}const Jl=["transform","translate","scale","rotate","perspective"],eo=["transform","translate","scale","rotate","perspective","filter"],to=["paint","layout","strict","content"];function jr(t){const r=wr(),s=ae(t)?le(t):t;return Jl.some(n=>s[n]?s[n]!=="none":!1)||(s.containerType?s.containerType!=="normal":!1)||!r&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!r&&(s.filter?s.filter!=="none":!1)||eo.some(n=>(s.willChange||"").includes(n))||to.some(n=>(s.contain||"").includes(n))}function ro(t){let r=Se(t);for(;de(r)&&!ze(r);){if(jr(r))return r;if(It(r))return null;r=Se(r)}return null}function wr(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const so=new Set(["html","body","#document"]);function ze(t){return so.has(Ke(t))}function le(t){return ee(t).getComputedStyle(t)}function Rt(t){return ae(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Se(t){if(Ke(t)==="html")return t;const r=t.assignedSlot||t.parentNode||Jr(t)&&t.host||me(t);return Jr(r)?r.host:r}function Ts(t){const r=Se(t);return ze(r)?t.ownerDocument?t.ownerDocument.body:t.body:de(r)&&at(r)?r:Ts(r)}function nt(t,r,s){var n;r===void 0&&(r=[]),s===void 0&&(s=!0);const a=Ts(t),l=a===((n=t.ownerDocument)==null?void 0:n.body),c=ee(a);if(l){const o=tr(c);return r.concat(c,c.visualViewport||[],at(a)?a:[],o&&s?nt(o):[])}return r.concat(a,nt(a,[],s))}function tr(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Is(t){const r=le(t);let s=parseFloat(r.width)||0,n=parseFloat(r.height)||0;const a=de(t),l=a?t.offsetWidth:s,c=a?t.offsetHeight:n,o=yt(s)!==l||yt(n)!==c;return o&&(s=l,n=c),{width:s,height:n,$:o}}function Sr(t){return ae(t)?t:t.contextElement}function Ve(t){const r=Sr(t);if(!de(r))return ce(1);const s=r.getBoundingClientRect(),{width:n,height:a,$:l}=Is(r);let c=(l?yt(s.width):s.width)/n,o=(l?yt(s.height):s.height)/a;return(!c||!Number.isFinite(c))&&(c=1),(!o||!Number.isFinite(o))&&(o=1),{x:c,y:o}}const no=ce(0);function Rs(t){const r=ee(t);return!wr()||!r.visualViewport?no:{x:r.visualViewport.offsetLeft,y:r.visualViewport.offsetTop}}function ao(t,r,s){return r===void 0&&(r=!1),!s||r&&s!==ee(t)?!1:r}function De(t,r,s,n){r===void 0&&(r=!1),s===void 0&&(s=!1);const a=t.getBoundingClientRect(),l=Sr(t);let c=ce(1);r&&(n?ae(n)&&(c=Ve(n)):c=Ve(t));const o=ao(l,s,n)?Rs(l):ce(0);let u=(a.left+o.x)/c.x,d=(a.top+o.y)/c.y,f=a.width/c.x,p=a.height/c.y;if(l){const h=ee(l),m=n&&ae(n)?ee(n):n;let N=h,x=tr(N);for(;x&&n&&m!==N;){const v=Ve(x),w=x.getBoundingClientRect(),j=le(x),C=w.left+(x.clientLeft+parseFloat(j.paddingLeft))*v.x,P=w.top+(x.clientTop+parseFloat(j.paddingTop))*v.y;u*=v.x,d*=v.y,f*=v.x,p*=v.y,u+=C,d+=P,N=ee(x),x=tr(N)}}return vt({width:f,height:p,x:u,y:d})}function At(t,r){const s=Rt(t).scrollLeft;return r?r.left+s:De(me(t)).left+s}function As(t,r){const s=t.getBoundingClientRect(),n=s.left+r.scrollLeft-At(t,s),a=s.top+r.scrollTop;return{x:n,y:a}}function lo(t){let{elements:r,rect:s,offsetParent:n,strategy:a}=t;const l=a==="fixed",c=me(n),o=r?It(r.floating):!1;if(n===c||o&&l)return s;let u={scrollLeft:0,scrollTop:0},d=ce(1);const f=ce(0),p=de(n);if((p||!p&&!l)&&((Ke(n)!=="body"||at(c))&&(u=Rt(n)),de(n))){const m=De(n);d=Ve(n),f.x=m.x+n.clientLeft,f.y=m.y+n.clientTop}const h=c&&!p&&!l?As(c,u):ce(0);return{width:s.width*d.x,height:s.height*d.y,x:s.x*d.x-u.scrollLeft*d.x+f.x+h.x,y:s.y*d.y-u.scrollTop*d.y+f.y+h.y}}function oo(t){return Array.from(t.getClientRects())}function io(t){const r=me(t),s=Rt(t),n=t.ownerDocument.body,a=Be(r.scrollWidth,r.clientWidth,n.scrollWidth,n.clientWidth),l=Be(r.scrollHeight,r.clientHeight,n.scrollHeight,n.clientHeight);let c=-s.scrollLeft+At(t);const o=-s.scrollTop;return le(n).direction==="rtl"&&(c+=Be(r.clientWidth,n.clientWidth)-a),{width:a,height:l,x:c,y:o}}const es=25;function co(t,r){const s=ee(t),n=me(t),a=s.visualViewport;let l=n.clientWidth,c=n.clientHeight,o=0,u=0;if(a){l=a.width,c=a.height;const f=wr();(!f||f&&r==="fixed")&&(o=a.offsetLeft,u=a.offsetTop)}const d=At(n);if(d<=0){const f=n.ownerDocument,p=f.body,h=getComputedStyle(p),m=f.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,N=Math.abs(n.clientWidth-p.clientWidth-m);N<=es&&(l-=N)}else d<=es&&(l+=d);return{width:l,height:c,x:o,y:u}}const uo=new Set(["absolute","fixed"]);function mo(t,r){const s=De(t,!0,r==="fixed"),n=s.top+t.clientTop,a=s.left+t.clientLeft,l=de(t)?Ve(t):ce(1),c=t.clientWidth*l.x,o=t.clientHeight*l.y,u=a*l.x,d=n*l.y;return{width:c,height:o,x:u,y:d}}function ts(t,r,s){let n;if(r==="viewport")n=co(t,s);else if(r==="document")n=io(me(t));else if(ae(r))n=mo(r,s);else{const a=Rs(t);n={x:r.x-a.x,y:r.y-a.y,width:r.width,height:r.height}}return vt(n)}function Os(t,r){const s=Se(t);return s===r||!ae(s)||ze(s)?!1:le(s).position==="fixed"||Os(s,r)}function fo(t,r){const s=r.get(t);if(s)return s;let n=nt(t,[],!1).filter(o=>ae(o)&&Ke(o)!=="body"),a=null;const l=le(t).position==="fixed";let c=l?Se(t):t;for(;ae(c)&&!ze(c);){const o=le(c),u=jr(c);!u&&o.position==="fixed"&&(a=null),(l?!u&&!a:!u&&o.position==="static"&&!!a&&uo.has(a.position)||at(c)&&!u&&Os(t,c))?n=n.filter(f=>f!==c):a=o,c=Se(c)}return r.set(t,n),n}function xo(t){let{element:r,boundary:s,rootBoundary:n,strategy:a}=t;const c=[...s==="clippingAncestors"?It(r)?[]:fo(r,this._c):[].concat(s),n],o=c[0],u=c.reduce((d,f)=>{const p=ts(r,f,a);return d.top=Be(p.top,d.top),d.right=er(p.right,d.right),d.bottom=er(p.bottom,d.bottom),d.left=Be(p.left,d.left),d},ts(r,o,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function po(t){const{width:r,height:s}=Is(t);return{width:r,height:s}}function ho(t,r,s){const n=de(r),a=me(r),l=s==="fixed",c=De(t,!0,l,r);let o={scrollLeft:0,scrollTop:0};const u=ce(0);function d(){u.x=At(a)}if(n||!n&&!l)if((Ke(r)!=="body"||at(a))&&(o=Rt(r)),n){const m=De(r,!0,l,r);u.x=m.x+r.clientLeft,u.y=m.y+r.clientTop}else a&&d();l&&!n&&a&&d();const f=a&&!n&&!l?As(a,o):ce(0),p=c.left+o.scrollLeft-u.x-f.x,h=c.top+o.scrollTop-u.y-f.y;return{x:p,y:h,width:c.width,height:c.height}}function Vt(t){return le(t).position==="static"}function rs(t,r){if(!de(t)||le(t).position==="fixed")return null;if(r)return r(t);let s=t.offsetParent;return me(t)===s&&(s=s.ownerDocument.body),s}function ks(t,r){const s=ee(t);if(It(t))return s;if(!de(t)){let a=Se(t);for(;a&&!ze(a);){if(ae(a)&&!Vt(a))return a;a=Se(a)}return s}let n=rs(t,r);for(;n&&Zl(n)&&Vt(n);)n=rs(n,r);return n&&ze(n)&&Vt(n)&&!jr(n)?s:n||ro(t)||s}const go=async function(t){const r=this.getOffsetParent||ks,s=this.getDimensions,n=await s(t.floating);return{reference:ho(t.reference,await r(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function bo(t){return le(t).direction==="rtl"}const vo={convertOffsetParentRelativeRectToViewportRelativeRect:lo,getDocumentElement:me,getClippingRect:xo,getOffsetParent:ks,getElementRects:go,getClientRects:oo,getDimensions:po,getScale:Ve,isElement:ae,isRTL:bo};function Ds(t,r){return t.x===r.x&&t.y===r.y&&t.width===r.width&&t.height===r.height}function yo(t,r){let s=null,n;const a=me(t);function l(){var o;clearTimeout(n),(o=s)==null||o.disconnect(),s=null}function c(o,u){o===void 0&&(o=!1),u===void 0&&(u=1),l();const d=t.getBoundingClientRect(),{left:f,top:p,width:h,height:m}=d;if(o||r(),!h||!m)return;const N=lt(p),x=lt(a.clientWidth-(f+h)),v=lt(a.clientHeight-(p+m)),w=lt(f),C={rootMargin:-N+"px "+-x+"px "+-v+"px "+-w+"px",threshold:Be(0,er(1,u))||1};let P=!0;function T(g){const b=g[0].intersectionRatio;if(b!==u){if(!P)return c();b?c(!1,b):n=setTimeout(()=>{c(!1,1e-7)},1e3)}b===1&&!Ds(d,t.getBoundingClientRect())&&c(),P=!1}try{s=new IntersectionObserver(T,{...C,root:a.ownerDocument})}catch{s=new IntersectionObserver(T,C)}s.observe(t)}return c(!0),l}function No(t,r,s,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:u=!1}=n,d=Sr(t),f=a||l?[...d?nt(d):[],...nt(r)]:[];f.forEach(w=>{a&&w.addEventListener("scroll",s,{passive:!0}),l&&w.addEventListener("resize",s)});const p=d&&o?yo(d,s):null;let h=-1,m=null;c&&(m=new ResizeObserver(w=>{let[j]=w;j&&j.target===d&&m&&(m.unobserve(r),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var C;(C=m)==null||C.observe(r)})),s()}),d&&!u&&m.observe(d),m.observe(r));let N,x=u?De(t):null;u&&v();function v(){const w=De(t);x&&!Ds(x,w)&&s(),x=w,N=requestAnimationFrame(v)}return s(),()=>{var w;f.forEach(j=>{a&&j.removeEventListener("scroll",s),l&&j.removeEventListener("resize",s)}),p?.(),(w=m)==null||w.disconnect(),m=null,u&&cancelAnimationFrame(N)}}const jo=zl,wo=Gl,So=Vl,Co=Yl,Eo=Hl,ss=Bl,Po=Kl,To=(t,r,s)=>{const n=new Map,a={platform:vo,...s},l={...a.platform,_c:n};return Wl(t,r,{...a,platform:l})};var Io=typeof document<"u",Ro=function(){},mt=Io?i.useLayoutEffect:Ro;function Nt(t,r){if(t===r)return!0;if(typeof t!=typeof r)return!1;if(typeof t=="function"&&t.toString()===r.toString())return!0;let s,n,a;if(t&&r&&typeof t=="object"){if(Array.isArray(t)){if(s=t.length,s!==r.length)return!1;for(n=s;n--!==0;)if(!Nt(t[n],r[n]))return!1;return!0}if(a=Object.keys(t),s=a.length,s!==Object.keys(r).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(r,a[n]))return!1;for(n=s;n--!==0;){const l=a[n];if(!(l==="_owner"&&t.$$typeof)&&!Nt(t[l],r[l]))return!1}return!0}return t!==t&&r!==r}function $s(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ns(t,r){const s=$s(t);return Math.round(r*s)/s}function Ht(t){const r=i.useRef(t);return mt(()=>{r.current=t}),r}function Ao(t){t===void 0&&(t={});const{placement:r="bottom",strategy:s="absolute",middleware:n=[],platform:a,elements:{reference:l,floating:c}={},transform:o=!0,whileElementsMounted:u,open:d}=t,[f,p]=i.useState({x:0,y:0,strategy:s,placement:r,middlewareData:{},isPositioned:!1}),[h,m]=i.useState(n);Nt(h,n)||m(n);const[N,x]=i.useState(null),[v,w]=i.useState(null),j=i.useCallback($=>{$!==g.current&&(g.current=$,x($))},[]),C=i.useCallback($=>{$!==b.current&&(b.current=$,w($))},[]),P=l||N,T=c||v,g=i.useRef(null),b=i.useRef(null),E=i.useRef(f),I=u!=null,y=Ht(u),S=Ht(a),R=Ht(d),A=i.useCallback(()=>{if(!g.current||!b.current)return;const $={placement:r,strategy:s,middleware:h};S.current&&($.platform=S.current),To(g.current,b.current,$).then(M=>{const Z={...M,isPositioned:R.current!==!1};O.current&&!Nt(E.current,Z)&&(E.current=Z,Ct.flushSync(()=>{p(Z)}))})},[h,r,s,S,R]);mt(()=>{d===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,p($=>({...$,isPositioned:!1})))},[d]);const O=i.useRef(!1);mt(()=>(O.current=!0,()=>{O.current=!1}),[]),mt(()=>{if(P&&(g.current=P),T&&(b.current=T),P&&T){if(y.current)return y.current(P,T,A);A()}},[P,T,A,y,I]);const L=i.useMemo(()=>({reference:g,floating:b,setReference:j,setFloating:C}),[j,C]),k=i.useMemo(()=>({reference:P,floating:T}),[P,T]),_=i.useMemo(()=>{const $={position:s,left:0,top:0};if(!k.floating)return $;const M=ns(k.floating,f.x),Z=ns(k.floating,f.y);return o?{...$,transform:"translate("+M+"px, "+Z+"px)",...$s(k.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:M,top:Z}},[s,o,k.floating,f.x,f.y]);return i.useMemo(()=>({...f,update:A,refs:L,elements:k,floatingStyles:_}),[f,A,L,k,_])}const Oo=t=>{function r(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:t,fn(s){const{element:n,padding:a}=typeof t=="function"?t(s):t;return n&&r(n)?n.current!=null?ss({element:n.current,padding:a}).fn(s):{}:n?ss({element:n,padding:a}).fn(s):{}}}},ko=(t,r)=>({...jo(t),options:[t,r]}),Do=(t,r)=>({...wo(t),options:[t,r]}),$o=(t,r)=>({...Po(t),options:[t,r]}),Lo=(t,r)=>({...So(t),options:[t,r]}),_o=(t,r)=>({...Co(t),options:[t,r]}),Mo=(t,r)=>({...Eo(t),options:[t,r]}),Fo=(t,r)=>({...Oo(t),options:[t,r]});function Wo(t){const r=Bo(t),s=i.forwardRef((n,a)=>{const{children:l,...c}=n,o=i.Children.toArray(l),u=o.find(Ho);if(u){const d=u.props.children,f=o.map(p=>p===u?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(d)?i.cloneElement(d,void 0,f):null})}return e.jsx(r,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}function Bo(t){const r=i.forwardRef((s,n)=>{const{children:a,...l}=s;if(i.isValidElement(a)){const c=zo(a),o=Uo(l,a.props);return a.type!==i.Fragment&&(o.ref=n?ue(n,c):c),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Vo=Symbol("radix.slottable");function Ho(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Vo}function Uo(t,r){const s={...r};for(const n in r){const a=t[n],l=r[n];/^on[A-Z]/.test(n)?a&&l?s[n]=(...o)=>{const u=l(...o);return a(...o),u}:a&&(s[n]=a):n==="style"?s[n]={...a,...l}:n==="className"&&(s[n]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function zo(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Go=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ko=Go.reduce((t,r)=>{const s=Wo(`Primitive.${r}`),n=i.forwardRef((a,l)=>{const{asChild:c,...o}=a,u=c?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...o,ref:l})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),Yo="Arrow",Ls=i.forwardRef((t,r)=>{const{children:s,width:n=10,height:a=5,...l}=t;return e.jsx(Ko.svg,{...l,ref:r,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?s:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ls.displayName=Yo;var qo=Ls;function Xo(t){const r=Zo(t),s=i.forwardRef((n,a)=>{const{children:l,...c}=n,o=i.Children.toArray(l),u=o.find(Jo);if(u){const d=u.props.children,f=o.map(p=>p===u?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(d)?i.cloneElement(d,void 0,f):null})}return e.jsx(r,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}function Zo(t){const r=i.forwardRef((s,n)=>{const{children:a,...l}=s;if(i.isValidElement(a)){const c=ti(a),o=ei(l,a.props);return a.type!==i.Fragment&&(o.ref=n?ue(n,c):c),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Qo=Symbol("radix.slottable");function Jo(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Qo}function ei(t,r){const s={...r};for(const n in r){const a=t[n],l=r[n];/^on[A-Z]/.test(n)?a&&l?s[n]=(...o)=>{const u=l(...o);return a(...o),u}:a&&(s[n]=a):n==="style"?s[n]={...a,...l}:n==="className"&&(s[n]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function ti(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var ri=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_s=ri.reduce((t,r)=>{const s=Xo(`Primitive.${r}`),n=i.forwardRef((a,l)=>{const{asChild:c,...o}=a,u=c?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...o,ref:l})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{});function si(t){const[r,s]=i.useState(void 0);return J(()=>{if(t){s({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const l=a[0];let c,o;if("borderBoxSize"in l){const u=l.borderBoxSize,d=Array.isArray(u)?u[0]:u;c=d.inlineSize,o=d.blockSize}else c=t.offsetWidth,o=t.offsetHeight;s({width:c,height:o})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else s(void 0)},[t]),r}var Cr="Popper",[Ms,Fs]=gr(Cr),[ni,Ws]=Ms(Cr),Bs=t=>{const{__scopePopper:r,children:s}=t,[n,a]=i.useState(null);return e.jsx(ni,{scope:r,anchor:n,onAnchorChange:a,children:s})};Bs.displayName=Cr;var Vs="PopperAnchor",Hs=i.forwardRef((t,r)=>{const{__scopePopper:s,virtualRef:n,...a}=t,l=Ws(Vs,s),c=i.useRef(null),o=G(r,c),u=i.useRef(null);return i.useEffect(()=>{const d=u.current;u.current=n?.current||c.current,d!==u.current&&l.onAnchorChange(u.current)}),n?null:e.jsx(_s.div,{...a,ref:o})});Hs.displayName=Vs;var Er="PopperContent",[ai,li]=Ms(Er),Us=i.forwardRef((t,r)=>{const{__scopePopper:s,side:n="bottom",sideOffset:a=0,align:l="center",alignOffset:c=0,arrowPadding:o=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:f=0,sticky:p="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:N,...x}=t,v=Ws(Er,s),[w,j]=i.useState(null),C=G(r,D=>j(D)),[P,T]=i.useState(null),g=si(P),b=g?.width??0,E=g?.height??0,I=n+(l!=="center"?"-"+l:""),y=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},S=Array.isArray(d)?d:[d],R=S.length>0,A={padding:y,boundary:S.filter(ii),altBoundary:R},{refs:O,floatingStyles:L,placement:k,isPositioned:_,middlewareData:$}=Ao({strategy:"fixed",placement:I,whileElementsMounted:(...D)=>No(...D,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[ko({mainAxis:a+E,alignmentAxis:c}),u&&Do({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?$o():void 0,...A}),u&&Lo({...A}),_o({...A,apply:({elements:D,rects:B,availableWidth:q,availableHeight:F})=>{const{width:W,height:H}=B.reference,re=D.floating.style;re.setProperty("--radix-popper-available-width",`${q}px`),re.setProperty("--radix-popper-available-height",`${F}px`),re.setProperty("--radix-popper-anchor-width",`${W}px`),re.setProperty("--radix-popper-anchor-height",`${H}px`)}}),P&&Fo({element:P,padding:o}),ci({arrowWidth:b,arrowHeight:E}),h&&Mo({strategy:"referenceHidden",...A})]}),[M,Z]=Ks(k),Pe=ke(N);J(()=>{_&&Pe?.()},[_,Pe]);const qe=$.arrow?.x,Xe=$.arrow?.y,ge=$.arrow?.centerOffset!==0,[_e,Te]=i.useState();return J(()=>{w&&Te(window.getComputedStyle(w).zIndex)},[w]),e.jsx("div",{ref:O.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:_?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:_e,"--radix-popper-transform-origin":[$.transformOrigin?.x,$.transformOrigin?.y].join(" "),...$.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(ai,{scope:s,placedSide:M,onArrowChange:T,arrowX:qe,arrowY:Xe,shouldHideArrow:ge,children:e.jsx(_s.div,{"data-side":M,"data-align":Z,...x,ref:C,style:{...x.style,animation:_?void 0:"none"}})})})});Us.displayName=Er;var zs="PopperArrow",oi={top:"bottom",right:"left",bottom:"top",left:"right"},Gs=i.forwardRef(function(r,s){const{__scopePopper:n,...a}=r,l=li(zs,n),c=oi[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(qo,{...a,ref:s,style:{...a.style,display:"block"}})})});Gs.displayName=zs;function ii(t){return t!==null}var ci=t=>({name:"transformOrigin",options:t,fn(r){const{placement:s,rects:n,middlewareData:a}=r,c=a.arrow?.centerOffset!==0,o=c?0:t.arrowWidth,u=c?0:t.arrowHeight,[d,f]=Ks(s),p={start:"0%",center:"50%",end:"100%"}[f],h=(a.arrow?.x??0)+o/2,m=(a.arrow?.y??0)+u/2;let N="",x="";return d==="bottom"?(N=c?p:`${h}px`,x=`${-u}px`):d==="top"?(N=c?p:`${h}px`,x=`${n.floating.height+u}px`):d==="right"?(N=`${-u}px`,x=c?p:`${m}px`):d==="left"&&(N=`${n.floating.width+u}px`,x=c?p:`${m}px`),{data:{x:N,y:x}}}});function Ks(t){const[r,s="center"]=t.split("-");return[r,s]}var di=Bs,ui=Hs,mi=Us,fi=Gs;function xi(t){const r=pi(t),s=i.forwardRef((n,a)=>{const{children:l,...c}=n,o=i.Children.toArray(l),u=o.find(gi);if(u){const d=u.props.children,f=o.map(p=>p===u?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(d)?i.cloneElement(d,void 0,f):null})}return e.jsx(r,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}function pi(t){const r=i.forwardRef((s,n)=>{const{children:a,...l}=s;if(i.isValidElement(a)){const c=vi(a),o=bi(l,a.props);return a.type!==i.Fragment&&(o.ref=n?ue(n,c):c),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var hi=Symbol("radix.slottable");function gi(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===hi}function bi(t,r){const s={...r};for(const n in r){const a=t[n],l=r[n];/^on[A-Z]/.test(n)?a&&l?s[n]=(...o)=>{const u=l(...o);return a(...o),u}:a&&(s[n]=a):n==="style"?s[n]={...a,...l}:n==="className"&&(s[n]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function vi(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var yi=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ni=yi.reduce((t,r)=>{const s=xi(`Primitive.${r}`),n=i.forwardRef((a,l)=>{const{asChild:c,...o}=a,u=c?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...o,ref:l})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),ji="Portal",Ys=i.forwardRef((t,r)=>{const{container:s,...n}=t,[a,l]=i.useState(!1);J(()=>l(!0),[]);const c=s||a&&globalThis?.document?.body;return c?Gn.createPortal(e.jsx(Ni.div,{...n,ref:r}),c):null});Ys.displayName=ji;function qs(t){const r=wi(t),s=i.forwardRef((n,a)=>{const{children:l,...c}=n,o=i.Children.toArray(l),u=o.find(Ci);if(u){const d=u.props.children,f=o.map(p=>p===u?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(d)?i.cloneElement(d,void 0,f):null})}return e.jsx(r,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}function wi(t){const r=i.forwardRef((s,n)=>{const{children:a,...l}=s;if(i.isValidElement(a)){const c=Pi(a),o=Ei(l,a.props);return a.type!==i.Fragment&&(o.ref=n?ue(n,c):c),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var Si=Symbol("radix.slottable");function Ci(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Si}function Ei(t,r){const s={...r};for(const n in r){const a=t[n],l=r[n];/^on[A-Z]/.test(n)?a&&l?s[n]=(...o)=>{const u=l(...o);return a(...o),u}:a&&(s[n]=a):n==="style"?s[n]={...a,...l}:n==="className"&&(s[n]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function Pi(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Ti=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],te=Ti.reduce((t,r)=>{const s=qs(`Primitive.${r}`),n=i.forwardRef((a,l)=>{const{asChild:c,...o}=a,u=c?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...o,ref:l})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),Ii=dr[" useInsertionEffect ".trim().toString()]||J;function as({prop:t,defaultProp:r,onChange:s=()=>{},caller:n}){const[a,l,c]=Ri({defaultProp:r,onChange:s}),o=t!==void 0,u=o?t:a;{const f=i.useRef(t!==void 0);i.useEffect(()=>{const p=f.current;p!==o&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=o},[o,n])}const d=i.useCallback(f=>{if(o){const p=Ai(f)?f(t):f;p!==t&&c.current?.(p)}else l(f)},[o,t,l,c]);return[u,d]}function Ri({defaultProp:t,onChange:r}){const[s,n]=i.useState(t),a=i.useRef(s),l=i.useRef(r);return Ii(()=>{l.current=r},[r]),i.useEffect(()=>{a.current!==s&&(l.current?.(s),a.current=s)},[s,a]),[s,n,l]}function Ai(t){return typeof t=="function"}function Oi(t){const r=i.useRef({value:t,previous:t});return i.useMemo(()=>(r.current.value!==t&&(r.current.previous=r.current.value,r.current.value=t),r.current.previous),[t])}function ki(t){const r=Di(t),s=i.forwardRef((n,a)=>{const{children:l,...c}=n,o=i.Children.toArray(l),u=o.find(Li);if(u){const d=u.props.children,f=o.map(p=>p===u?i.Children.count(d)>1?i.Children.only(null):i.isValidElement(d)?d.props.children:null:p);return e.jsx(r,{...c,ref:a,children:i.isValidElement(d)?i.cloneElement(d,void 0,f):null})}return e.jsx(r,{...c,ref:a,children:l})});return s.displayName=`${t}.Slot`,s}function Di(t){const r=i.forwardRef((s,n)=>{const{children:a,...l}=s;if(i.isValidElement(a)){const c=Mi(a),o=_i(l,a.props);return a.type!==i.Fragment&&(o.ref=n?ue(n,c):c),i.cloneElement(a,o)}return i.Children.count(a)>1?i.Children.only(null):null});return r.displayName=`${t}.SlotClone`,r}var $i=Symbol("radix.slottable");function Li(t){return i.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$i}function _i(t,r){const s={...r};for(const n in r){const a=t[n],l=r[n];/^on[A-Z]/.test(n)?a&&l?s[n]=(...o)=>{const u=l(...o);return a(...o),u}:a&&(s[n]=a):n==="style"?s[n]={...a,...l}:n==="className"&&(s[n]=[a,l].filter(Boolean).join(" "))}return{...t,...s}}function Mi(t){let r=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?t.ref:(r=Object.getOwnPropertyDescriptor(t,"ref")?.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var Fi=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Wi=Fi.reduce((t,r)=>{const s=ki(`Primitive.${r}`),n=i.forwardRef((a,l)=>{const{asChild:c,...o}=a,u=c?s:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(u,{...o,ref:l})});return n.displayName=`Primitive.${r}`,{...t,[r]:n}},{}),Xs=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Bi="VisuallyHidden",Vi=i.forwardRef((t,r)=>e.jsx(Wi.span,{...t,ref:r,style:{...Xs,...t.style}}));Vi.displayName=Bi;var Hi=function(t){if(typeof document>"u")return null;var r=Array.isArray(t)?t[0]:t;return r.ownerDocument.body},Me=new WeakMap,ot=new WeakMap,it={},Ut=0,Zs=function(t){return t&&(t.host||Zs(t.parentNode))},Ui=function(t,r){return r.map(function(s){if(t.contains(s))return s;var n=Zs(s);return n&&t.contains(n)?n:(console.error("aria-hidden",s,"in not contained inside",t,". Doing nothing"),null)}).filter(function(s){return!!s})},zi=function(t,r,s,n){var a=Ui(r,Array.isArray(t)?t:[t]);it[s]||(it[s]=new WeakMap);var l=it[s],c=[],o=new Set,u=new Set(a),d=function(p){!p||o.has(p)||(o.add(p),d(p.parentNode))};a.forEach(d);var f=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(h){if(o.has(h))f(h);else try{var m=h.getAttribute(n),N=m!==null&&m!=="false",x=(Me.get(h)||0)+1,v=(l.get(h)||0)+1;Me.set(h,x),l.set(h,v),c.push(h),x===1&&N&&ot.set(h,!0),v===1&&h.setAttribute(s,"true"),N||h.setAttribute(n,"true")}catch(w){console.error("aria-hidden: cannot operate on ",h,w)}})};return f(r),o.clear(),Ut++,function(){c.forEach(function(p){var h=Me.get(p)-1,m=l.get(p)-1;Me.set(p,h),l.set(p,m),h||(ot.has(p)||p.removeAttribute(n),ot.delete(p)),m||p.removeAttribute(s)}),Ut--,Ut||(Me=new WeakMap,Me=new WeakMap,ot=new WeakMap,it={})}},Gi=function(t,r,s){s===void 0&&(s="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),a=r||Hi(t);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),zi(n,a,s,"aria-hidden")):function(){return null}},oe=function(){return oe=Object.assign||function(r){for(var s,n=1,a=arguments.length;n<a;n++){s=arguments[n];for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(r[l]=s[l])}return r},oe.apply(this,arguments)};function Qs(t,r){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(s[n[a]]=t[n[a]]);return s}function Ki(t,r,s){if(s||arguments.length===2)for(var n=0,a=r.length,l;n<a;n++)(l||!(n in r))&&(l||(l=Array.prototype.slice.call(r,0,n)),l[n]=r[n]);return t.concat(l||Array.prototype.slice.call(r))}var ft="right-scroll-bar-position",xt="width-before-scroll-bar",Yi="with-scroll-bars-hidden",qi="--removed-body-scroll-bar-size";function zt(t,r){return typeof t=="function"?t(r):t&&(t.current=r),t}function Xi(t,r){var s=i.useState(function(){return{value:t,callback:r,facade:{get current(){return s.value},set current(n){var a=s.value;a!==n&&(s.value=n,s.callback(n,a))}}}})[0];return s.callback=r,s.facade}var Zi=typeof window<"u"?i.useLayoutEffect:i.useEffect,ls=new WeakMap;function Qi(t,r){var s=Xi(r||null,function(n){return t.forEach(function(a){return zt(a,n)})});return Zi(function(){var n=ls.get(s);if(n){var a=new Set(n),l=new Set(t),c=s.current;a.forEach(function(o){l.has(o)||zt(o,null)}),l.forEach(function(o){a.has(o)||zt(o,c)})}ls.set(s,t)},[t]),s}function Ji(t){return t}function ec(t,r){r===void 0&&(r=Ji);var s=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:t},useMedium:function(l){var c=r(l,n);return s.push(c),function(){s=s.filter(function(o){return o!==c})}},assignSyncMedium:function(l){for(n=!0;s.length;){var c=s;s=[],c.forEach(l)}s={push:function(o){return l(o)},filter:function(){return s}}},assignMedium:function(l){n=!0;var c=[];if(s.length){var o=s;s=[],o.forEach(l),c=s}var u=function(){var f=c;c=[],f.forEach(l)},d=function(){return Promise.resolve().then(u)};d(),s={push:function(f){c.push(f),d()},filter:function(f){return c=c.filter(f),s}}}};return a}function tc(t){t===void 0&&(t={});var r=ec(null);return r.options=oe({async:!0,ssr:!1},t),r}var Js=function(t){var r=t.sideCar,s=Qs(t,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=r.read();if(!n)throw new Error("Sidecar medium not found");return i.createElement(n,oe({},s))};Js.isSideCarExport=!0;function rc(t,r){return t.useMedium(r),Js}var en=tc(),Gt=function(){},Ot=i.forwardRef(function(t,r){var s=i.useRef(null),n=i.useState({onScrollCapture:Gt,onWheelCapture:Gt,onTouchMoveCapture:Gt}),a=n[0],l=n[1],c=t.forwardProps,o=t.children,u=t.className,d=t.removeScrollBar,f=t.enabled,p=t.shards,h=t.sideCar,m=t.noRelative,N=t.noIsolation,x=t.inert,v=t.allowPinchZoom,w=t.as,j=w===void 0?"div":w,C=t.gapMode,P=Qs(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),T=h,g=Qi([s,r]),b=oe(oe({},P),a);return i.createElement(i.Fragment,null,f&&i.createElement(T,{sideCar:en,removeScrollBar:d,shards:p,noRelative:m,noIsolation:N,inert:x,setCallbacks:l,allowPinchZoom:!!v,lockRef:s,gapMode:C}),c?i.cloneElement(i.Children.only(o),oe(oe({},b),{ref:g})):i.createElement(j,oe({},b,{className:u,ref:g}),o))});Ot.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ot.classNames={fullWidth:xt,zeroRight:ft};var os,sc=function(){if(os)return os;if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function nc(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var r=sc();return r&&t.setAttribute("nonce",r),t}function ac(t,r){t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}function lc(t){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(t)}var oc=function(){var t=0,r=null;return{add:function(s){t==0&&(r=nc())&&(ac(r,s),lc(r)),t++},remove:function(){t--,!t&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},ic=function(){var t=oc();return function(r,s){i.useEffect(function(){return t.add(r),function(){t.remove()}},[r&&s])}},tn=function(){var t=ic(),r=function(s){var n=s.styles,a=s.dynamic;return t(n,a),null};return r},cc={left:0,top:0,right:0,gap:0},Kt=function(t){return parseInt(t||"",10)||0},dc=function(t){var r=window.getComputedStyle(document.body),s=r[t==="padding"?"paddingLeft":"marginLeft"],n=r[t==="padding"?"paddingTop":"marginTop"],a=r[t==="padding"?"paddingRight":"marginRight"];return[Kt(s),Kt(n),Kt(a)]},uc=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return cc;var r=dc(t),s=document.documentElement.clientWidth,n=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,n-s+r[2]-r[0])}},mc=tn(),He="data-scroll-locked",fc=function(t,r,s,n){var a=t.left,l=t.top,c=t.right,o=t.gap;return s===void 0&&(s="margin"),`
  .`.concat(Yi,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(He,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(n,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),s==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ft,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(xt,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(ft," .").concat(ft,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(xt," .").concat(xt,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(He,`] {
    `).concat(qi,": ").concat(o,`px;
  }
`)},is=function(){var t=parseInt(document.body.getAttribute(He)||"0",10);return isFinite(t)?t:0},xc=function(){i.useEffect(function(){return document.body.setAttribute(He,(is()+1).toString()),function(){var t=is()-1;t<=0?document.body.removeAttribute(He):document.body.setAttribute(He,t.toString())}},[])},pc=function(t){var r=t.noRelative,s=t.noImportant,n=t.gapMode,a=n===void 0?"margin":n;xc();var l=i.useMemo(function(){return uc(a)},[a]);return i.createElement(mc,{styles:fc(l,!r,a,s?"":"!important")})},rr=!1;if(typeof window<"u")try{var ct=Object.defineProperty({},"passive",{get:function(){return rr=!0,!0}});window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{rr=!1}var Fe=rr?{passive:!1}:!1,hc=function(t){return t.tagName==="TEXTAREA"},rn=function(t,r){if(!(t instanceof Element))return!1;var s=window.getComputedStyle(t);return s[r]!=="hidden"&&!(s.overflowY===s.overflowX&&!hc(t)&&s[r]==="visible")},gc=function(t){return rn(t,"overflowY")},bc=function(t){return rn(t,"overflowX")},cs=function(t,r){var s=r.ownerDocument,n=r;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=sn(t,n);if(a){var l=nn(t,n),c=l[1],o=l[2];if(c>o)return!0}n=n.parentNode}while(n&&n!==s.body);return!1},vc=function(t){var r=t.scrollTop,s=t.scrollHeight,n=t.clientHeight;return[r,s,n]},yc=function(t){var r=t.scrollLeft,s=t.scrollWidth,n=t.clientWidth;return[r,s,n]},sn=function(t,r){return t==="v"?gc(r):bc(r)},nn=function(t,r){return t==="v"?vc(r):yc(r)},Nc=function(t,r){return t==="h"&&r==="rtl"?-1:1},jc=function(t,r,s,n,a){var l=Nc(t,window.getComputedStyle(r).direction),c=l*n,o=s.target,u=r.contains(o),d=!1,f=c>0,p=0,h=0;do{if(!o)break;var m=nn(t,o),N=m[0],x=m[1],v=m[2],w=x-v-l*N;(N||w)&&sn(t,o)&&(p+=w,h+=N);var j=o.parentNode;o=j&&j.nodeType===Node.DOCUMENT_FRAGMENT_NODE?j.host:j}while(!u&&o!==document.body||u&&(r.contains(o)||r===o));return(f&&(a&&Math.abs(p)<1||!a&&c>p)||!f&&(a&&Math.abs(h)<1||!a&&-c>h))&&(d=!0),d},dt=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},ds=function(t){return[t.deltaX,t.deltaY]},us=function(t){return t&&"current"in t?t.current:t},wc=function(t,r){return t[0]===r[0]&&t[1]===r[1]},Sc=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Cc=0,We=[];function Ec(t){var r=i.useRef([]),s=i.useRef([0,0]),n=i.useRef(),a=i.useState(Cc++)[0],l=i.useState(tn)[0],c=i.useRef(t);i.useEffect(function(){c.current=t},[t]),i.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(a));var x=Ki([t.lockRef.current],(t.shards||[]).map(us),!0).filter(Boolean);return x.forEach(function(v){return v.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),x.forEach(function(v){return v.classList.remove("allow-interactivity-".concat(a))})}}},[t.inert,t.lockRef.current,t.shards]);var o=i.useCallback(function(x,v){if("touches"in x&&x.touches.length===2||x.type==="wheel"&&x.ctrlKey)return!c.current.allowPinchZoom;var w=dt(x),j=s.current,C="deltaX"in x?x.deltaX:j[0]-w[0],P="deltaY"in x?x.deltaY:j[1]-w[1],T,g=x.target,b=Math.abs(C)>Math.abs(P)?"h":"v";if("touches"in x&&b==="h"&&g.type==="range")return!1;var E=window.getSelection(),I=E&&E.anchorNode,y=I?I===g||I.contains(g):!1;if(y)return!1;var S=cs(b,g);if(!S)return!0;if(S?T=b:(T=b==="v"?"h":"v",S=cs(b,g)),!S)return!1;if(!n.current&&"changedTouches"in x&&(C||P)&&(n.current=T),!T)return!0;var R=n.current||T;return jc(R,v,x,R==="h"?C:P,!0)},[]),u=i.useCallback(function(x){var v=x;if(!(!We.length||We[We.length-1]!==l)){var w="deltaY"in v?ds(v):dt(v),j=r.current.filter(function(T){return T.name===v.type&&(T.target===v.target||v.target===T.shadowParent)&&wc(T.delta,w)})[0];if(j&&j.should){v.cancelable&&v.preventDefault();return}if(!j){var C=(c.current.shards||[]).map(us).filter(Boolean).filter(function(T){return T.contains(v.target)}),P=C.length>0?o(v,C[0]):!c.current.noIsolation;P&&v.cancelable&&v.preventDefault()}}},[]),d=i.useCallback(function(x,v,w,j){var C={name:x,delta:v,target:w,should:j,shadowParent:Pc(w)};r.current.push(C),setTimeout(function(){r.current=r.current.filter(function(P){return P!==C})},1)},[]),f=i.useCallback(function(x){s.current=dt(x),n.current=void 0},[]),p=i.useCallback(function(x){d(x.type,ds(x),x.target,o(x,t.lockRef.current))},[]),h=i.useCallback(function(x){d(x.type,dt(x),x.target,o(x,t.lockRef.current))},[]);i.useEffect(function(){return We.push(l),t.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:h}),document.addEventListener("wheel",u,Fe),document.addEventListener("touchmove",u,Fe),document.addEventListener("touchstart",f,Fe),function(){We=We.filter(function(x){return x!==l}),document.removeEventListener("wheel",u,Fe),document.removeEventListener("touchmove",u,Fe),document.removeEventListener("touchstart",f,Fe)}},[]);var m=t.removeScrollBar,N=t.inert;return i.createElement(i.Fragment,null,N?i.createElement(l,{styles:Sc(a)}):null,m?i.createElement(pc,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function Pc(t){for(var r=null;t!==null;)t instanceof ShadowRoot&&(r=t.host,t=t.host),t=t.parentNode;return r}const Tc=rc(en,Ec);var an=i.forwardRef(function(t,r){return i.createElement(Ot,oe({},t,{ref:r,sideCar:Tc}))});an.classNames=Ot.classNames;const Ic=an;var Rc=[" ","Enter","ArrowUp","ArrowDown"],Ac=[" ","Enter"],$e="Select",[kt,Dt,Oc]=za($e),[Ye,Td]=gr($e,[Oc,Fs]),$t=Fs(),[kc,Ce]=Ye($e),[Dc,$c]=Ye($e),ln=t=>{const{__scopeSelect:r,children:s,open:n,defaultOpen:a,onOpenChange:l,value:c,defaultValue:o,onValueChange:u,dir:d,name:f,autoComplete:p,disabled:h,required:m,form:N}=t,x=$t(r),[v,w]=i.useState(null),[j,C]=i.useState(null),[P,T]=i.useState(!1),g=Ka(d),[b,E]=as({prop:n,defaultProp:a??!1,onChange:l,caller:$e}),[I,y]=as({prop:c,defaultProp:o,onChange:u,caller:$e}),S=i.useRef(null),R=v?N||!!v.closest("form"):!0,[A,O]=i.useState(new Set),L=Array.from(A).map(k=>k.props.value).join(";");return e.jsx(di,{...x,children:e.jsxs(kc,{required:m,scope:r,trigger:v,onTriggerChange:w,valueNode:j,onValueNodeChange:C,valueNodeHasChildren:P,onValueNodeHasChildrenChange:T,contentId:br(),value:I,onValueChange:y,open:b,onOpenChange:E,dir:g,triggerPointerDownPosRef:S,disabled:h,children:[e.jsx(kt.Provider,{scope:r,children:e.jsx(Dc,{scope:t.__scopeSelect,onNativeOptionAdd:i.useCallback(k=>{O(_=>new Set(_).add(k))},[]),onNativeOptionRemove:i.useCallback(k=>{O(_=>{const $=new Set(_);return $.delete(k),$})},[]),children:s})}),R?e.jsxs(An,{"aria-hidden":!0,required:m,tabIndex:-1,name:f,autoComplete:p,value:I,onChange:k=>y(k.target.value),disabled:h,form:N,children:[I===void 0?e.jsx("option",{value:""}):null,Array.from(A)]},L):null]})})};ln.displayName=$e;var on="SelectTrigger",cn=i.forwardRef((t,r)=>{const{__scopeSelect:s,disabled:n=!1,...a}=t,l=$t(s),c=Ce(on,s),o=c.disabled||n,u=G(r,c.onTriggerChange),d=Dt(s),f=i.useRef("touch"),[p,h,m]=kn(x=>{const v=d().filter(C=>!C.disabled),w=v.find(C=>C.value===c.value),j=Dn(v,x,w);j!==void 0&&c.onValueChange(j.value)}),N=x=>{o||(c.onOpenChange(!0),m()),x&&(c.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return e.jsx(ui,{asChild:!0,...l,children:e.jsx(te.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":On(c.value)?"":void 0,...a,ref:u,onClick:U(a.onClick,x=>{x.currentTarget.focus(),f.current!=="mouse"&&N(x)}),onPointerDown:U(a.onPointerDown,x=>{f.current=x.pointerType;const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(N(x),x.preventDefault())}),onKeyDown:U(a.onKeyDown,x=>{const v=p.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&h(x.key),!(v&&x.key===" ")&&Rc.includes(x.key)&&(N(),x.preventDefault())})})})});cn.displayName=on;var dn="SelectValue",un=i.forwardRef((t,r)=>{const{__scopeSelect:s,className:n,style:a,children:l,placeholder:c="",...o}=t,u=Ce(dn,s),{onValueNodeHasChildrenChange:d}=u,f=l!==void 0,p=G(r,u.onValueNodeChange);return J(()=>{d(f)},[d,f]),e.jsx(te.span,{...o,ref:p,style:{pointerEvents:"none"},children:On(u.value)?e.jsx(e.Fragment,{children:c}):l})});un.displayName=dn;var Lc="SelectIcon",mn=i.forwardRef((t,r)=>{const{__scopeSelect:s,children:n,...a}=t;return e.jsx(te.span,{"aria-hidden":!0,...a,ref:r,children:n||"â–¼"})});mn.displayName=Lc;var _c="SelectPortal",fn=t=>e.jsx(Ys,{asChild:!0,...t});fn.displayName=_c;var Le="SelectContent",xn=i.forwardRef((t,r)=>{const s=Ce(Le,t.__scopeSelect),[n,a]=i.useState();if(J(()=>{a(new DocumentFragment)},[]),!s.open){const l=n;return l?Ct.createPortal(e.jsx(pn,{scope:t.__scopeSelect,children:e.jsx(kt.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),l):null}return e.jsx(hn,{...t,ref:r})});xn.displayName=Le;var se=10,[pn,Ee]=Ye(Le),Mc="SelectContentImpl",Fc=qs("SelectContent.RemoveScroll"),hn=i.forwardRef((t,r)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:l,onPointerDownOutside:c,side:o,sideOffset:u,align:d,alignOffset:f,arrowPadding:p,collisionBoundary:h,collisionPadding:m,sticky:N,hideWhenDetached:x,avoidCollisions:v,...w}=t,j=Ce(Le,s),[C,P]=i.useState(null),[T,g]=i.useState(null),b=G(r,D=>P(D)),[E,I]=i.useState(null),[y,S]=i.useState(null),R=Dt(s),[A,O]=i.useState(!1),L=i.useRef(!1);i.useEffect(()=>{if(C)return Gi(C)},[C]),dl();const k=i.useCallback(D=>{const[B,...q]=R().map(H=>H.ref.current),[F]=q.slice(-1),W=document.activeElement;for(const H of D)if(H===W||(H?.scrollIntoView({block:"nearest"}),H===B&&T&&(T.scrollTop=0),H===F&&T&&(T.scrollTop=T.scrollHeight),H?.focus(),document.activeElement!==W))return},[R,T]),_=i.useCallback(()=>k([E,C]),[k,E,C]);i.useEffect(()=>{A&&_()},[A,_]);const{onOpenChange:$,triggerPointerDownPosRef:M}=j;i.useEffect(()=>{if(C){let D={x:0,y:0};const B=F=>{D={x:Math.abs(Math.round(F.pageX)-(M.current?.x??0)),y:Math.abs(Math.round(F.pageY)-(M.current?.y??0))}},q=F=>{D.x<=10&&D.y<=10?F.preventDefault():C.contains(F.target)||$(!1),document.removeEventListener("pointermove",B),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",B),document.addEventListener("pointerup",q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",q,{capture:!0})}}},[C,$,M]),i.useEffect(()=>{const D=()=>$(!1);return window.addEventListener("blur",D),window.addEventListener("resize",D),()=>{window.removeEventListener("blur",D),window.removeEventListener("resize",D)}},[$]);const[Z,Pe]=kn(D=>{const B=R().filter(W=>!W.disabled),q=B.find(W=>W.ref.current===document.activeElement),F=Dn(B,D,q);F&&setTimeout(()=>F.ref.current.focus())}),qe=i.useCallback((D,B,q)=>{const F=!L.current&&!q;(j.value!==void 0&&j.value===B||F)&&(I(D),F&&(L.current=!0))},[j.value]),Xe=i.useCallback(()=>C?.focus(),[C]),ge=i.useCallback((D,B,q)=>{const F=!L.current&&!q;(j.value!==void 0&&j.value===B||F)&&S(D)},[j.value]),_e=n==="popper"?sr:gn,Te=_e===sr?{side:o,sideOffset:u,align:d,alignOffset:f,arrowPadding:p,collisionBoundary:h,collisionPadding:m,sticky:N,hideWhenDetached:x,avoidCollisions:v}:{};return e.jsx(pn,{scope:s,content:C,viewport:T,onViewportChange:g,itemRefCallback:qe,selectedItem:E,onItemLeave:Xe,itemTextRefCallback:ge,focusSelectedItem:_,selectedItemText:y,position:n,isPositioned:A,searchRef:Z,children:e.jsx(Ic,{as:Fc,allowPinchZoom:!0,children:e.jsx(ws,{asChild:!0,trapped:j.open,onMountAutoFocus:D=>{D.preventDefault()},onUnmountAutoFocus:U(a,D=>{j.trigger?.focus({preventScroll:!0}),D.preventDefault()}),children:e.jsx(Ns,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:D=>D.preventDefault(),onDismiss:()=>j.onOpenChange(!1),children:e.jsx(_e,{role:"listbox",id:j.contentId,"data-state":j.open?"open":"closed",dir:j.dir,onContextMenu:D=>D.preventDefault(),...w,...Te,onPlaced:()=>O(!0),ref:b,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:U(w.onKeyDown,D=>{const B=D.ctrlKey||D.altKey||D.metaKey;if(D.key==="Tab"&&D.preventDefault(),!B&&D.key.length===1&&Pe(D.key),["ArrowUp","ArrowDown","Home","End"].includes(D.key)){let F=R().filter(W=>!W.disabled).map(W=>W.ref.current);if(["ArrowUp","End"].includes(D.key)&&(F=F.slice().reverse()),["ArrowUp","ArrowDown"].includes(D.key)){const W=D.target,H=F.indexOf(W);F=F.slice(H+1)}setTimeout(()=>k(F)),D.preventDefault()}})})})})})})});hn.displayName=Mc;var Wc="SelectItemAlignedPosition",gn=i.forwardRef((t,r)=>{const{__scopeSelect:s,onPlaced:n,...a}=t,l=Ce(Le,s),c=Ee(Le,s),[o,u]=i.useState(null),[d,f]=i.useState(null),p=G(r,b=>f(b)),h=Dt(s),m=i.useRef(!1),N=i.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:w,focusSelectedItem:j}=c,C=i.useCallback(()=>{if(l.trigger&&l.valueNode&&o&&d&&x&&v&&w){const b=l.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),I=l.valueNode.getBoundingClientRect(),y=w.getBoundingClientRect();if(l.dir!=="rtl"){const W=y.left-E.left,H=I.left-W,re=b.left-H,Ie=b.width+re,Lt=Math.max(Ie,E.width),_t=window.innerWidth-se,Mt=Fr(H,[se,Math.max(se,_t-Lt)]);o.style.minWidth=Ie+"px",o.style.left=Mt+"px"}else{const W=E.right-y.right,H=window.innerWidth-I.right-W,re=window.innerWidth-b.right-H,Ie=b.width+re,Lt=Math.max(Ie,E.width),_t=window.innerWidth-se,Mt=Fr(H,[se,Math.max(se,_t-Lt)]);o.style.minWidth=Ie+"px",o.style.right=Mt+"px"}const S=h(),R=window.innerHeight-se*2,A=x.scrollHeight,O=window.getComputedStyle(d),L=parseInt(O.borderTopWidth,10),k=parseInt(O.paddingTop,10),_=parseInt(O.borderBottomWidth,10),$=parseInt(O.paddingBottom,10),M=L+k+A+$+_,Z=Math.min(v.offsetHeight*5,M),Pe=window.getComputedStyle(x),qe=parseInt(Pe.paddingTop,10),Xe=parseInt(Pe.paddingBottom,10),ge=b.top+b.height/2-se,_e=R-ge,Te=v.offsetHeight/2,D=v.offsetTop+Te,B=L+k+D,q=M-B;if(B<=ge){const W=S.length>0&&v===S[S.length-1].ref.current;o.style.bottom="0px";const H=d.clientHeight-x.offsetTop-x.offsetHeight,re=Math.max(_e,Te+(W?Xe:0)+H+_),Ie=B+re;o.style.height=Ie+"px"}else{const W=S.length>0&&v===S[0].ref.current;o.style.top="0px";const re=Math.max(ge,L+x.offsetTop+(W?qe:0)+Te)+q;o.style.height=re+"px",x.scrollTop=B-ge+x.offsetTop}o.style.margin=`${se}px 0`,o.style.minHeight=Z+"px",o.style.maxHeight=R+"px",n?.(),requestAnimationFrame(()=>m.current=!0)}},[h,l.trigger,l.valueNode,o,d,x,v,w,l.dir,n]);J(()=>C(),[C]);const[P,T]=i.useState();J(()=>{d&&T(window.getComputedStyle(d).zIndex)},[d]);const g=i.useCallback(b=>{b&&N.current===!0&&(C(),j?.(),N.current=!1)},[C,j]);return e.jsx(Vc,{scope:s,contentWrapper:o,shouldExpandOnScrollRef:m,onScrollButtonChange:g,children:e.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:e.jsx(te.div,{...a,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});gn.displayName=Wc;var Bc="SelectPopperPosition",sr=i.forwardRef((t,r)=>{const{__scopeSelect:s,align:n="start",collisionPadding:a=se,...l}=t,c=$t(s);return e.jsx(mi,{...c,...l,ref:r,align:n,collisionPadding:a,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});sr.displayName=Bc;var[Vc,Pr]=Ye(Le,{}),nr="SelectViewport",bn=i.forwardRef((t,r)=>{const{__scopeSelect:s,nonce:n,...a}=t,l=Ee(nr,s),c=Pr(nr,s),o=G(r,l.onViewportChange),u=i.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(kt.Slot,{scope:s,children:e.jsx(te.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:U(a.onScroll,d=>{const f=d.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:h}=c;if(h?.current&&p){const m=Math.abs(u.current-f.scrollTop);if(m>0){const N=window.innerHeight-se*2,x=parseFloat(p.style.minHeight),v=parseFloat(p.style.height),w=Math.max(x,v);if(w<N){const j=w+m,C=Math.min(N,j),P=j-C;p.style.height=C+"px",p.style.bottom==="0px"&&(f.scrollTop=P>0?P:0,p.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});bn.displayName=nr;var vn="SelectGroup",[Hc,Uc]=Ye(vn),zc=i.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t,a=br();return e.jsx(Hc,{scope:s,id:a,children:e.jsx(te.div,{role:"group","aria-labelledby":a,...n,ref:r})})});zc.displayName=vn;var yn="SelectLabel",Nn=i.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t,a=Uc(yn,s);return e.jsx(te.div,{id:a.id,...n,ref:r})});Nn.displayName=yn;var jt="SelectItem",[Gc,jn]=Ye(jt),wn=i.forwardRef((t,r)=>{const{__scopeSelect:s,value:n,disabled:a=!1,textValue:l,...c}=t,o=Ce(jt,s),u=Ee(jt,s),d=o.value===n,[f,p]=i.useState(l??""),[h,m]=i.useState(!1),N=G(r,j=>u.itemRefCallback?.(j,n,a)),x=br(),v=i.useRef("touch"),w=()=>{a||(o.onValueChange(n),o.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Gc,{scope:s,value:n,disabled:a,textId:x,isSelected:d,onItemTextChange:i.useCallback(j=>{p(C=>C||(j?.textContent??"").trim())},[]),children:e.jsx(kt.ItemSlot,{scope:s,value:n,disabled:a,textValue:f,children:e.jsx(te.div,{role:"option","aria-labelledby":x,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...c,ref:N,onFocus:U(c.onFocus,()=>m(!0)),onBlur:U(c.onBlur,()=>m(!1)),onClick:U(c.onClick,()=>{v.current!=="mouse"&&w()}),onPointerUp:U(c.onPointerUp,()=>{v.current==="mouse"&&w()}),onPointerDown:U(c.onPointerDown,j=>{v.current=j.pointerType}),onPointerMove:U(c.onPointerMove,j=>{v.current=j.pointerType,a?u.onItemLeave?.():v.current==="mouse"&&j.currentTarget.focus({preventScroll:!0})}),onPointerLeave:U(c.onPointerLeave,j=>{j.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:U(c.onKeyDown,j=>{u.searchRef?.current!==""&&j.key===" "||(Ac.includes(j.key)&&w(),j.key===" "&&j.preventDefault())})})})})});wn.displayName=jt;var Ze="SelectItemText",Sn=i.forwardRef((t,r)=>{const{__scopeSelect:s,className:n,style:a,...l}=t,c=Ce(Ze,s),o=Ee(Ze,s),u=jn(Ze,s),d=$c(Ze,s),[f,p]=i.useState(null),h=G(r,w=>p(w),u.onItemTextChange,w=>o.itemTextRefCallback?.(w,u.value,u.disabled)),m=f?.textContent,N=i.useMemo(()=>e.jsx("option",{value:u.value,disabled:u.disabled,children:m},u.value),[u.disabled,u.value,m]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=d;return J(()=>(x(N),()=>v(N)),[x,v,N]),e.jsxs(e.Fragment,{children:[e.jsx(te.span,{id:u.textId,...l,ref:h}),u.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Ct.createPortal(l.children,c.valueNode):null]})});Sn.displayName=Ze;var Cn="SelectItemIndicator",En=i.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t;return jn(Cn,s).isSelected?e.jsx(te.span,{"aria-hidden":!0,...n,ref:r}):null});En.displayName=Cn;var ar="SelectScrollUpButton",Pn=i.forwardRef((t,r)=>{const s=Ee(ar,t.__scopeSelect),n=Pr(ar,t.__scopeSelect),[a,l]=i.useState(!1),c=G(r,n.onScrollButtonChange);return J(()=>{if(s.viewport&&s.isPositioned){let o=function(){const d=u.scrollTop>0;l(d)};const u=s.viewport;return o(),u.addEventListener("scroll",o),()=>u.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),a?e.jsx(In,{...t,ref:c,onAutoScroll:()=>{const{viewport:o,selectedItem:u}=s;o&&u&&(o.scrollTop=o.scrollTop-u.offsetHeight)}}):null});Pn.displayName=ar;var lr="SelectScrollDownButton",Tn=i.forwardRef((t,r)=>{const s=Ee(lr,t.__scopeSelect),n=Pr(lr,t.__scopeSelect),[a,l]=i.useState(!1),c=G(r,n.onScrollButtonChange);return J(()=>{if(s.viewport&&s.isPositioned){let o=function(){const d=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<d;l(f)};const u=s.viewport;return o(),u.addEventListener("scroll",o),()=>u.removeEventListener("scroll",o)}},[s.viewport,s.isPositioned]),a?e.jsx(In,{...t,ref:c,onAutoScroll:()=>{const{viewport:o,selectedItem:u}=s;o&&u&&(o.scrollTop=o.scrollTop+u.offsetHeight)}}):null});Tn.displayName=lr;var In=i.forwardRef((t,r)=>{const{__scopeSelect:s,onAutoScroll:n,...a}=t,l=Ee("SelectScrollButton",s),c=i.useRef(null),o=Dt(s),u=i.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return i.useEffect(()=>()=>u(),[u]),J(()=>{o().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),e.jsx(te.div,{"aria-hidden":!0,...a,ref:r,style:{flexShrink:0,...a.style},onPointerDown:U(a.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(n,50))}),onPointerMove:U(a.onPointerMove,()=>{l.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(n,50))}),onPointerLeave:U(a.onPointerLeave,()=>{u()})})}),Kc="SelectSeparator",Rn=i.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t;return e.jsx(te.div,{"aria-hidden":!0,...n,ref:r})});Rn.displayName=Kc;var or="SelectArrow",Yc=i.forwardRef((t,r)=>{const{__scopeSelect:s,...n}=t,a=$t(s),l=Ce(or,s),c=Ee(or,s);return l.open&&c.position==="popper"?e.jsx(fi,{...a,...n,ref:r}):null});Yc.displayName=or;var qc="SelectBubbleInput",An=i.forwardRef(({__scopeSelect:t,value:r,...s},n)=>{const a=i.useRef(null),l=G(n,a),c=Oi(r);return i.useEffect(()=>{const o=a.current;if(!o)return;const u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(c!==r&&f){const p=new Event("change",{bubbles:!0});f.call(o,r),o.dispatchEvent(p)}},[c,r]),e.jsx(te.select,{...s,style:{...Xs,...s.style},ref:l,defaultValue:r})});An.displayName=qc;function On(t){return t===""||t===void 0}function kn(t){const r=ke(t),s=i.useRef(""),n=i.useRef(0),a=i.useCallback(c=>{const o=s.current+c;r(o),function u(d){s.current=d,window.clearTimeout(n.current),d!==""&&(n.current=window.setTimeout(()=>u(""),1e3))}(o)},[r]),l=i.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return i.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,a,l]}function Dn(t,r,s){const a=r.length>1&&Array.from(r).every(d=>d===r[0])?r[0]:r,l=s?t.indexOf(s):-1;let c=Xc(t,Math.max(l,0));a.length===1&&(c=c.filter(d=>d!==s));const u=c.find(d=>d.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==s?u:void 0}function Xc(t,r){return t.map((s,n)=>t[(r+n)%t.length])}var Zc=ln,$n=cn,Qc=un,Jc=mn,ed=fn,Ln=xn,td=bn,_n=Nn,Mn=wn,rd=Sn,sd=En,Fn=Pn,Wn=Tn,Bn=Rn;const ir=Zc,cr=Qc,wt=i.forwardRef(({className:t,children:r,...s},n)=>e.jsxs($n,{ref:n,className:Y("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[r,e.jsx(Jc,{asChild:!0,children:e.jsx(fs,{className:"h-4 w-4 opacity-50"})})]}));wt.displayName=$n.displayName;const Vn=i.forwardRef(({className:t,...r},s)=>e.jsx(Fn,{ref:s,className:Y("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(Qn,{className:"h-4 w-4"})}));Vn.displayName=Fn.displayName;const Hn=i.forwardRef(({className:t,...r},s)=>e.jsx(Wn,{ref:s,className:Y("flex cursor-default items-center justify-center py-1",t),...r,children:e.jsx(fs,{className:"h-4 w-4"})}));Hn.displayName=Wn.displayName;const St=i.forwardRef(({className:t,children:r,position:s="popper",...n},a)=>e.jsx(ed,{children:e.jsxs(Ln,{ref:a,className:Y("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...n,children:[e.jsx(Vn,{}),e.jsx(td,{className:Y("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),e.jsx(Hn,{})]})}));St.displayName=Ln.displayName;const nd=i.forwardRef(({className:t,...r},s)=>e.jsx(_n,{ref:s,className:Y("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...r}));nd.displayName=_n.displayName;const fe=i.forwardRef(({className:t,children:r,...s},n)=>e.jsxs(Mn,{ref:n,className:Y("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(sd,{children:e.jsx(Jn,{className:"h-4 w-4"})})}),e.jsx(rd,{children:r})]}));fe.displayName=Mn.displayName;const ad=i.forwardRef(({className:t,...r},s)=>e.jsx(Bn,{ref:s,className:Y("-mx-1 my-1 h-px bg-muted",t),...r}));ad.displayName=Bn.displayName;const Qe=i.forwardRef(({className:t,value:r=0,max:s=100,...n},a)=>e.jsx("div",{ref:a,className:Y("relative h-2 w-full overflow-hidden rounded-full bg-gray-200",t),...n,children:e.jsx("div",{className:"h-full w-full flex-1 bg-primary-600 transition-all duration-300 ease-in-out",style:{transform:`translateX(-${100-r/s*100}%)`}})}));Qe.displayName="Progress";const ld=Pt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-500 text-white hover:bg-green-600"}},defaultVariants:{variant:"default"}});function Je({className:t,variant:r,...s}){return e.jsx("div",{className:Y(ld({variant:r}),t),...s})}const od=Pt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-red-200 bg-red-50 text-red-800 [&>svg]:text-red-600"}},defaultVariants:{variant:"default"}}),Un=i.forwardRef(({className:t,variant:r,...s},n)=>e.jsx("div",{ref:n,role:"alert",className:Y(od({variant:r}),t),...s}));Un.displayName="Alert";const zn=i.forwardRef(({className:t,...r},s)=>e.jsx("div",{ref:s,className:Y("text-sm [&_p]:leading-relaxed",t),...r}));zn.displayName="AlertDescription";const id=({conservatoryName:t="××¨×›×– ×”××•×¡×™×§×” ×¨×¢× × ×”",directorName:r="×œ×™××•×¨ ××§×˜×¢",recitalField:s,recitalUnits:n,studentName:a,studentId:l,onRecitalFieldChange:c,onRecitalUnitsChange:o,onStudentNameChange:u,onStudentIdChange:d})=>e.jsxs(Q,{className:"p-6 mb-6 border-2 border-blue-200",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-blue-800 mb-2",children:"××©×¨×“ ×”×—×™× ×•×š"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-1",children:"××’×Ÿ ×‘×’×¨×•×ª - ××•×¡×™×§×”"}),e.jsx("div",{className:"text-lg text-gray-700",children:t}),e.jsxs("div",{className:"text-md text-gray-600 mt-2",children:["×× ×”×œ/×ª: ",r]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(z,{htmlFor:"recital-field",className:"text-right block mb-2 font-semibold",children:"×ª×—×•× ×”×¨×¡×™×˜×œ"}),e.jsxs(ir,{value:s,onValueChange:c,children:[e.jsx(wt,{id:"recital-field",className:"text-right",children:e.jsx(cr,{placeholder:"×‘×—×¨ ×ª×—×•× ×¨×¡×™×˜×œ"})}),e.jsxs(St,{children:[e.jsx(fe,{value:"×§×œ××¡×™",children:"×§×œ××¡×™"}),e.jsx(fe,{value:"×’'××–",children:"×’'××–"}),e.jsx(fe,{value:"×©×™×¨×”",children:"×©×™×¨×”"})]})]})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"recital-units",className:"text-right block mb-2 font-semibold",children:"×™×—×™×“×•×ª ×œ×™××•×“"}),e.jsxs(ir,{value:n?.toString(),onValueChange:f=>o?.(parseInt(f)),children:[e.jsx(wt,{id:"recital-units",className:"text-right",children:e.jsx(cr,{placeholder:"×‘×—×¨ ××¡×¤×¨ ×™×—×™×“×•×ª"})}),e.jsxs(St,{children:[e.jsx(fe,{value:"3",children:"3 ×™×—×™×“×•×ª"}),e.jsx(fe,{value:"5",children:"5 ×™×—×™×“×•×ª"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(z,{htmlFor:"student-name",className:"text-right block mb-2 font-semibold",children:"×©× ×”×ª×œ××™×“/×”"}),e.jsx(V,{id:"student-name",value:a||"",onChange:f=>u?.(f.target.value),placeholder:"×”×›× ×¡ ×©× ×”×ª×œ××™×“",className:"text-right",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"student-id",className:"text-right block mb-2 font-semibold",children:"×ª×¢×•×“×ª ×–×”×•×ª"}),e.jsx(V,{id:"student-id",value:l||"",onChange:f=>d?.(f.target.value),placeholder:"×”×›× ×¡ ××¡×¤×¨ ×ª×¢×•×“×ª ×–×”×•×ª",className:"text-right",dir:"rtl"})]})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"text-sm text-gray-600 text-center",children:[e.jsx("p",{className:"font-semibold mb-1",children:"×”×¢×¨×•×ª ×—×©×•×‘×•×ª:"}),e.jsx("p",{children:"â€¢ ×”×¨×¡×™×˜×œ ×™×›×œ×•×œ 5 ×™×¦×™×¨×•×ª ××ª×§×•×¤×•×ª ×©×•× ×•×ª"}),e.jsx("p",{children:"â€¢ ×ª×œ××™×“×™ 5 ×™×—×™×“×•×ª × ×“×¨×©×™× ×œ×‘×¦×¢ ×™×¦×™×¨×” ××—×ª ×œ×¤×—×•×ª ×‘×¢×œ ×¤×”"}),e.jsx("p",{children:"â€¢ ×”×”×©××¢×•×ª 1-3 ×”×Ÿ ×”×©××¢×•×ª ×”×›× ×”, ×”×”×©××¢×” ×”×¨×‘×™×¢×™×ª ×”×™× ××’×Ÿ ×”×‘×’×¨×•×ª ×”×¡×•×¤×™"})]})})]});function cd({program:t,onChange:r,requiredPieces:s,readonly:n=!1}){const[a,l]=i.useState(null),[c,o]=i.useState(null),[u,d]=i.useState(!1),[f,p]=i.useState({pieceTitle:"",composer:"",duration:"",movement:"",youtubeLink:null}),h=b=>{l(b),o({...t[b]})},m=()=>{l(null),o(null)},N=()=>{if(a!==null&&c){const b=[...t];b[a]=c,r(b),l(null),o(null)}},x=b=>{if(window.confirm("×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ×™×¦×™×¨×” ×–×•?")){const E=t.filter((I,y)=>y!==b);r(E)}},v=()=>{if(f.pieceTitle&&f.composer&&f.duration){const b=[...t,f];r(b),p({pieceTitle:"",composer:"",duration:"",movement:"",youtubeLink:null}),d(!1)}},w=()=>{p({pieceTitle:"",composer:"",duration:"",movement:"",youtubeLink:null}),d(!1)},j=b=>{const E=b.split(":");return E.length===2?parseInt(E[0])*60+parseInt(E[1]):0},C=b=>{const E=Math.floor(b/60),I=b%60;return`${E}:${I.toString().padStart(2,"0")}`},P=()=>{const b=t.reduce((E,I)=>E+j(I.duration),0);return C(b)},T=b=>b?/^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/).+/.test(b):!0,g=(b,E)=>{const I=a===E;return e.jsx(Q,{padding:"md",className:"relative",children:e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:"flex-1",children:I?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×©× ×”×™×¦×™×¨×” *"}),e.jsx("input",{type:"text",value:c?.pieceTitle||"",onChange:y=>o(S=>S?{...S,pieceTitle:y.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×©× ×”×™×¦×™×¨×”"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"××œ×—×™×Ÿ *"}),e.jsx("input",{type:"text",value:c?.composer||"",onChange:y=>o(S=>S?{...S,composer:y.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×©× ×”××œ×—×™×Ÿ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"××©×š ×–××Ÿ *"}),e.jsx("input",{type:"text",value:c?.duration||"",onChange:y=>o(S=>S?{...S,duration:y.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"5:30",pattern:"[0-9]+:[0-9]{2}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×¤×¨×§ (××•×¤×¦×™×•× ×œ×™)"}),e.jsx("input",{type:"text",value:c?.movement||"",onChange:y=>o(S=>S?{...S,movement:y.target.value}:null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×¤×¨×§ ×¨××©×•×Ÿ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×§×™×©×•×¨ YouTube (××•×¤×¦×™×•× ×œ×™)"}),e.jsx("input",{type:"url",value:c?.youtubeLink||"",onChange:y=>o(S=>S?{...S,youtubeLink:y.target.value||null}:null),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ${c?.youtubeLink&&!T(c.youtubeLink)?"border-red-300 focus:ring-red-500":"border-gray-300"}`,placeholder:"https://www.youtube.com/watch?v=..."}),c?.youtubeLink&&!T(c.youtubeLink)&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"×§×™×©×•×¨ YouTube ×œ× ×ª×§×™×Ÿ"})]})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:b.pieceTitle}),e.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[e.jsx(Ue,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-sm",children:b.composer}),b.movement&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"â€¢"}),e.jsx("span",{className:"text-sm",children:b.movement})]})]}),e.jsxs("div",{className:"flex items-center text-gray-500 text-sm mb-3",children:[e.jsx(ne,{className:"w-4 h-4 mr-1"}),b.duration]}),b.youtubeLink&&e.jsxs("a",{href:b.youtubeLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-red-600 hover:text-red-800 text-sm",children:[e.jsx(ea,{className:"w-4 h-4 mr-1"}),"×¦×¤×” ×‘-YouTube",e.jsx(ta,{className:"w-3 h-3 mr-1"})]})]})}),!n&&e.jsx("div",{className:"flex items-center gap-2 mr-4",children:I?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:N,disabled:!c?.pieceTitle||!c?.composer||!c?.duration,className:"p-2 text-green-600 hover:text-green-800 disabled:text-gray-400",children:e.jsx(fr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:m,className:"p-2 text-gray-600 hover:text-gray-800",children:e.jsx(ht,{className:"w-4 h-4"})})]}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>h(E),className:"p-2 text-primary-600 hover:text-primary-800",children:e.jsx(mr,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(E),className:"p-2 text-red-600 hover:text-red-800",children:e.jsx(pr,{className:"w-4 h-4"})})]})})]})},E)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(X,{className:"w-6 h-6 mr-3 text-primary-600"}),"×ª×•×›× ×™×ª ×”×‘×’×¨×•×ª"]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:'×¡×”"×› ×–××Ÿ:'})," ",P()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"×™×¦×™×¨×•×ª:"})," ",t.length]}),!n&&e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"×”×•×¡×£ ×™×¦×™×¨×”"]})]})]}),e.jsx(Q,{padding:"md",className:"bg-blue-50 border-blue-200",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(X,{className:"w-5 h-5 text-blue-600 mr-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-900 mb-2",children:"×“×¨×™×©×•×ª ×”×ª×•×›× ×™×ª"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ ×œ×¤×—×•×ª 3 ×™×¦×™×¨×•×ª ×©×•× ×•×ª"}),e.jsx("li",{children:"â€¢ ××©×š ×–××Ÿ ××™× ×™××œ×™: 15 ×“×§×•×ª"}),e.jsx("li",{children:"â€¢ ×œ×›×œ ×™×¦×™×¨×” ×—×™×™×‘ ×œ×”×™×•×ª ×§×™×©×•×¨ ×œ×”×©××¢×” (××•××œ×¥ YouTube)"}),e.jsx("li",{children:"â€¢ ×™×© ×œ×¦×™×™×Ÿ ×¤×¨×§ ×¡×¤×¦×™×¤×™ ×× ×”×™×¦×™×¨×” ××•×¨×›×‘×ª ××›××” ×¤×¨×§×™×"})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-6",children:[e.jsxs("div",{className:`flex items-center text-sm ${t.length>=3?"text-green-700":"text-red-700"}`,children:[e.jsx("span",{className:"font-medium",children:"×™×¦×™×¨×•×ª:"}),e.jsxs("span",{className:"mr-1",children:[t.length,"/3 (××™× ×™××•×)"]}),t.length>=3?" âœ“":" âš ï¸"]}),e.jsxs("div",{className:`flex items-center text-sm ${j(P())>=900?"text-green-700":"text-red-700"}`,children:[e.jsx("span",{className:"font-medium",children:"×–××Ÿ ×›×•×œ×œ:"}),e.jsxs("span",{className:"mr-1",children:[P()," (××™× ×™××•× 15:00)"]}),j(P())>=900?" âœ“":" âš ï¸"]})]})]})]})}),u&&!n&&e.jsxs(Q,{padding:"md",className:"border-2 border-primary-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"×”×•×¡×¤×ª ×™×¦×™×¨×” ×—×“×©×”"}),e.jsx("button",{onClick:w,className:"text-gray-500 hover:text-gray-700",children:e.jsx(ht,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×©× ×”×™×¦×™×¨×” *"}),e.jsx("input",{type:"text",value:f.pieceTitle,onChange:b=>p(E=>({...E,pieceTitle:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×©× ×”×™×¦×™×¨×”"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"××œ×—×™×Ÿ *"}),e.jsx("input",{type:"text",value:f.composer,onChange:b=>p(E=>({...E,composer:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×©× ×”××œ×—×™×Ÿ"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"××©×š ×–××Ÿ * (×“×§:×©× )"}),e.jsx("input",{type:"text",value:f.duration,onChange:b=>p(E=>({...E,duration:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"5:30",pattern:"[0-9]+:[0-9]{2}"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×¤×¨×§ (××•×¤×¦×™×•× ×œ×™)"}),e.jsx("input",{type:"text",value:f.movement||"",onChange:b=>p(E=>({...E,movement:b.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"×¤×¨×§ ×¨××©×•×Ÿ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"×§×™×©×•×¨ YouTube (××•×¤×¦×™×•× ×œ×™)"}),e.jsx("input",{type:"url",value:f.youtubeLink||"",onChange:b=>p(E=>({...E,youtubeLink:b.target.value||null})),className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 ${f.youtubeLink&&!T(f.youtubeLink)?"border-red-300 focus:ring-red-500":"border-gray-300"}`,placeholder:"https://www.youtube.com/watch?v=..."}),f.youtubeLink&&!T(f.youtubeLink)&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:"×§×™×©×•×¨ YouTube ×œ× ×ª×§×™×Ÿ"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"×‘×™×˜×•×œ"}),e.jsx("button",{onClick:v,disabled:!f.pieceTitle||!f.composer||!f.duration,className:"px-4 py-2 bg-primary-500 text-white rounded-md hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed",children:"×”×•×¡×£ ×™×¦×™×¨×”"})]})]})]}),t.length>0?e.jsx("div",{className:"space-y-4",children:t.map((b,E)=>g(b,E))}):e.jsx(Q,{padding:"md",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(X,{className:"w-16 h-16 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-2",children:"××™×Ÿ ×™×¦×™×¨×•×ª ×‘×ª×•×›× ×™×ª"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"×”×•×¡×£ ×™×¦×™×¨×•×ª ×œ×ª×•×›× ×™×ª ×”×‘×’×¨×•×ª ×©×œ×š"}),!n&&e.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors",children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"×”×•×¡×£ ×™×¦×™×¨×” ×¨××©×•× ×”"]})]})})]})}const Tr=i.forwardRef(({className:t,...r},s)=>e.jsx("textarea",{className:Y("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r}));Tr.displayName="Textarea";const dd=({magenBagrut:t={},onUpdate:r,readonly:s=!1})=>{const[n,a]=i.useState({date:t.date,review:t.review||"",reviewedBy:t.reviewedBy||"",recordingLinks:t.recordingLinks||[""],completed:t.completed||!1,status:t.status||"pending",grade:t.grade,gradeLevel:t.gradeLevel,detailedGrading:{playingSkills:{points:t?.detailedGrading?.playingSkills?.points||void 0,maxPoints:40,comments:t?.detailedGrading?.playingSkills?.comments||""},musicalUnderstanding:{points:t?.detailedGrading?.musicalUnderstanding?.points||void 0,maxPoints:30,comments:t?.detailedGrading?.musicalUnderstanding?.comments||""},textKnowledge:{points:t?.detailedGrading?.textKnowledge?.points||void 0,maxPoints:20,comments:t?.detailedGrading?.textKnowledge?.comments||""},playingByHeart:{points:t?.detailedGrading?.playingByHeart?.points||void 0,maxPoints:10,comments:t?.detailedGrading?.playingByHeart?.comments||""}}}),[l,c]=i.useState({examiner1:"",examiner2:"",examiner3:""});i.useEffect(()=>{const x=o(),v={...n,grade:x,gradeLevel:u(x)};a(v),r(v)},[n.detailedGrading?.playingSkills.points,n.detailedGrading?.musicalUnderstanding.points,n.detailedGrading?.textKnowledge.points,n.detailedGrading?.playingByHeart.points]);const o=()=>{const{playingSkills:x,musicalUnderstanding:v,textKnowledge:w,playingByHeart:j}=n.detailedGrading;return(x.points||0)+(v.points||0)+(w.points||0)+(j.points||0)},u=x=>x>=95?"××¦×•×™×Ÿ (95-100)":x>=85?"×˜×•×‘ ×××•×“ (85-94)":x>=75?"×˜×•×‘ (75-84)":x>=65?"×›××¢×˜ ×˜×•×‘ (65-74)":x>=55?"××¡×¤×§ (55-64)":x>=45?"×›××¢×˜ ××¡×¤×§ (45-54)":x>=35?"×œ× ××¡×¤×§ (35-44)":"×’×¨×•×¢ (0-34)",d=(x,v)=>{const w={...n,[x]:v};a(w),r(w)},f=(x,v,w)=>{const j={...n,detailedGrading:{...n.detailedGrading,[x]:{...n.detailedGrading[x],[v]:w}}};a(j),r(j)},p=(x,v)=>{const w=[...n.recordingLinks||[""]];w[x]=v,x===w.length-1&&v&&w.push(""),d("recordingLinks",w.filter((j,C)=>j||C===w.length-1))},h=x=>x?new Date(x).toISOString().split("T")[0]:"",m=x=>x?new Date(x):void 0,N=()=>{const{playingSkills:x,musicalUnderstanding:v,textKnowledge:w,playingByHeart:j}=n.detailedGrading;return x.points!==void 0&&v.points!==void 0&&w.points!==void 0&&j.points!==void 0&&n.date&&n.reviewedBy};return e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(pt,{className:"w-6 h-6 ml-3 text-gold-600"}),"××’×Ÿ ×‘×’×¨×•×ª - ×”×©××¢×” ×¡×•×¤×™×ª"]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.completed?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:n.completed?"×”×•×©×œ××”":"×˜×¨× ×”×•×©×œ××”"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs(z,{htmlFor:"magen-date",className:"text-right block mb-2 font-semibold",children:[e.jsx(Et,{className:"w-4 h-4 inline ml-2"}),"×ª××¨×™×š ××’×Ÿ ×”×‘×’×¨×•×ª"]}),e.jsx(V,{id:"magen-date",type:"date",value:h(n.date),onChange:x=>d("date",m(x.target.value)),disabled:s,className:"text-right"})]}),e.jsxs("div",{children:[e.jsxs(z,{htmlFor:"magen-reviewedBy",className:"text-right block mb-2 font-semibold",children:[e.jsx(Ae,{className:"w-4 h-4 inline ml-2"}),"×•×¢×“×ª ×”×‘×•×—× ×™×"]}),e.jsx(V,{id:"magen-reviewedBy",value:n.reviewedBy||"",onChange:x=>d("reviewedBy",x.target.value),placeholder:"×©××•×ª ×”×‘×•×—× ×™× ×‘×•×•×¢×“×”",disabled:s,className:"text-right",dir:"rtl"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4",children:"×˜×‘×œ×ª ×¦×™×•× ×™× - ××’×Ÿ ×‘×’×¨×•×ª ×‘××•×¡×™×§×”"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border-2 border-gray-400",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-100",children:[e.jsx("th",{className:"border-2 border-gray-400 px-4 py-3 text-right font-bold text-gray-900",children:"×§×¨×™×˜×¨×™×•×Ÿ ×”×¢×¨×›×”"}),e.jsx("th",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-gray-900",children:"× ×™×§×•×“ ××§×¡×™××œ×™"}),e.jsx("th",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-gray-900",children:"× ×™×§×•×“ ×©×”×ª×§×‘×œ"}),e.jsx("th",{className:"border-2 border-gray-400 px-4 py-3 text-right font-bold text-gray-900",children:"×”×¢×¨×•×ª"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-semibold text-right",children:"××™×•×× ×•×ª × ×’×™× ×”"}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-lg",children:"40"}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2 text-center",children:e.jsx(V,{type:"number",min:"0",max:"40",value:n.detailedGrading?.playingSkills.points||"",onChange:x=>f("playingSkills","points",parseInt(x.target.value)||0),disabled:s,className:"w-20 mx-auto text-center font-bold text-lg border-2 focus:border-blue-500"})}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2",children:e.jsx(V,{value:n.detailedGrading?.playingSkills.comments||"",onChange:x=>f("playingSkills","comments",x.target.value),disabled:s,placeholder:"×”×¢×¨×•×ª ×¢×œ ××™×•×× ×•×ª ×”× ×’×™× ×”",className:"border-0 text-right text-sm",dir:"rtl"})})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-semibold text-right",children:"×”×‘× ×” ××•×¡×™×§×œ×™×ª"}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-lg",children:"30"}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2 text-center",children:e.jsx(V,{type:"number",min:"0",max:"30",value:n.detailedGrading?.musicalUnderstanding.points||"",onChange:x=>f("musicalUnderstanding","points",parseInt(x.target.value)||0),disabled:s,className:"w-20 mx-auto text-center font-bold text-lg border-2 focus:border-blue-500"})}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2",children:e.jsx(V,{value:n.detailedGrading?.musicalUnderstanding.comments||"",onChange:x=>f("musicalUnderstanding","comments",x.target.value),disabled:s,placeholder:"×”×¢×¨×•×ª ×¢×œ ×”×‘× ×” ××•×¡×™×§×œ×™×ª",className:"border-0 text-right text-sm",dir:"rtl"})})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-semibold text-right",children:"×™×“×™×¢×ª ×”×˜×§×¡×˜"}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-lg",children:"20"}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2 text-center",children:e.jsx(V,{type:"number",min:"0",max:"20",value:n.detailedGrading?.textKnowledge.points||"",onChange:x=>f("textKnowledge","points",parseInt(x.target.value)||0),disabled:s,className:"w-20 mx-auto text-center font-bold text-lg border-2 focus:border-blue-500"})}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2",children:e.jsx(V,{value:n.detailedGrading?.textKnowledge.comments||"",onChange:x=>f("textKnowledge","comments",x.target.value),disabled:s,placeholder:"×”×¢×¨×•×ª ×¢×œ ×™×“×™×¢×ª ×”×˜×§×¡×˜",className:"border-0 text-right text-sm",dir:"rtl"})})]}),e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-semibold text-right",children:'× ×’×™× ×” ×‘×¢"×¤'}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-lg",children:"10"}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2 text-center",children:e.jsx(V,{type:"number",min:"0",max:"10",value:n.detailedGrading?.playingByHeart.points||"",onChange:x=>f("playingByHeart","points",parseInt(x.target.value)||0),disabled:s,className:"w-20 mx-auto text-center font-bold text-lg border-2 focus:border-blue-500"})}),e.jsx("td",{className:"border-2 border-gray-400 px-2 py-2",children:e.jsx(V,{value:n.detailedGrading?.playingByHeart.comments||"",onChange:x=>f("playingByHeart","comments",x.target.value),disabled:s,placeholder:"×”×¢×¨×•×ª ×¢×œ × ×’×™× ×” ×‘×¢×œ ×¤×”",className:"border-0 text-right text-sm",dir:"rtl"})})]}),e.jsxs("tr",{className:"bg-blue-200",children:[e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 font-bold text-right text-lg",children:'×¡×”"×› ×¦×™×•×Ÿ'}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center font-bold text-xl",children:"100"}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-center",children:e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:o()})}),e.jsx("td",{className:"border-2 border-gray-400 px-4 py-3 text-right",children:e.jsx("div",{className:"font-semibold text-blue-800",children:u(o())})})]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsxs(z,{className:"text-right block mb-2 font-semibold",children:[e.jsx(ra,{className:"w-4 h-4 inline ml-2"}),"×§×™×©×•×¨×™ ×”×§×œ×˜×•×ª ×œ××’×Ÿ"]}),e.jsx("div",{className:"space-y-2",children:(n.recordingLinks||[""]).map((x,v)=>e.jsx(V,{value:x,onChange:w=>p(v,w.target.value),placeholder:`×§×™×©×•×¨ ×”×§×œ×˜×” ${v+1}`,disabled:s,className:"text-left",dir:"ltr"},v))})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"magen-review",className:"text-right block mb-2 font-semibold",children:"×”×¢×¨×•×ª ×›×œ×œ×™×•×ª ×©×œ ×”×•×•×¢×“×”"}),e.jsx(Tr,{id:"magen-review",value:n.review||"",onChange:x=>d("review",x.target.value),placeholder:"×”×¢×¨×•×ª ×›×œ×œ×™×•×ª ×¢×œ ×”×‘×™×¦×•×¢ ×•×”×¨××” ×”×›×œ×œ×™×ª...",disabled:s,className:"text-right min-h-[120px]",dir:"rtl"})]})]}),e.jsxs("div",{className:"mb-6 p-4 border-2 border-gray-300 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"×—×ª×™××•×ª ×•×¢×“×ª ×”×‘×•×—× ×™×"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-right block mb-2",children:"×‘×•×—×Ÿ ×¨××©×™"}),e.jsx(V,{value:l.examiner1,onChange:x=>c(v=>({...v,examiner1:x.target.value})),placeholder:"×—×ª×™××”",disabled:s,className:"text-right",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-right block mb-2",children:"×‘×•×—×Ÿ ×©× ×™"}),e.jsx(V,{value:l.examiner2,onChange:x=>c(v=>({...v,examiner2:x.target.value})),placeholder:"×—×ª×™××”",disabled:s,className:"text-right",dir:"rtl"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-right block mb-2",children:"×‘×•×—×Ÿ ×©×œ×™×©×™"}),e.jsx(V,{value:l.examiner3,onChange:x=>c(v=>({...v,examiner3:x.target.value})),placeholder:"×—×ª×™××”",disabled:s,className:"text-right",dir:"rtl"})]})]})]}),!s&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(hr,{onClick:()=>d("completed",!n.completed),disabled:!N(),variant:n.completed?"destructive":"default",className:"flex items-center",children:n.completed?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"w-4 h-4 ml-2"}),"×‘×˜×œ ×”×©×œ××ª ××’×Ÿ"]}):e.jsxs(e.Fragment,{children:[e.jsx(pt,{className:"w-4 h-4 ml-2"}),"×”×©×œ× ××’×Ÿ ×‘×’×¨×•×ª"]})}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-800",children:["×¦×™×•×Ÿ ×¡×•×¤×™: ",o(),"/100"]}),e.jsx("div",{className:"text-sm text-gray-600",children:u(o())})]})]})]})},ud=({directorEvaluation:t={},directorName:r="×œ×™××•×¨ ××§×˜×¢",onUpdate:s,readonly:n=!1})=>{const[a,l]=i.useState({points:t.points,percentage:t.percentage,comments:t.comments||""}),[c,o]=i.useState(""),[u,d]=i.useState("");i.useEffect(()=>{const m=a.points!==void 0?a.points/10*100:void 0,N={...a,percentage:m};l(N),s(N)},[a.points]);const f=(m,N)=>{const x={...a,[m]:N};l(x),s(x)},p=m=>m>=9?"××¦×•×™×Ÿ":m>=8?"×˜×•×‘ ×××•×“":m>=7?"×˜×•×‘":m>=6?"××¡×¤×§":m>=5?"×›××¢×˜ ××¡×¤×§":"×œ× ××¡×¤×§",h=m=>m>=8?"text-green-700":m>=6?"text-blue-700":m>=5?"text-yellow-700":"text-red-700";return e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center",children:[e.jsx(sa,{className:"w-6 h-6 ml-3 text-blue-600"}),"×”×¢×¨×›×ª ×”×× ×”×œ/×ª"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"××©×§×œ:"})," 10% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"]})]}),e.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(tt,{className:"w-5 h-5 text-blue-600 ml-3 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"×¢×œ ×”×¢×¨×›×ª ×”×× ×”×œ/×ª"}),e.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"×”×¢×¨×›×ª ×”×× ×”×œ/×ª ××”×•×•×” 10% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™ ×‘×‘×’×¨×•×ª ×”××•×¡×™×§×” ×•××‘×•×¡×¡×ª ×¢×œ:"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ ××¢×•×¨×‘×•×ª ×•×”×©×ª×ª×¤×•×ª ×‘×—×™×™ ×‘×™×ª ×”×¡×¤×¨ ×”××•×¡×™×§×œ×™"}),e.jsx("li",{children:"â€¢ ×”×ª×§×“××•×ª ×•×”×ª×¤×ª×—×•×ª ×œ××•×¨×š ×”×©× ×™×"}),e.jsx("li",{children:"â€¢ ×™×—×¡ ×•×”×ª× ×”×’×•×ª ×›×œ×¤×™ ×”×œ××™×“×” ×•×”×—×‘×¨×™×"}),e.jsx("li",{children:"â€¢ ×ª×¨×•××” ×œ×§×”×™×œ×” ×”××•×¡×™×§×œ×™×ª"}),e.jsx("li",{children:"â€¢ ××•×›× ×•×ª ×•×”×§×¤×“×” ×¢×œ ××©×™××•×ª"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(z,{htmlFor:"director-points",className:"text-right block mb-3 font-semibold text-lg",children:"×¦×™×•×Ÿ ×”×× ×”×œ/×ª (0-10 × ×§×•×“×•×ª)"}),e.jsxs("div",{className:"relative",children:[e.jsx(V,{id:"director-points",type:"number",min:"0",max:"10",step:"0.1",value:a.points||"",onChange:m=>f("points",parseFloat(m.target.value)||void 0),disabled:n,className:"text-center text-2xl font-bold h-16 border-2 focus:border-blue-500",placeholder:"0.0"}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"/10"})]}),a.points!==void 0&&e.jsxs("div",{className:`text-center mt-2 font-semibold ${h(a.points)}`,children:[p(a.points),a.percentage!==void 0&&e.jsxs("span",{className:"block text-sm text-gray-600 mt-1",children:["(",a.percentage.toFixed(1),"%)"]})]})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"evaluation-date",className:"text-right block mb-2 font-semibold",children:"×ª××¨×™×š ×”×¢×¨×›×”"}),e.jsx(V,{id:"evaluation-date",type:"date",value:u,onChange:m=>d(m.target.value),disabled:n,className:"text-right"})]}),e.jsxs("div",{children:[e.jsxs(z,{htmlFor:"director-signature",className:"text-right block mb-2 font-semibold",children:[e.jsx(na,{className:"w-4 h-4 inline ml-2"}),"×—×ª×™××ª ×”×× ×”×œ/×ª"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2 text-right",children:r}),e.jsx(V,{id:"director-signature",value:c,onChange:m=>o(m.target.value),placeholder:"×—×ª×™××” ×“×™×’×™×˜×œ×™×ª",disabled:n,className:"text-right",dir:"rtl"})]})]}),e.jsxs("div",{children:[e.jsx(z,{htmlFor:"director-comments",className:"text-right block mb-2 font-semibold",children:"×”×¢×¨×•×ª ×•×”×¡×‘×¨ ×œ×”×¢×¨×›×”"}),e.jsx(Tr,{id:"director-comments",value:a.comments||"",onChange:m=>f("comments",m.target.value),placeholder:"×”×¢×¨×•×ª ×”×× ×”×œ/×ª ×¢×œ ×”×ª×œ××™×“/×”: ×”×ª×§×“××•×ª, ××¢×•×¨×‘×•×ª, ×™×—×¡, ×ª×¨×•××” ×œ×§×”×™×œ×”...",disabled:n,className:"text-right min-h-[200px] resize-y",dir:"rtl"})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-yellow-800 mb-2",children:"×—×™×©×•×‘ ×‘××¡×’×¨×ª ×”×¦×™×•×Ÿ ×”×¡×•×¤×™:"}),e.jsxs("div",{className:"text-sm text-yellow-700",children:[e.jsx("p",{children:"â€¢ ×¦×™×•×Ÿ ××’×Ÿ ×”×‘×’×¨×•×ª: 90% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"}),e.jsx("p",{children:"â€¢ ×”×¢×¨×›×ª ×”×× ×”×œ/×ª: 10% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"}),a.points!==void 0&&e.jsxs("p",{className:"mt-2 font-semibold",children:["×ª×¨×•××” ×œ×¦×™×•×Ÿ ×”×¡×•×¤×™: ",(a.points/10*10).toFixed(1)," × ×§×•×“×•×ª"]})]})]}),e.jsxs("div",{className:"mt-6 p-4 border-2 border-gray-300 rounded-lg",children:[e.jsx("h4",{className:"font-bold text-gray-900 mb-3",children:"×¡×•×œ× ×”×¢×¨×›×”"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between p-2 bg-green-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"××¦×•×™×Ÿ"}),e.jsx("span",{children:"9.0-10.0"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-blue-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"×˜×•×‘ ×××•×“"}),e.jsx("span",{children:"8.0-8.9"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-blue-50 rounded",children:[e.jsx("span",{className:"font-medium",children:"×˜×•×‘"}),e.jsx("span",{children:"7.0-7.9"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-yellow-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"××¡×¤×§"}),e.jsx("span",{children:"6.0-6.9"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-orange-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"×›××¢×˜ ××¡×¤×§"}),e.jsx("span",{children:"5.0-5.9"})]}),e.jsxs("div",{className:"flex justify-between p-2 bg-red-100 rounded",children:[e.jsx("span",{className:"font-medium",children:"×œ× ××¡×¤×§"}),e.jsx("span",{children:"0.0-4.9"})]})]})]}),!n&&a.points!==void 0&&e.jsxs("div",{className:"mt-6 text-center",children:[e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["×”×¢×¨×›×ª ×”×× ×”×œ/×ª: ",a.points,"/10"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:["××©××¢×•×ª: ",p(a.points)," â€¢ ×ª×¨×•××” ×œ×¦×™×•×Ÿ ×”×¡×•×¤×™: ",(a.points/10*10).toFixed(1)," × ×§×•×“×•×ª"]})]})]})},md=({bagrut:t,completionStatus:r,validationErrors:s})=>{const n=()=>{const f=t.presentations?.[3];if(!f?.grade)return 0;const p=f.grade*.9,h=(t.directorEvaluation?.points||0)*.1*10;return Math.round(p+h)},a=f=>{const p=[{level:"××¦×•×™×Ÿ",range:"95-100",description:"×¨××” ×™×•×¦××ª ×“×•×¤×Ÿ",min:95,color:"bg-green-600"},{level:"×˜×•×‘ ×××•×“",range:"85-94",description:"×¨××” ×’×‘×•×”×” ×××•×“",min:85,color:"bg-green-500"},{level:"×˜×•×‘",range:"75-84",description:"×¨××” ×˜×•×‘×”",min:75,color:"bg-blue-500"},{level:"×›××¢×˜ ×˜×•×‘",range:"65-74",description:"×¨××” ××¢×œ ×”×××•×¦×¢",min:65,color:"bg-blue-400"},{level:"××¡×¤×§",range:"55-64",description:"×¨××” ××¡×¤×§×ª",min:55,color:"bg-yellow-500"},{level:"×›××¢×˜ ××¡×¤×§",range:"45-54",description:"×¨××” ××ª×—×ª ×œ×××•×¦×¢",min:45,color:"bg-orange-500"},{level:"×œ× ××¡×¤×§",range:"35-44",description:"×¨××” × ××•×›×”",min:35,color:"bg-red-500"},{level:"×’×¨×•×¢",range:"0-34",description:"×¨××” ×œ× ××ª××™××”",min:0,color:"bg-red-600"}];for(const h of p)if(f>=h.min)return h;return p[p.length-1]},l=n(),c=a(l),o=t.presentations?.[3],u=!!(o?.grade&&t.directorEvaluation?.points);s.filter(f=>f.type==="error").length>0;const d=()=>[{level:"××¦×•×™×Ÿ",range:"95-100",description:"×¨××” ×™×•×¦××ª ×“×•×¤×Ÿ",color:"bg-green-600"},{level:"×˜×•×‘ ×××•×“",range:"85-94",description:"×¨××” ×’×‘×•×”×” ×××•×“",color:"bg-green-500"},{level:"×˜×•×‘",range:"75-84",description:"×¨××” ×˜×•×‘×”",color:"bg-blue-500"},{level:"×›××¢×˜ ×˜×•×‘",range:"65-74",description:"×¨××” ××¢×œ ×”×××•×¦×¢",color:"bg-blue-400"},{level:"××¡×¤×§",range:"55-64",description:"×¨××” ××¡×¤×§×ª",color:"bg-yellow-500"},{level:"×›××¢×˜ ××¡×¤×§",range:"45-54",description:"×¨××” ××ª×—×ª ×œ×××•×¦×¢",color:"bg-orange-500"},{level:"×œ× ××¡×¤×§",range:"35-44",description:"×¨××” × ××•×›×”",color:"bg-red-500"},{level:"×’×¨×•×¢",range:"0-34",description:"×¨××” ×œ× ××ª××™××”",color:"bg-red-600"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[e.jsx(aa,{className:"w-7 h-7 ml-3 text-blue-600"}),"×¡×™×›×•× ×¦×™×•× ×™× - ×‘×’×¨×•×ª ×‘××•×¡×™×§×”"]}),u&&e.jsxs(Je,{variant:"success",className:"text-lg px-4 py-2",children:[e.jsx(Yt,{className:"w-5 h-5 ml-2"}),"×”×•×©×œ×"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-2 border-blue-200",children:[e.jsx(pt,{className:"w-8 h-8 mx-auto text-blue-600 mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"×¦×™×•×Ÿ ××’×Ÿ ×‘×’×¨×•×ª"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-800",children:[o?.grade!==void 0?o.grade:"--","/100"]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"90% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"}),o?.grade!==void 0&&e.jsxs("div",{className:"text-xs text-blue-700 mt-1",children:["×ª×¨×•××”: ",(o.grade*.9).toFixed(1)," × ×§×•×“×•×ª"]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-2 border-green-200",children:[e.jsx(tt,{className:"w-8 h-8 mx-auto text-green-600 mb-2"}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-1",children:"×”×¢×¨×›×ª ×”×× ×”×œ/×ª"}),e.jsxs("div",{className:"text-3xl font-bold text-green-800",children:[t.directorEvaluation?.points!==void 0?t.directorEvaluation.points:"--","/10"]}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"10% ××”×¦×™×•×Ÿ ×”×¡×•×¤×™"}),t.directorEvaluation?.points!==void 0&&e.jsxs("div",{className:"text-xs text-green-700 mt-1",children:["×ª×¨×•××”: ",(t.directorEvaluation.points*.1*10).toFixed(1)," × ×§×•×“×•×ª"]})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:`rounded-lg p-4 border-2 ${u?`${c.color} text-white`:"bg-gray-50 border-gray-200"}`,children:[e.jsx(Yt,{className:"w-8 h-8 mx-auto mb-2"}),e.jsx("h4",{className:"font-semibold mb-1",children:"×¦×™×•×Ÿ ×¡×•×¤×™"}),e.jsxs("div",{className:"text-3xl font-bold",children:[u?l.toFixed(1):"--","/100"]}),u&&e.jsx("div",{className:"text-sm mt-1 font-medium",children:c.level})]})})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3 text-center",children:"× ×•×¡×—×ª ×”×—×™×©×•×‘"}),e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"inline-flex items-center gap-4 text-lg",children:[e.jsxs("div",{className:"bg-blue-100 px-3 py-1 rounded",children:[e.jsx("span",{className:"font-semibold",children:"×¦×™×•×Ÿ ××’×Ÿ ×‘×’×¨×•×ª"})," Ã— 90%"]}),e.jsx("span",{className:"text-xl",children:"+"}),e.jsxs("div",{className:"bg-green-100 px-3 py-1 rounded",children:[e.jsx("span",{className:"font-semibold",children:"×”×¢×¨×›×ª ×”×× ×”×œ/×ª"})," Ã— 10%"]}),e.jsx("span",{className:"text-xl",children:"="}),e.jsx("div",{className:`px-3 py-1 rounded font-bold ${u?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:"×¦×™×•×Ÿ ×¡×•×¤×™"})]})}),u&&e.jsxs("div",{className:"text-center mt-4 text-sm text-gray-700",children:[e.jsxs("div",{className:"font-mono",children:[o.grade," Ã— 0.9 + ",t.directorEvaluation.points," Ã— 1.0 = ",l.toFixed(1)]}),e.jsxs("div",{className:"mt-1",children:["(",(o.grade*.9).toFixed(1)," + ",(t.directorEvaluation.points*1).toFixed(1)," = ",l.toFixed(1),")"]})]}),s.length>0&&e.jsx("div",{className:"mt-4 space-y-2",children:s.map((f,p)=>e.jsxs("div",{className:`flex items-center p-3 rounded-lg ${f.type==="error"?"bg-red-50 border border-red-200 text-red-800":"bg-yellow-50 border border-yellow-200 text-yellow-800"}`,children:[e.jsx(xr,{className:"w-4 h-4 ml-2 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:f.message})]},p))}),r&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"×¡×˜×˜×•×¡ ×”×©×œ××”"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"×”×©××¢×•×ª"}),e.jsxs("div",{className:`text-lg ${r.presentations.completed===4?"text-green-600":"text-gray-600"}`,children:[r.presentations.completed,"/4"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"×ª×›× ×™×ª"}),e.jsxs("div",{className:`text-lg ${r.programPieces.percentage===100?"text-green-600":"text-gray-600"}`,children:[r.programPieces.completed,"/",r.programPieces.required]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold",children:"×”×¢×¨×›×ª ×× ×”×œ"}),e.jsx("div",{className:`text-lg ${r.directorEvaluation.completed?"text-green-600":"text-gray-600"}`,children:r.directorEvaluation.completed?"âœ“":"âœ—"})]})]})]})]}),u&&e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("div",{className:"inline-block p-6 rounded-lg border-2 border-blue-200 bg-blue-50",children:[e.jsx("h4",{className:"text-xl font-bold text-blue-900 mb-2",children:"×ª×•×¦××” ×¡×•×¤×™×ª"}),e.jsx("div",{className:"text-4xl font-bold text-blue-800 mb-2",children:l.toFixed(1)}),e.jsxs("div",{className:"text-lg font-semibold mb-1",children:[c.level," (",c.range,")"]}),e.jsx("div",{className:"text-sm text-blue-700",children:c.description})]})})]}),e.jsxs(Q,{className:"p-6",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4 text-center",children:"×¡×•×œ× ×”×¦×™×•× ×™× - ××©×¨×“ ×”×—×™× ×•×š"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:d().map((f,p)=>e.jsxs("div",{className:`p-3 rounded-lg border-2 ${u&&l>=f.range.split("-")[0]?`${f.color} text-white border-transparent`:"bg-white border-gray-200 text-gray-700"}`,children:[e.jsx("div",{className:"font-semibold text-sm",children:f.level}),e.jsx("div",{className:"text-xs mt-1",children:f.range}),e.jsx("div",{className:"text-xs mt-1 opacity-90",children:f.description})]},p))})]})]})},fd=({student:t,studentId:r,onStudentUpdate:s})=>{const[n,a]=i.useState(null),[l,c]=i.useState(!0),[o,u]=i.useState([]),[d,f]=i.useState(null),p=()=>[{completed:!1,status:"pending",notes:"",recordingLinks:[]},{completed:!1,status:"pending",notes:"",recordingLinks:[]},{completed:!1,status:"pending",notes:"",recordingLinks:[]},{completed:!1,status:"pending",notes:"",recordingLinks:[],grade:0,gradeLevel:""}];i.useEffect(()=>{h()},[r]),i.useEffect(()=>{n&&(m(),N())},[n]);const h=async()=>{c(!0);try{const b={_id:`bagrut_${r}`,studentId:r,teacherId:t.teacherId||"",conservatoryName:"××¨×›×– ×”××•×¡×™×§×” ×¨×¢× × ×”",directorName:"×œ×™××•×¨ ××§×˜×¢",recitalField:void 0,recitalUnits:void 0,program:[],accompaniment:{type:"× ×’×Ÿ ××œ×•×•×”",accompanists:[]},presentations:p(),directorEvaluation:{points:void 0,percentage:void 0,comments:""},isCompleted:!1,isActive:!0,createdAt:new Date,updatedAt:new Date};a(b)}catch(b){console.error("Failed to load Bagrut data:",b)}finally{c(!1)}},m=()=>{if(!n)return;const b=[];n.recitalField||b.push({field:"recitalField",message:"×™×© ×œ×‘×—×•×¨ ×ª×—×•× ×¨×¡×™×˜×œ",type:"error"}),n.recitalUnits||b.push({field:"recitalUnits",message:"×™×© ×œ×‘×—×•×¨ ××¡×¤×¨ ×™×—×™×“×•×ª ×œ×™××•×“",type:"error"});const E=n.recitalUnits===5?5:3;n.program.length<E&&b.push({field:"program",message:`× ×“×¨×©×•×ª ${E} ×™×¦×™×¨×•×ª ×œ×ª×›× ×™×ª`,type:"error"});const I=n.presentations||[];for(let S=1;S<I.length;S++)I[S].completed&&!I[S-1].completed&&b.push({field:`presentation_${S}`,message:`×œ× × ×™×ª×Ÿ ×œ×”×©×œ×™× ×”×©××¢×” ${S+1} ×œ×¤× ×™ ×”×©×œ××ª ×”×©××¢×” ${S}`,type:"error"});const y=I[3];if(y?.completed){const S=y?.detailedGrading;if(S){const R=(S.playingSkills.points||0)+(S.musicalUnderstanding.points||0)+(S.textKnowledge.points||0)+(S.playingByHeart.points||0);R>100&&b.push({field:"magenGrading",message:"×¡×š ×”× ×§×•×“×•×ª ×—×•×¨×’ ×-100",type:"warning"}),R<55&&b.push({field:"magenGrading",message:"×¦×™×•×Ÿ × ××•×š ××”××™× ×™××•× ×”× ×“×¨×©",type:"warning"}),(S.playingSkills.points||0)>S.playingSkills.maxPoints&&b.push({field:"playingSkills",message:`× ×§×•×“×•×ª ××™×•×× ×•×ª × ×’×™× ×” ×—×•×¨×’×•×ª ××”××§×¡×™××•× (${S.playingSkills.maxPoints})`,type:"error"}),(S.musicalUnderstanding.points||0)>S.musicalUnderstanding.maxPoints&&b.push({field:"musicalUnderstanding",message:`× ×§×•×“×•×ª ×”×‘× ×” ××•×¡×™×§×œ×™×ª ×—×•×¨×’×•×ª ××”××§×¡×™××•× (${S.musicalUnderstanding.maxPoints})`,type:"error"}),(S.textKnowledge.points||0)>S.textKnowledge.maxPoints&&b.push({field:"textKnowledge",message:`× ×§×•×“×•×ª ×™×“×™×¢×ª ×˜×§×¡×˜ ×—×•×¨×’×•×ª ××”××§×¡×™××•× (${S.textKnowledge.maxPoints})`,type:"error"}),(S.playingByHeart.points||0)>S.playingByHeart.maxPoints&&b.push({field:"playingByHeart",message:`× ×§×•×“×•×ª × ×’×™× ×” ×‘×¢×´×¤ ×—×•×¨×’×•×ª ××”××§×¡×™××•× (${S.playingByHeart.maxPoints})`,type:"error"})}}I.filter(S=>S.completed).length===4&&(n.directorEvaluation?.points||b.push({field:"directorEvaluation",message:"× ×“×¨×©×ª ×”×¢×¨×›×ª ×× ×”×œ ×œ×¤× ×™ ×¡×™×•× ×”×ª×”×œ×™×š",type:"error"})),n.recitalUnits===5&&!n.program.some(R=>R.movement?.toLowerCase().includes("×‘×¢×œ ×¤×”")||R.pieceTitle?.toLowerCase().includes("×‘×¢×œ ×¤×”"))&&n.program.length>=5&&b.push({field:"program",message:"×ª×œ××™×“×™ 5 ×™×—×™×“×•×ª × ×“×¨×©×™× ×œ×‘×¦×¢ ×™×¦×™×¨×” ××—×ª ×œ×¤×—×•×ª ×‘×¢×œ ×¤×”",type:"warning"}),u(b)},N=()=>{if(!n)return;const E=(n.presentations||[]).filter(k=>k.completed).length,I=n.recitalUnits===5?5:3,y=Math.min(n.program.length/I*100,100),S=!!n.directorEvaluation?.points,R=E/4*100,A=S?100:0,O=R*.6+y*.3+A*.1,L=E===4&&S&&n.program.length>=I&&o.filter(k=>k.type==="error").length===0;f({presentations:{completed:E,total:4,percentage:R},programPieces:{completed:n.program.length,required:I,percentage:y},directorEvaluation:{completed:S,percentage:A},overall:{percentage:O,canComplete:L}})},x=b=>{if(!n)return;const E={...n,...b,updatedAt:new Date};a(E)},v=(b,E)=>{if(!n)return;const I=[...n.presentations||[]];I[b]={...I[b],...E},x({presentations:I})},w=b=>{x({directorEvaluation:b})},j=b=>n?.presentations?b===0?!0:n.presentations[b-1]?.completed||!1:!1,C=()=>e.jsxs(Q,{className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(X,{className:"w-6 h-6 ml-3 text-primary-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×”×’×“×¨×ª ×¨×¡×™×˜×œ"})]}),e.jsx(id,{conservatoryName:n?.conservatoryName,directorName:n?.directorName,recitalField:n?.recitalField,recitalUnits:n?.recitalUnits,studentName:t.name,studentId:r,onRecitalFieldChange:b=>x({recitalField:b}),onRecitalUnitsChange:b=>x({recitalUnits:b})})]}),P=()=>d?e.jsxs(Q,{className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(oa,{className:"w-6 h-6 ml-3 text-green-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×”×ª×§×“××•×ª ×›×œ×œ×™×ª"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[d.presentations.completed,"/4"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"×”×©××¢×•×ª ×”×•×©×œ××•"}),e.jsx(Qe,{value:d.presentations.percentage,className:"h-2"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600 mb-1",children:[d.programPieces.completed,"/",d.programPieces.required]}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"×™×¦×™×¨×•×ª ×‘×ª×›× ×™×ª"}),e.jsx(Qe,{value:d.programPieces.percentage,className:"h-2"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:d.directorEvaluation.completed?"âœ“":"âœ—"}),e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"×”×¢×¨×›×ª ×× ×”×œ"}),e.jsx(Qe,{value:d.directorEvaluation.percentage,className:"h-2"})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-primary-600 mb-2",children:[Math.round(d.overall.percentage),"%"]}),e.jsx("div",{className:"text-sm text-gray-600 mb-3",children:"×”×©×œ××” ×›×œ×œ×™×ª"}),e.jsx(Qe,{value:d.overall.percentage,className:"h-3 mb-4"}),d.overall.canComplete?e.jsxs(Je,{variant:"success",className:"text-sm",children:[e.jsx(xe,{className:"w-4 h-4 ml-1"}),"××•×›×Ÿ ×œ×”×©×œ××”"]}):e.jsxs(Je,{variant:"secondary",className:"text-sm",children:[e.jsx(ne,{className:"w-4 h-4 ml-1"}),"×‘×ª×”×œ×™×š"]})]})]}):null,T=()=>o.length===0?null:e.jsx("div",{className:"mb-6 space-y-2",children:o.map((b,E)=>e.jsxs(Un,{variant:b.type==="error"?"destructive":"default",children:[e.jsx(xr,{className:"h-4 w-4"}),e.jsx(zn,{children:b.message})]},E))}),g=()=>n?.presentations?e.jsxs("div",{className:"space-y-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Et,{className:"w-6 h-6 ml-3 text-orange-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×”×©××¢×•×ª"})]}),n.presentations.map((b,E)=>{const I=j(E),y=E===3;return e.jsxs(Q,{className:`p-6 relative ${I?"":"opacity-50"}`,children:[!I&&e.jsx("div",{className:"absolute inset-0 bg-gray-100/50 flex items-center justify-center z-10 rounded-lg",children:e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-lg flex items-center",children:[e.jsx(Ar,{className:"w-5 h-5 ml-2 text-gray-500"}),e.jsxs("span",{className:"text-gray-600",children:["×”×©×œ× ××ª ×”×©××¢×” ",E," ×ª×—×™×œ×”"]})]})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[y?e.jsx(tt,{className:"w-6 h-6 ml-3 text-yellow-500"}):e.jsx(X,{className:"w-6 h-6 ml-3 text-blue-500"}),e.jsx("h4",{className:"text-lg font-bold",children:y?"××’×Ÿ ×‘×’×¨×•×ª":`×”×©××¢×” ${E+1}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[b.completed?e.jsxs(Je,{variant:"success",children:[e.jsx(xe,{className:"w-4 h-4 ml-1"}),"×”×•×©×œ××”"]}):e.jsxs(Je,{variant:"secondary",children:[e.jsx(ne,{className:"w-4 h-4 ml-1"}),"×××ª×™× ×”"]}),I?e.jsx(ia,{className:"w-4 h-4 text-green-500"}):e.jsx(Ar,{className:"w-4 h-4 text-gray-400"})]})]}),y&&I?e.jsx(dd,{magenBagrut:b,onUpdate:S=>v(E,S),readonly:!I}):I?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(z,{className:"text-right",children:"×ª××¨×™×š ×”×©××¢×”"}),e.jsx(V,{type:"date",value:b.date?new Date(b.date).toISOString().split("T")[0]:"",onChange:S=>v(E,{date:S.target.value?new Date(S.target.value):void 0,completed:!!S.target.value}),className:"text-right"})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-right",children:"×¡×˜×˜×•×¡"}),e.jsxs(ir,{value:b.status||"pending",onValueChange:S=>v(E,{status:S}),children:[e.jsx(wt,{className:"text-right",children:e.jsx(cr,{})}),e.jsxs(St,{children:[e.jsx(fe,{value:"pending",children:"×××ª×™×Ÿ"}),e.jsx(fe,{value:"completed",children:"×”×•×©×œ×"}),e.jsx(fe,{value:"needs_improvement",children:"×–×§×•×§ ×©×™×¤×•×¨"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(z,{className:"text-right",children:"×”×¢×¨×•×ª ×•××©×•×‘"}),e.jsx(V,{value:b.notes||"",onChange:S=>v(E,{notes:S.target.value}),placeholder:"×”×¢×¨×•×ª ×¢×œ ×”×”×©××¢×”...",className:"text-right",dir:"rtl"})]})]}):null]},E)})]}):null;return l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(X,{className:"w-8 h-8 animate-pulse mx-auto mb-4 text-primary-600"}),e.jsx("div",{className:"text-lg font-semibold text-gray-700 mb-2",children:"×˜×•×¢×Ÿ × ×ª×•× ×™ ×‘×’×¨×•×ª..."})]})}):n?e.jsxs("div",{className:"space-y-6",children:[C(),P(),T(),e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(ur,{className:"w-6 h-6 ml-3 text-purple-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×ª×›× ×™×ª ×”×¨×¡×™×˜×œ"})]}),e.jsx(cd,{program:n.program||[],onChange:b=>x({program:b}),requiredPieces:n.recitalUnits===5?5:3,readonly:!1})]}),g(),e.jsxs(Q,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(la,{className:"w-6 h-6 ml-3 text-indigo-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"×”×¢×¨×›×ª ×× ×”×œ"})]}),e.jsx(ud,{evaluation:n.directorEvaluation||{points:void 0,comments:""},onUpdate:w,readonly:!1})]}),e.jsx(md,{bagrut:n,completionStatus:d,validationErrors:o})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-600 text-lg mb-2",children:"âš ï¸ ×©×’×™××” ×‘×˜×¢×™× ×ª × ×ª×•× ×™ ×‘×’×¨×•×ª"}),e.jsx(hr,{onClick:h,variant:"outline",children:"× ×¡×” ×©×•×‘"})]})},xd=({student:t})=>e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âœ…"}),e.jsx("div",{children:"× ×•×›×—×•×ª - ×‘×¤×™×ª×•×—"})]}),pd=({student:t})=>e.jsxs("div",{className:"p-6 text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ğŸ“„"}),e.jsx("div",{children:"××¡××›×™× - ×‘×¤×™×ª×•×—"})]}),be=()=>e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ca,{className:"w-6 h-6 animate-spin mx-auto mb-3 text-primary-600"}),e.jsx("div",{className:"text-sm text-gray-600",children:"×˜×•×¢×Ÿ × ×ª×•× ×™×..."})]})}),hd=({error:t,resetError:r,tabName:s})=>e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-red-600 text-lg mb-2",children:["âš ï¸ ×©×’×™××” ×‘×˜×¢×™× ×ª ",s]}),e.jsx("div",{className:"text-gray-600 mb-4 text-sm",children:t.message}),e.jsx("button",{onClick:r,className:"px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors text-sm",children:"× ×¡×” ×©×•×‘"})]});class ve extends ye.Component{constructor(r){super(r),this.state={hasError:!1,error:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,s){console.error(`Error in ${this.props.tabName} tab:`,r,s)}render(){return this.state.hasError&&this.state.error?e.jsx(hd,{error:this.state.error,resetError:()=>this.setState({hasError:!1,error:null}),tabName:this.props.tabName}):this.props.children}}const gd=({activeTab:t,studentId:r,student:s,isLoading:n,errors:a={},actions:l={},fileHandling:c={},onStudentUpdate:o})=>{const u=()=>{switch(t){case"documents":return e.jsx(ut.DocumentsList,{});case"schedule":return e.jsx(ut.Schedule,{});default:return e.jsx(ut.TabContent,{})}},d=typeof n=="object"?n[t]||n.student:n;if(d)return e.jsx(xs,{isLoading:!0,skeleton:u(),minHeight:"400px",children:e.jsx("div",{})});if(!s)return e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"ğŸ“„"}),e.jsx("div",{className:"text-gray-600",children:"××™×Ÿ × ×ª×•× ×™× ×œ×”×¦×’×”"})]})});const f=()=>{switch(t){case"personal":return e.jsx(ve,{tabName:"×¤×¨×˜×™× ××™×©×™×™×",children:e.jsx(i.Suspense,{fallback:e.jsx(be,{}),children:e.jsx(va,{student:s,studentId:r,onStudentUpdate:o})})});case"academic":return e.jsx(ve,{tabName:"×¤×¨×˜×™× ××§×“××™×™×",children:e.jsx(i.Suspense,{fallback:e.jsx(be,{}),children:e.jsx(ya,{student:s,studentId:r,onStudentUpdate:o})})});case"schedule":return e.jsx(ve,{tabName:"×œ×•×— ×–×× ×™×",children:e.jsx(i.Suspense,{fallback:e.jsx(be,{}),children:e.jsx(Sa,{student:s,studentId:r,isLoading:d})})});case"attendance":return e.jsx(ve,{tabName:"× ×•×›×—×•×ª",children:e.jsx(i.Suspense,{fallback:e.jsx(be,{}),children:e.jsx(xd,{student:s})})});case"orchestra":return e.jsx(ve,{tabName:"×ª×–××•×¨×•×ª",children:e.jsx(i.Suspense,{fallback:e.jsx(be,{}),children:e.jsx(Ca,{student:s,studentId:r,isLoading:d})})});case"theory":return e.jsx(ve,{tabName:"×ª×™××•×¨×™×”",children:e.jsx(i.Suspense,{fallback:e.jsx(be,{}),children:e.jsx(ja,{student:s,studentId:r})})});case"bagrut":return e.jsx(ve,{tabName:"×‘×’×¨×•×ª",children:e.jsx(i.Suspense,{fallback:e.jsx(be,{}),children:e.jsx(fd,{student:s,studentId:r,onStudentUpdate:o})})});case"documents":return e.jsx(ve,{tabName:"××¡××›×™×",children:e.jsx(i.Suspense,{fallback:e.jsx(be,{}),children:e.jsx(pd,{student:s})})});default:return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 text-lg mb-2",children:"ğŸš§"}),e.jsx("div",{className:"text-gray-600",children:"×ª×•×›×Ÿ ×˜×¨× ×¤×•×ª×—"})]})}};return e.jsx("div",{className:"min-h-96",children:f()})},Id=()=>{console.log("ğŸ” StudentDetailsPage component loading...");const{studentId:t}=Kn();console.log("ğŸ“ Student ID from params:",t);const r=Yn(),[s,n]=i.useState("personal"),[a,l]=i.useState(null),[c,o]=i.useState(!0),[u,d]=i.useState(null),f=h=>{console.log("ğŸ”„ Updating student data in parent component:",h),l(h)},p=[{id:"personal",label:"×¤×¨×˜×™× ××™×©×™×™×",component:()=>null},{id:"academic",label:"××™×“×¢ ××§×“××™",component:()=>null},{id:"schedule",label:"×œ×•×— ×–×× ×™×",component:()=>null},{id:"attendance",label:"× ×•×›×—×•×ª",component:()=>null},{id:"orchestra",label:"×ª×–××•×¨×•×ª",component:()=>null},{id:"theory",label:"×ª××•×¨×™×”",component:()=>null},{id:"documents",label:"××¡××›×™×",component:()=>null}];return!t||t.trim()===""?e.jsx(qn,{to:"/students",replace:!0}):(i.useEffect(()=>{t&&(async()=>{try{o(!0),d(null),console.log("ğŸŒ Fetching student data for ID:",t);const m=await K.students.getStudentById(t);console.log("âœ… Student data received:",m),console.log("ğŸ“š Enrollments in response:",m?.enrollments),console.log("ğŸ‘¨â€ğŸ« Teacher assignments in response:",m?.teacherAssignments),l(m)}catch(m){console.error("âŒ Error fetching student:",m),d(m.message||"Failed to load student data")}finally{o(!1)}})()},[t]),c?e.jsx("div",{className:"flex items-center justify-center min-h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx(rt,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-primary-600"}),e.jsx("div",{className:"text-lg text-gray-600",children:"×˜×•×¢×Ÿ ×¤×¨×˜×™ ×ª×œ××™×“..."})]})}):u?e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-96 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âŒ"}),e.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-2",children:"×©×’×™××” ×‘×˜×¢×™× ×ª ×”× ×ª×•× ×™×"}),e.jsx("p",{className:"text-gray-600 mb-6",children:u}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:[e.jsx(rt,{className:"w-4 h-4"}),"× ×¡×” ×©×•×‘"]})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("button",{onClick:()=>r("/students"),className:"hover:text-primary-600 transition-colors",children:"×ª×œ××™×“×™×"}),e.jsx(Or,{className:"w-4 h-4 rotate-180"}),e.jsx("span",{className:"text-gray-900 font-medium",children:"×¤×¨×˜×™ ×ª×œ××™×“"})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsx("div",{className:"w-20 h-20 bg-primary-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-primary-600",children:a.personalInfo?.fullName?.charAt(0)||"?"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.personalInfo?.fullName||"×©× ×œ× ×–××™×Ÿ"}),e.jsx("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${a.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a.isActive?"×¤×¢×™×œ":"×œ× ×¤×¢×™×œ"})})]})]})}),e.jsx(ga,{activeTab:s,onTabChange:n,tabs:p}),e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:e.jsx(gd,{activeTab:s,studentId:t,student:a,isLoading:!1,onStudentUpdate:f})})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-96 text-center",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ğŸ”"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"×ª×œ××™×“ ×œ× × ××¦×"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"×œ× × ××¦××• ×¤×¨×˜×™× ×¢×‘×•×¨ ×”×ª×œ××™×“ ×”××‘×•×§×©"}),e.jsxs("button",{onClick:()=>r("/students"),className:"flex items-center gap-2 px-4 py-2 bg-primary-500 text-white rounded-lg hover:bg-primary-600",children:[e.jsx(Or,{className:"w-4 h-4"}),"×—×–×•×¨ ×œ×¨×©×™××ª ×”×ª×œ××™×“×™×"]})]}))};export{Id as default};
